window.__require=function e(t,n,r){function i(s,c){if(!n[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!c&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+s+"'")}}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){return i(t[s][1][e]||e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){var r,i,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function u(e){if(i===clearTimeout)return clearTimeout(e);if((i===c||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{i="function"==typeof clearTimeout?clearTimeout:c}catch(e){i=c}})();var l,h=[],f=!1,p=-1;function d(){f&&l&&(f=!1,l.length?h=l.concat(h):p=-1,h.length&&m())}function m(){if(!f){var e=a(d);f=!0;for(var t=h.length;t;){for(l=h,h=[];++p<t;)l&&l[p].run();p=-1,t=h.length}l=null,f=!1,u(e)}}function g(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new g(e,t)),1!==h.length||f||a(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){var r,i,o,s={};!function(e,r){"object"==typeof n&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof n?n.AV=r():e.AV=r()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=23)}([function(e,t,n){(function(e,n){var r;!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},o=i._,s=Array.prototype,c=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,u=s.push,l=s.slice,h=c.toString,f=c.hasOwnProperty,p=Array.isArray,d=Object.keys,m=Object.create,g=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};void 0===t||t.nodeType?i._=v:(void 0!==n&&!n.nodeType&&n.exports&&(t=n.exports=v),t._=v),v.VERSION="1.9.1";var _,y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},b=function(e,t,n){return v.iteratee!==_?v.iteratee(e,t):null==e?v.identity:v.isFunction(e)?y(e,t,n):v.isObject(e)&&!v.isArray(e)?v.matcher(e):v.property(e)};v.iteratee=_=function(e,t){return b(e,t,1/0)};var S=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},E=function(e){if(!v.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},k=function(e){return function(t){return null==t?void 0:t[e]}},T=function(e,t){return null!=e&&f.call(e,t)},w=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},R=Math.pow(2,53)-1,A=k("length"),I=function(e){var t=A(e);return"number"==typeof t&&t>=0&&t<=R};v.each=v.forEach=function(e,t,n){var r,i;if(t=y(t,n),I(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=v.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},v.map=v.collect=function(e,t,n){t=b(t,n);for(var r=!I(e)&&v.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var c=r?r[s]:s;o[s]=t(e[c],c,e)}return o};var C=function(e){var t=function(t,n,r,i){var o=!I(t)&&v.keys(t),s=(o||t).length,c=e>0?0:s-1;for(i||(r=t[o?o[c]:c],c+=e);c>=0&&c<s;c+=e){var a=o?o[c]:c;r=n(r,t[a],a,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,y(n,i,4),r,o)}};v.reduce=v.foldl=v.inject=C(1),v.reduceRight=v.foldr=C(-1),v.find=v.detect=function(e,t,n){var r=(I(e)?v.findIndex:v.findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]},v.filter=v.select=function(e,t,n){var r=[];return t=b(t,n),v.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},v.reject=function(e,t,n){return v.filter(e,v.negate(b(t)),n)},v.every=v.all=function(e,t,n){t=b(t,n);for(var r=!I(e)&&v.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},v.some=v.any=function(e,t,n){t=b(t,n);for(var r=!I(e)&&v.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,n,r){return I(e)||(e=v.values(e)),("number"!=typeof n||r)&&(n=0),v.indexOf(e,t,n)>=0},v.invoke=S(function(e,t,n){var r,i;return v.isFunction(t)?i=t:v.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),v.map(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=w(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var c=0,a=(e=I(e)?e:v.values(e)).length;c<a;c++)null!=(r=e[c])&&r>o&&(o=r);else t=b(t,n),v.each(e,function(e,n,r){((i=t(e,n,r))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o},v.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var c=0,a=(e=I(e)?e:v.values(e)).length;c<a;c++)null!=(r=e[c])&&r<o&&(o=r);else t=b(t,n),v.each(e,function(e,n,r){((i=t(e,n,r))<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},v.shuffle=function(e){return v.sample(e,1/0)},v.sample=function(e,t,n){if(null==t||n)return I(e)||(e=v.values(e)),e[v.random(e.length-1)];var r=I(e)?v.clone(e):v.values(e),i=A(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var c=v.random(s,o),a=r[s];r[s]=r[c],r[c]=a}return r.slice(0,t)},v.sortBy=function(e,t,n){var r=0;return t=b(t,n),v.pluck(v.map(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var x=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=b(r,i),v.each(n,function(t,i){var s=r(t,i,n);e(o,t,s)}),o}};v.groupBy=x(function(e,t,n){T(e,n)?e[n].push(t):e[n]=[t]}),v.indexBy=x(function(e,t,n){e[n]=t}),v.countBy=x(function(e,t,n){T(e,n)?e[n]++:e[n]=1});var O=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(e){return e?v.isArray(e)?l.call(e):v.isString(e)?e.match(O):I(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:I(e)?e.length:v.keys(e).length},v.partition=x(function(e,t,n){e[n?0:1].push(t)},!0),v.first=v.head=v.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,Boolean)};var N=function(e,t,n,r){for(var i=(r=r||[]).length,o=0,s=A(e);o<s;o++){var c=e[o];if(I(c)&&(v.isArray(c)||v.isArguments(c)))if(t)for(var a=0,u=c.length;a<u;)r[i++]=c[a++];else N(c,t,n,r),i=r.length;else n||(r[i++]=c)}return r};v.flatten=function(e,t){return N(e,t,!1)},v.without=S(function(e,t){return v.difference(e,t)}),v.uniq=v.unique=function(e,t,n,r){v.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=b(n,r));for(var i=[],o=[],s=0,c=A(e);s<c;s++){var a=e[s],u=n?n(a,s,e):a;t&&!n?(s&&o===u||i.push(a),o=u):n?v.contains(o,u)||(o.push(u),i.push(a)):v.contains(i,a)||i.push(a)}return i},v.union=S(function(e){return v.uniq(N(e,!0,!0))}),v.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=A(e);r<i;r++){var o=e[r];if(!v.contains(t,o)){var s;for(s=1;s<n&&v.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},v.difference=S(function(e,t){return t=N(t,!0,!0),v.filter(e,function(e){return!v.contains(t,e)})}),v.unzip=function(e){for(var t=e&&v.max(e,A).length||0,n=Array(t),r=0;r<t;r++)n[r]=v.pluck(e,r);return n},v.zip=S(v.unzip),v.object=function(e,t){for(var n={},r=0,i=A(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var P=function(e){return function(t,n,r){n=b(n,r);for(var i=A(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};v.findIndex=P(1),v.findLastIndex=P(-1),v.sortedIndex=function(e,t,n,r){for(var i=(n=b(n,r,1))(t),o=0,s=A(e);o<s;){var c=Math.floor((o+s)/2);n(e[c])<i?o=c+1:s=c}return o};var L=function(e,t,n){return function(r,i,o){var s=0,c=A(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+c,s):c=o>=0?Math.min(o+1,c):o+c+1;else if(n&&o&&c)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(l.call(r,s,c),v.isNaN))>=0?o+s:-1;for(o=e>0?s:c-1;o>=0&&o<c;o+=e)if(r[o]===i)return o;return-1}};v.indexOf=L(1,v.findIndex,v.sortedIndex),v.lastIndexOf=L(-1,v.findLastIndex),v.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},v.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(l.call(e,r,r+=t));return n};var M=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=E(e.prototype),s=e.apply(o,i);return v.isObject(s)?s:o};v.bind=S(function(e,t,n){if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var r=S(function(i){return M(e,r,t,this,n.concat(i))});return r}),v.partial=S(function(e,t){var n=v.partial.placeholder,r=function(){for(var i=0,o=t.length,s=Array(o),c=0;c<o;c++)s[c]=t[c]===n?arguments[i++]:t[c];for(;i<arguments.length;)s.push(arguments[i++]);return M(e,r,this,this,s)};return r}),v.partial.placeholder=v,v.bindAll=S(function(e,t){var n=(t=N(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=v.bind(e[r],e)}}),v.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return T(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},v.delay=S(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,n){var r,i,o,s,c=0;n||(n={});var a=function(){c=!1===n.leading?0:v.now(),r=null,s=e.apply(i,o),r||(i=o=null)},u=function(){var u=v.now();c||!1!==n.leading||(c=u);var l=t-(u-c);return i=this,o=arguments,l<=0||l>t?(r&&(clearTimeout(r),r=null),c=u,s=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(a,l)),s};return u.cancel=function(){clearTimeout(r),c=0,r=i=o=null},u},v.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},s=S(function(s){if(r&&clearTimeout(r),n){var c=!r;r=setTimeout(o,t),c&&(i=e.apply(this,s))}else r=v.delay(o,t,this,s);return i});return s.cancel=function(){clearTimeout(r),r=null},s},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},v.once=v.partial(v.before,2),v.restArguments=S;var D=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],U=function(e,t){var n=F.length,r=e.constructor,i=v.isFunction(r)&&r.prototype||c,o="constructor";for(T(e,o)&&!v.contains(t,o)&&t.push(o);n--;)(o=F[n])in e&&e[o]!==i[o]&&!v.contains(t,o)&&t.push(o)};v.keys=function(e){if(!v.isObject(e))return[];if(d)return d(e);var t=[];for(var n in e)T(e,n)&&t.push(n);return D&&U(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&U(e,t),t},v.values=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},v.mapObject=function(e,t,n){t=b(t,n);for(var r=v.keys(e),i=r.length,o={},s=0;s<i;s++){var c=r[s];o[c]=t(e[c],c,e)}return o},v.pairs=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},v.invert=function(e){for(var t={},n=v.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()};var j=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),c=s.length,a=0;a<c;a++){var u=s[a];t&&void 0!==n[u]||(n[u]=o[u])}return n}};v.extend=j(v.allKeys),v.extendOwn=v.assign=j(v.keys),v.findKey=function(e,t,n){t=b(t,n);for(var r,i=v.keys(e),o=0,s=i.length;o<s;o++)if(t(e[r=i[o]],r,e))return r};var H,B,q=function(e,t,n){return t in n};v.pick=S(function(e,t){var n={},r=t[0];if(null==e)return n;v.isFunction(r)?(t.length>1&&(r=y(r,t[1])),t=v.allKeys(e)):(r=q,t=N(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],c=e[s];r(c,s,e)&&(n[s]=c)}return n}),v.omit=S(function(e,t){var n,r=t[0];return v.isFunction(r)?(r=v.negate(r),t.length>1&&(n=t[1])):(t=v.map(N(t,!1,!1),String),r=function(e,n){return!v.contains(t,n)}),v.pick(e,r,n)}),v.defaults=j(v.allKeys,!0),v.create=function(e,t){var n=E(e);return t&&v.extendOwn(n,t),n},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var n=v.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0},H=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&B(e,t,n,r)},B=function(e,t,n,r){e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return a.valueOf.call(e)===a.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,c=t.constructor;if(s!==c&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!H(e[u],t[u],n,r))return!1}else{var l,f=v.keys(e);if(u=f.length,v.keys(t).length!==u)return!1;for(;u--;)if(l=f[u],!T(t,l)||!H(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0},v.isEqual=function(e,t){return H(e,t)},v.isEmpty=function(e){return null==e||(I(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=p||function(e){return"[object Array]"===h.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){v["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return T(e,"callee")});var W=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof W&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return!v.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&isNaN(e)},v.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){if(!v.isArray(t))return T(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!f.call(e,i))return!1;e=e[i]}return!!n},v.noConflict=function(){return i._=o,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=function(e){return v.isArray(e)?function(t){return w(t,e)}:k(e)},v.propertyOf=function(e){return null==e?function(){}:function(t){return v.isArray(t)?w(e,t):e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,n){var r=Array(Math.max(0,e));t=y(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=v.invert(G),z=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};v.escape=z(G),v.unescape=z(K),v.result=function(e,t,n){v.isArray(t)||(t=[t]);var r=t.length;if(!r)return v.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=v.isFunction(o)?o.call(e):o}return e};var J=0;v.uniqueId=function(e){var t=++J+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(e){return"\\"+Y[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var r,i=RegExp([(t.escape||V).source,(t.interpolate||V).source,(t.evaluate||V).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,function(t,n,r,i,c){return s+=e.slice(o,c).replace(X,Q),o=c+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var c=function(e){return r.call(this,e,v)};return c.source="function("+(t.variable||"obj")+"){\n"+s+"}",c},v.chain=function(e){var t=v(e);return t._chain=!0,t};var Z=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){return v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),Z(this,n.apply(v,e))}}),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Z(this,n)}}),v.each(["concat","join","slice"],function(e){var t=s[e];v.prototype[e]=function(){return Z(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},void 0!==(r=function(){return v}.apply(t,[]))&&(n.exports=r)}()}).call(t,n(6),n(30)(e))},function(e,t,n){"use strict";var r=n(42).Promise;r._continueWhile=function(e,t){return e()?t().then(function(){return r._continueWhile(e,t)}):r.resolve()},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(57),o=n(0).extend,s=n(1),c=n(5),a=n(3),u=a.getSessionToken,l=a.ajax,h=function(e,t){var n=(new Date).getTime(),r=i(n+e);return t?r+","+n+",master":r+","+n},f=function(e,t){t?e["X-LC-Sign"]=h(c.applicationKey):e["X-LC-Key"]=c.applicationKey},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n={"X-LC-Id":c.applicationId,"Content-Type":"application/json;charset=UTF-8"},r=!1;return"boolean"==typeof e.useMasterKey?r=e.useMasterKey:"boolean"==typeof c._config.useMasterKey&&(r=c._config.useMasterKey),r?c.masterKey?t?n["X-LC-Sign"]=h(c.masterKey,!0):n["X-LC-Key"]=c.masterKey+",master":(console.warn("masterKey is not set, fall back to use appKey"),f(n,t)):f(n,t),c.hookKey&&(n["X-LC-Hook-Key"]=c.hookKey),null!==c._config.production&&(n["X-LC-Prod"]=String(c._config.production)),n["X-LC-UA"]=c._sharedConfig.userAgent,s.resolve().then(function(){var t=u(e);if(t)n["X-LC-Session"]=t;else if(!c._config.disableCurrentUser)return c.User.currentAsync().then(function(e){return e&&e._sessionToken&&(n["X-LC-Session"]=e._sessionToken),n});return n})},d=function(e){var t=e.service,n=void 0===t?"api":t,r=e.version,i=void 0===r?"1.1":r,o=e.path,s=c._config.serverURLs[n];if(!s)throw new Error("undefined server URL for "+n);return"/"!==s.charAt(s.length-1)&&(s+="/"),s+=i,o&&(s+=o),s},m=function(e){var t=e.service,n=e.version,i=e.method,o=e.path,s=e.query,a=e.data,u=e.authOptions,h=e.signKey,f=void 0===h||h;if(!c.applicationId||!c.applicationKey&&!c.masterKey)throw new Error("Not initialized");c._appRouter.refresh();var m=c._config.requestTimeout,g=d({service:t,path:o,version:n});return p(u,f).then(function(e){return l({method:i,url:g,query:s,data:a,headers:e,timeout:m}).catch(function(e){var t={code:e.code||-1,error:e.message||e.responseText};if(e.response&&e.response.code)t=e.response;else if(e.responseText)try{t=JSON.parse(e.responseText)}catch(e){}t.rawMessage=t.rawMessage||t.error,c._sharedConfig.keepErrorRawMessage||(t.error+=" ["+(e.statusCode||"N/A")+" "+i+" "+g+"]");var n=new Error(t.error);throw delete t.error,r.extend(n,t)})})};c.request=m,e.exports={_request:function(e,t,n,r,i,s,c){var a="";if(e&&(a+="/"+e),t&&(a+="/"+t),n&&(a+="/"+n),i&&i._fetchWhenSave)throw new Error("_fetchWhenSave should be in the query");if(i&&i._where)throw new Error("_where should be in the query");return r&&"get"===r.toLowerCase()&&(c=o({},c,i),i=null),m({method:r,path:a,query:c,data:i,authOptions:s})},request:m}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),o=n(8),s=n(7),c=s("leancloud:request"),a=s("leancloud:request:error"),u=n(1),l=0,h=function(e){return i.isArray(e)?e:void 0===e||null===e?[]:[e]},f=function(){};e.exports={ajax:function(e){var t=e.method,n=e.url,i=e.query,h=e.data,f=e.headers,p=void 0===f?{}:f,d=e.onprogress,m=e.timeout,g={};if(i)for(var v in i){var _=i[v];void 0!==_&&("object"===(void 0===_?"undefined":r(_))?g[v]=JSON.stringify(_):g[v]=_)}var y=l++;return c("request(%d) %s %s %o %o %o",y,t,n,g,h,p),new u(function(e,r){var u=o(t,n).set(p).query(g).send(h);d&&u.on("progress",d),m&&u.timeout(m),u.end(function(o,u){return o?(u&&(s.enabled("leancloud:request")||a("request(%d) %s %s %o %o %o",y,t,n,i,h,p),a("response(%d) %d %O %o",y,u.status,u.body||u.text,u.header),o.statusCode=u.status,o.responseText=u.text,o.response=u.body),r(o)):(c("response(%d) %d %O %o",y,u.status,u.body||u.text,u.header),e(u.body))})})},isNullOrUndefined:function(e){return i.isNull(e)||i.isUndefined(e)},ensureArray:h,transformFetchOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.keys,n=e.include,r=e.includeACL,i={};return t&&(i.keys=h(t).join(",")),n&&(i.include=h(n).join(",")),r&&(i.returnACL=r),i},getSessionToken:function(e){return e.sessionToken?e.sessionToken:e.user&&"function"==typeof e.user.getSessionToken?e.user.getSessionToken():void 0},tap:function(e){return function(t){return e(t),t}},inherits:function(e,t,n){var r;return r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){e.apply(this,arguments)},i.extend(r,e),f.prototype=e.prototype,r.prototype=new f,t&&i.extend(r.prototype,t),n&&i.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r},parseDate:function(e){var t=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$").exec(e);if(!t)return null;var n=t[1]||0,r=(t[2]||1)-1,i=t[3]||0,o=t[4]||0,s=t[5]||0,c=t[6]||0,a=t[8]||0;return new Date(Date.UTC(n,r,i,o,s,c,a))},setValue:function(e,t,n){var r=t.split("."),i=r.pop(),o=e;return r.forEach(function(e){void 0===o[e]&&(o[e]={}),o=o[e]}),o[i]=n,e},findValue:function(e,t){for(var n=t.split("."),r=n[0],i=n.pop(),o=e,s=0;s<n.length;s++)if(void 0===(o=o[n[s]]))return[void 0,void 0,i];return[o[i],o,i,r]},isPlainObject:function(e){return i.isObject(e)&&Object.getPrototypeOf(e)===Object.prototype}}},function(e,t,n){"use strict";function r(e,t){var n=new Error(t);return n.code=e,n}n(0).extend(r,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,X_DOMAIN_REQUEST:602}),e.exports=r},function(e,t,n){"use strict";(function(t){var r=n(0),i=n(17),o=n(33),s=n(3),c=s.inherits,a=s.parseDate,u=n(1),l=t.AV||{};l._config={serverURLs:{},useMasterKey:!1,production:null,realtime:null,requestTimeout:null},l._sharedConfig={userAgent:o,liveQueryRealtime:null},l._getAVPath=function(e){if(!l.applicationId)throw new Error("You need to call AV.initialize before using AV.");if(e||(e=""),!r.isString(e))throw new Error("Tried to get a localStorage path that wasn't a String.");return"/"===e[0]&&(e=e.substring(1)),"AV/"+l.applicationId+"/"+e},l._installationId=null,l._getInstallationId=function(){if(l._installationId)return u.resolve(l._installationId);var e=l._getAVPath("installationId");return l.localStorage.getItemAsync(e).then(function(t){return l._installationId=t,l._installationId?t:(l._installationId=t=i(),l.localStorage.setItemAsync(e,t).then(function(){return t}))})},l._subscriptionId=null,l._refreshSubscriptionId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l._getAVPath("subscriptionId"),t=l._subscriptionId=i();return l.localStorage.setItemAsync(e,t).then(function(){return t})},l._getSubscriptionId=function(){if(l._subscriptionId)return u.resolve(l._subscriptionId);var e=l._getAVPath("subscriptionId");return l.localStorage.getItemAsync(e).then(function(t){return l._subscriptionId=t,l._subscriptionId||(t=l._refreshSubscriptionId(e)),t})},l._parseDate=a,l._extend=function(e,t){var n=c(this,e,t);return n.extend=this.extend,n},l._encode=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof l.Object){if(n)throw new Error("AV.Objects not allowed here");return t&&!r.include(t,e)&&e._hasData?e._toFullJSON(t.concat(e),i):e._toPointer()}if(e instanceof l.ACL)return e.toJSON();if(r.isDate(e))return i?{__type:"Date",iso:e.toJSON()}:e.toJSON();if(e instanceof l.GeoPoint)return e.toJSON();if(r.isArray(e))return r.map(e,function(e){return l._encode(e,t,n,i)});if(r.isRegExp(e))return e.source;if(e instanceof l.Relation)return e.toJSON();if(e instanceof l.Op)return e.toJSON();if(e instanceof l.File){if(!e.url()&&!e.id)throw new Error("Tried to save an object containing an unsaved file.");return e._toFullJSON(t,i)}return r.isObject(e)?r.mapObject(e,function(e,r){return l._encode(e,t,n,i)}):e},l._decode=function(e,t){if(!r.isObject(e)||r.isDate(e))return e;if(r.isArray(e))return r.map(e,function(e){return l._decode(e)});if(e instanceof l.Object)return e;if(e instanceof l.File)return e;if(e instanceof l.Op)return e;if(e instanceof l.GeoPoint)return e;if(e instanceof l.ACL)return e;if("ACL"===t)return new l.ACL(e);if(e.__op)return l.Op._decode(e);var n;if("Pointer"===e.__type){n=e.className;var i=l.Object._create(n);if(Object.keys(e).length>3){var o=r.clone(e);delete o.__type,delete o.className,i._finishFetch(o,!0)}else i._finishFetch({objectId:e.objectId},!1);return i}if("Object"===e.__type){n=e.className;var s=r.clone(e);delete s.__type,delete s.className;var c=l.Object._create(n);return c._finishFetch(s,!0),c}if("Date"===e.__type)return l._parseDate(e.iso);if("GeoPoint"===e.__type)return new l.GeoPoint({latitude:e.latitude,longitude:e.longitude});if("Relation"===e.__type){if(!t)throw new Error("key missing decoding a Relation");var a=new l.Relation(null,t);return a.targetClassName=e.className,a}if("File"===e.__type){var u=new l.File(e.name),h=r.clone(e);return delete h.__type,u._finishFetch(h),u}return r.mapObject(e,l._decode)},l.parseJSON=l._decode,l._encodeObjectOrArray=function(e){var t=function(e){return e&&e._toFullJSON&&(e=e._toFullJSON([])),r.mapObject(e,function(e){return l._encode(e,[])})};return r.isArray(e)?e.map(function(e){return t(e)}):t(e)},l._arrayEach=r.each,l._traverse=function(e,t,n){if(e instanceof l.Object){if(n=n||[],r.indexOf(n,e)>=0)return;return n.push(e),l._traverse(e.attributes,t,n),t(e)}return e instanceof l.Relation||e instanceof l.File?t(e):r.isArray(e)?(r.each(e,function(r,i){var o=l._traverse(r,t,n);o&&(e[i]=o)}),t(e)):r.isObject(e)?(l._each(e,function(r,i){var o=l._traverse(r,t,n);o&&(e[i]=o)}),t(e)):t(e)},l._objectEach=l._each=function(e,t){r.isObject(e)?r.each(r.keys(e),function(n){t(e[n],n)}):r.each(e,t)},e.exports=l}).call(t,n(6))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof s&&(n=s)}e.exports=n},function(t,n,r){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":c(console))&&console.log&&(e=console).log.apply(e,arguments)},n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(i=++r)}),e.splice(i,0,n)}},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){var t;try{t=n.storage.getItem("debug")}catch(t){}return!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG),t},n.useColors=function(){return!(void 0===s||!s.process||"renderer"!==s.process.type&&!s.process.__nwjs)||(void 0===i||!i.userAgent||!i.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||void 0!==s&&s.console&&(s.console.firebug||s.console.exception&&s.console.table)||void 0!==i&&i.userAgent&&i.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||void 0!==i&&i.userAgent&&i.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return o}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=r(40)(n),t.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t,n){function i(){}function o(e){if(!v(e))return e;var t=[];for(var n in e)c(t,n,e[n]);return t.join("&")}function c(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){c(e,t,n)});else if(v(n))for(var r in n)c(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function a(e){for(var t,n,r={},i=e.split("&"),o=0,s=i.length;o<s;++o)-1==(n=(t=i[o]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function u(e){for(var t,n,r,i,o=e.split(/\r?\n/),s={},c=0,a=o.length;c<a;++c)-1!==(t=(n=o[c]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=S(n.slice(t+1)),s[r]=i);return s}function l(e){return/[\/+]json($|[^-\w])/.test(e)}function h(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function f(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,r=null;try{r=new h(n)}catch(r){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=r,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)})}function p(e,t,n){var r=b("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}var d;void 0!==s?d=s:"undefined"!=typeof self?d=self:(console.warn("Using browser-only version of superagent in non-browser environment"),d=this);var m=n(35),g=n(36),v=n(19),_=n(37),y=n(39),b=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=f,b.getXHR=function(){if(!(!d.XMLHttpRequest||d.location&&"file:"==d.location.protocol&&d.ActiveXObject))return new r;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var S="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=o,b.parseString=a,b.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},_(h.prototype),h.prototype._parseBody=function(e){var t=b.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&l(this.type)&&(t=b.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},h.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},b.Response=h,m(f.prototype),g(f.prototype),f.prototype.type=function(e){return this.set("Content-Type",b.types[e]||e),this},f.prototype.accept=function(e){return this.set("Accept",b.types[e]||e),this},f.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});return this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},f.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},f.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},f.prototype._getFormData=function(){return this._formData||(this._formData=new d.FormData),this._formData},f.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},f.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},f.prototype.buffer=f.prototype.ca=f.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},f.prototype.pipe=f.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},f.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},f.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||i,this._finalizeQueryString(),this._end()},f.prototype._end=function(){var e=this,t=this.xhr=b.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],o=this._serializer||b.serialize[i?i.split(";")[0]:""];!o&&l(i)&&(o=b.serialize["application/json"]),o&&(n=o(n))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&t.setRequestHeader(s,this.header[s]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},b.agent=function(){return new y},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){y.prototype[e.toLowerCase()]=function(t,n){var r=new b.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}}),y.prototype.del=y.prototype.delete,b.get=function(e,t,n){var r=b("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},b.head=function(e,t,n){var r=b("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},b.options=function(e,t,n){var r=b("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.del=p,b.delete=p,b.patch=function(e,t,n){var r=b("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.post=function(e,t,n){var r=b("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.put=function(e,t,n){var r=b("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){"use strict";var r=n(10),i=n(27),o=n(28),c=r.LISTENERS,a=r.CAPTURE,u=r.BUBBLE,l=r.ATTRIBUTE,h=r.newNode,f=i.defineCustomEventTarget,p=o.createEventWrapper,d=o.STOP_IMMEDIATE_PROPAGATION_FLAG,m=void 0!==s&&void 0!==s.EventTarget,g=e.exports=function e(){if(!(this instanceof e)){if(1===arguments.length&&Array.isArray(arguments[0]))return f(e,arguments[0]);if(arguments.length>0){for(var t=Array(arguments.length),n=0;n<arguments.length;++n)t[n]=arguments[n];return f(e,t)}throw new TypeError("Cannot call a class as a function")}Object.defineProperty(this,c,{value:Object.create(null)})};g.prototype=Object.create((m?s.EventTarget:Object).prototype,{constructor:{value:g,writable:!0,configurable:!0},addEventListener:{value:function(e,t,n){if(null==t)return!1;if("function"!=typeof t&&"object"!=typeof t)throw new TypeError('"listener" is not an object.');var r=n?a:u,i=this[c][e];if(null==i)return this[c][e]=h(t,r),!0;for(var o=null;null!=i;){if(i.listener===t&&i.kind===r)return!1;o=i,i=i.next}return o.next=h(t,r),!0},configurable:!0,writable:!0},removeEventListener:{value:function(e,t,n){if(null==t)return!1;for(var r=n?a:u,i=null,o=this[c][e];null!=o;){if(o.listener===t&&o.kind===r)return null==i?this[c][e]=o.next:i.next=o.next,!0;i=o,o=o.next}return!1},configurable:!0,writable:!0},dispatchEvent:{value:function(e){var t=this[c][e.type];if(null==t)return!0;for(var n=p(e,this);null!=t&&("function"==typeof t.listener?t.listener.call(this,n):t.kind!==l&&"function"==typeof t.listener.handleEvent&&t.listener.handleEvent(n),!n[d]);)t=t.next;return!n.defaultPrevented},configurable:!0,writable:!0}})},function(e,t,n){"use strict";var r=t.createUniqueKey="undefined"!=typeof Symbol?Symbol:function(e){return"[["+e+"_"+Math.random().toFixed(8).slice(2)+"]]"};t.LISTENERS=r("listeners"),t.CAPTURE=1,t.BUBBLE=2,t.ATTRIBUTE=3,t.newNode=function(e,t){return{listener:e,kind:t,next:null}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e),this._entries=[]}return o(e,[{key:"append",value:function(e,t){if("string"!=typeof e)throw new TypeError("FormData name must be a string");if("string"!=typeof t&&("object"!==(void 0===t?"undefined":i(t))||"string"!=typeof t.uri))throw new TypeError("FormData value must be a string or { uri: tempFilePath }");this._entries.push([e,t])}},{key:"set",value:function(e,t){var n=this.get(e);n?n[1]=t:this.append(e,t)}},{key:"delete",value:function(e){this._entries=this._entries.filter(function(t){return t[0]!==e})}},{key:"entries",value:function(){return this._entries}},{key:"get",value:function(e){return this._entries.find(function(t){return t[0]===e})}},{key:"getAll",value:function(e){return this._entries.filter(function(t){return t[0]===e})}},{key:"has",value:function(e){return this._entries.some(function(t){return t[0]===e})}},{key:"keys",value:function(){return this._entries.map(function(e){return e[0]})}},{key:"values",value:function(){return this._entries.map(function(e){return e[1]})}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"getItem",value:function(e){return wx.getStorageSync(e)}},{key:"setItem",value:function(e,t){return wx.setStorageSync(e,t)}},{key:"removeItem",value:function(e){return this.setItem(e,"")}},{key:"clear",value:function(){return wx.clearStorageSync()}}]),e}();e.exports=new o},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){this.status=e.statusCode,this.statusText=e.statusCode,e.header&&(this._responseHeaders=Object.keys(e.header).reduce(function(t,n){return t[n.toLowerCase()]=e.header[n],t},{}));var t=e.data;"string"!=typeof t&&(t=JSON.stringify(t)),this.responseText=this.response=t,this.readyState=p,this.dispatchEvent({type:"readystatechange"})}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(14),l=n(9),h=n(11),f=0,p=4,d=["abort","error","load","loadstart","progress","timeout","loadend","readystatechange"],m=["abort","error","load","loadstart","progress","timeout","loadend"],g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,l(m)),t}(),v=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.readyState=f,e._headers={},e.upload=new g,e}return s(t,l(d)),a(t,[{key:"abort",value:function(){if(!this._request||this._request.abort)return this.status=0,this.readyState=p,this._request.abort();throw new Error("\u8be5\u7248\u672c\u57fa\u7840\u5e93\u4e0d\u652f\u6301 abort request")}},{key:"getAllResponseHeaders",value:function(){var e=this;return this._responseHeaders?Object.keys(this._responseHeaders).map(function(t){return t+": "+e._responseHeaders[t]}).join("\r\n"):""}},{key:"getResponseHeader",value:function(e){var t=e.toLowerCase();return this._responseHeaders&&this._responseHeaders[t]?this._responseHeaders[t]:null}},{key:"overrideMimeType",value:function(){throw new Error("not supported in weapp")}},{key:"open",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.readyState!==f)throw new Error("request is already opened");if(!n)throw new Error("sync request is not supported");this._method=e,this._url=t,this.readyState=1,this.dispatchEvent({type:"readystatechange"})}},{key:"setRequestHeader",value:function(e,t){if(1!==this.readyState)throw new Error("request is not opened");this._headers[e.toLowerCase()]=t}},{key:"send",value:function(e){var t=this;if(1!==this.readyState)throw new Error("request is not opened");if(e instanceof h){var n=e.entries(),i=n.filter(function(e){return"string"!=typeof e[1]});if(0===i.length)throw new Error("Must specify a Blob field in FormData");i.length>1&&console.warn("Only the first Blob will be send in Weapp");var o=n.filter(function(e){return"string"==typeof e[1]}).reduce(function(e,t){return u(e,r({},t[0],t[1]))},{});this._request=wx.uploadFile({url:this._url,name:i[0][0],filePath:i[0][1].uri,formData:o,header:this._headers,success:c.bind(this),fail:function(e){t.status=0,t.readyState=p,t.dispatchEvent({type:"readystatechange"}),t.dispatchEvent({type:"error"})}}),this._request&&this._request.onProgressUpdate&&this._request.onProgressUpdate(function(e){var n=e.totalBytesSent,r=e.totalBytesExpectedToSend;t.upload.dispatchEvent({type:"progress",loaded:n,total:r})})}else this._request=wx.request({url:this._url,data:e||"",method:this._method.toUpperCase(),header:this._headers,success:c.bind(this),fail:function(e){t.status=0,t.readyState=p,t.dispatchEvent({type:"readystatechange"}),t.dispatchEvent({type:"error"})}})}}]),t}();u(v,{UNSENT:f,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:p}),e.exports=v},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,c,a=r(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))o.call(n,l)&&(a[l]=n[l]);if(i){c=i(n);for(var h=0;h<c.length;h++)s.call(n,c[h])&&(a[c[h]]=n[c[h]])}}return a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),a=n(9),u=0,l=1,h=3,f=["open","error","message","close"],p=function(e){function t(e,n){if(r(this,t),!e)throw new TypeError("Failed to construct 'WebSocket': url required");if(n&&(!wx.canIUse||!wx.canIUse("connectSocket.object.protocols")))throw new Error("subprotocal not supported in weapp");var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));o._url=e,o._protocal=n||"",o._readyState=u;var s=function(e){o._readyState=h,o.dispatchEvent({type:"error",message:e.errMsg})},c=wx.connectSocket({url:e,protocals:o._protocal,fail:function(e){return setTimeout(function(){return s(e)},0)}});return o._socketTask=c,c.onOpen(function(e){o._readyState=l,o.dispatchEvent({type:"open"})}),c.onError(s),c.onMessage(function(e){var t=e.data,n=e.origin,r=e.ports,i=e.source;o.dispatchEvent({data:t,origin:n,ports:r,source:i,type:"message"})}),c.onClose(function(e){o._readyState=h;var t=e.code,n=e.reason,r=e.wasClean;o.dispatchEvent({code:t,reason:n,wasClean:r,type:"close"})}),o}return o(t,a(f)),s(t,[{key:"close",value:function(){this.readyState!==h&&(this.readyState===u&&console.warn("close WebSocket which is connecting might not work"),this._socketTask.close())}},{key:"send",value:function(e){if(this.readyState!==l)throw new Error("INVALID_STATE_ERR");if(!("string"==typeof e||e instanceof ArrayBuffer))throw new TypeError("only String/ArrayBuffer supported");this._socketTask.send({data:e})}},{key:"url",get:function(){return this._url}},{key:"protocal",get:function(){return this._protocal}},{key:"readyState",get:function(){return this._readyState}}]),t}();c(p,{CONNECTING:u,OPEN:l,CLOSING:2,CLOSED:h}),e.exports=p},function(e,t,n){"use strict";e.exports={}},function(e,t,n){var r=n(31),i=n(32);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var c=0;c<16;++c)t[o+c]=s[c];return t||i(s)}},function(e,t,n){"use strict";e.exports="3.12.0"},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(44),s=["getItem","setItem","removeItem","clear"];o.async?r(s).each(function(e){"function"!=typeof o[e]&&(o[e]=function(){var t=new Error("Synchronous API ["+e+"] is not available in this runtime.");throw t.code="SYNC_API_NOT_AVAILABLE",t})}):r(s).each(function(e){"function"==typeof o[e]&&(o[e+"Async"]=function(){return i.resolve(o[e].apply(o,arguments))})}),e.exports=o},function(e,t,n){"use strict";var r=n(20),i=n(5),o=t.removeAsync=r.removeItemAsync.bind(r),s=function(e,t){try{e=JSON.parse(e)}catch(e){return null}return e?e.expiredAt&&e.expiredAt<Date.now()?o(t).then(function(){return null}):e.value:null};t.getAsync=function(e){return e="AV/"+i.applicationId+"/"+e,r.getItemAsync(e).then(function(t){return s(t,e)})},t.setAsync=function(e,t,n){var o={value:t};return"number"==typeof n&&(o.expiredAt=Date.now()+n),r.setItemAsync("AV/"+i.applicationId+"/"+e,JSON.stringify(o))}},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){"use strict";n(24);var r=n(0),i=n(5);i._=r,i.version=n(18),i.Promise=n(1),i.localStorage=n(20),i.Cache=n(21),i.Error=n(4),n(46),n(48)(i),n(49)(i),n(50)(i),n(51)(i),n(52)(i),n(53)(i),n(61)(i),n(62)(i),n(63)(i),n(64)(i),n(65)(i),n(67)(i),n(68)(i),n(69)(i),n(70)(i),n(71)(i),n(72)(i),i.Conversation=n(73),n(74),e.exports=i},function(e,t,n){"use strict";n(25)},function(e,t,n){"use strict";var c=n(26).polyfill;try{c()}catch(e){}try{c(GameGlobal)}catch(e){}try{c(s=s||{})}catch(e){}try{o=o||n(12)}catch(e){}try{r=r||n(13)}catch(e){}try{FormData=FormData||n(11)}catch(e){}try{WebSocket=WebSocket||n(15)}catch(e){}try{i=i||n(16)}catch(e){}},function(e,t,n){"use strict";(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(12),o=n(13),c=n(11),a=n(15),u=n(29),l=n(16);e.exports={polyfill:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t||s;if("object"!==(void 0===e?"undefined":r(e)))throw new Error("polyfill target is not an Object");var n={localStorage:i,XMLHttpRequest:o,FormData:c,WebSocket:a,Object:Object,navigator:l};for(var h in n)e[h]||(e[h]=n[h]);u.polyfill(e),e.navigator.product="ReactNative"},localStorage:i,XMLHttpRequest:o,FormData:c,WebSocket:a}}).call(t,n(6))},function(e,t,n){"use strict";function r(e,t){for(var n=e[s][t];null!=n;){if(n.kind===c)return n.listener;n=n.next}return null}function i(e,t,n){"function"!=typeof n&&"object"!=typeof n&&(n=null);for(var r=null,i=e[s][t];null!=i;)i.kind===c?null==r?e[s][t]=i.next:r.next=i.next:r=i,i=i.next;null!=n&&(null==r?e[s][t]=a(n,c):r.next=a(n,c))}var o=n(10),s=o.LISTENERS,c=o.ATTRIBUTE,a=o.newNode;t.defineCustomEventTarget=function(e,t){function n(){e.call(this)}var o={constructor:{value:n,configurable:!0,writable:!0}};return t.forEach(function(e){o["on"+e]={get:function(){return r(this,e)},set:function(t){i(this,e,t)},configurable:!0,enumerable:!0}}),n.prototype=Object.create(e.prototype,o),n}},function(e,t,n){"use strict";var r=n(10).createUniqueKey,i=r("stop_immediate_propagation_flag"),o=r("canceled_flag"),s=r("original_event"),c=Object.freeze({stopPropagation:Object.freeze({value:function(){var e=this[s];"function"==typeof e.stopPropagation&&e.stopPropagation()},writable:!0,configurable:!0}),stopImmediatePropagation:Object.freeze({value:function(){this[i]=!0;var e=this[s];"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()},writable:!0,configurable:!0}),preventDefault:Object.freeze({value:function(){!0===this.cancelable&&(this[o]=!0);var e=this[s];"function"==typeof e.preventDefault&&e.preventDefault()},writable:!0,configurable:!0}),defaultPrevented:Object.freeze({get:function(){return this[o]},enumerable:!0,configurable:!0})});t.STOP_IMMEDIATE_PROPAGATION_FLAG=i,t.createEventWrapper=function(e,t){var n="number"==typeof e.timeStamp?e.timeStamp:Date.now(),r={type:{value:e.type,enumerable:!0},target:{value:t,enumerable:!0},currentTarget:{value:t,enumerable:!0},eventPhase:{value:2,enumerable:!0},bubbles:{value:Boolean(e.bubbles),enumerable:!0},cancelable:{value:Boolean(e.cancelable),enumerable:!0},timeStamp:{value:n,enumerable:!0},isTrusted:{value:!1,enumerable:!0}};return r[i]={value:!1,writable:!0},r[o]={value:!1,writable:!0},r[s]={value:e},void 0!==e.detail&&(r.detail={value:e.detail,enumerable:!0}),Object.create(Object.create(e,c),r)}},function(e,t,n){"use strict";var r=n(9);t.polyfill=function(e){if(wx.onNetworkStatusChange&&!e.__onlineOfflinePolyfilled){e.__onlineOfflinePolyfilled=!0;var t=new r;e.dispatchEvent||(e.addEventListener=t.addEventListener.bind(t),e.removeEventListener=t.removeEventListener.bind(t),e.dispatchEvent=t.dispatchEvent.bind(t),"function"!=typeof postMessage||e.importScripts||(e.importScripts=function(){throw new Error("mocked")})),wx.getNetworkType({success:function(t){var n=t.networkType;e.onLine="none"!==n,wx.onNetworkStatusChange(function(t){var n=t.isConnected;e.onLine!==n&&(e.onLine=n,e.dispatchEvent({type:n?"online":"offline"}))})}})}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof s.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";var r=n(18),i=["Weapp"].concat(n(34));e.exports="LeanCloud-JS-SDK/"+r+" ("+i.join("; ")+")"},function(e,t,n){"use strict";e.exports=[]},function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}var o=n(19);e.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(e){return this._parser=e,this},r.prototype.responseType=function(e){return this._responseType=e,this},r.prototype.serialize=function(e){return this._serializer=e,this},r.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},r.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];r.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},r.prototype.catch=function(e){return this.then(void 0,e)},r.prototype.use=function(e){return e(this),this},r.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},r.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},r.prototype.get=function(e){return this._header[e.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(e,t){if(o(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},r.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},r.prototype.field=function(e,t){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),o(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var r in t)this.field(e,t[r]);return this}if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},r.prototype.withCredentials=function(e){return void 0==e&&(e=!0),this._withCredentials=e,this},r.prototype.redirects=function(e){return this._maxRedirects=e,this},r.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(e){var t=o(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&o(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},r.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},r.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},r.prototype._appendQueryString=function(){console.trace("Unsupported")},r.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e,t,n){"use strict";function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}var o=n(38);e.exports=r,r.prototype.get=function(e){return this.header[e.toLowerCase()]},r.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=o.type(t);var n=o.params(t);for(var r in n)this[r]=n[r];this.links={};try{e.link&&(this.links=o.parseLinks(e.link))}catch(e){}},r.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),n.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=n},function(e,t,n){"use strict";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){function n(){if(n.enabled){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=n,c=Number(new Date),a=c-(s||c);o.diff=a,o.prev=s,o.curr=c,s=c,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;u++;var i=r.formatters[n];if("function"==typeof i){var s=t[u];e=i.call(o,s),t.splice(u,1),u--}return e}),r.formatArgs.call(o,t),(o.log||r.log).apply(o,t)}}var s;return n.namespace=e,n.enabled=r.enabled(e),n.useColors=r.useColors(),n.color=t(e),n.destroy=i,n.extend=o,"function"==typeof r.init&&r.init(n),r.instances.push(n),n}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){r.save(e),r.names=[],r.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(41),Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){function n(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"weeks":case"week":case"w":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*c;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){var t=Math.abs(e);return t>=u?Math.round(e/u)+"d":t>=a?Math.round(e/a)+"h":t>=c?Math.round(e/c)+"m":t>=s?Math.round(e/s)+"s":e+"ms"}function i(e){var t=Math.abs(e);return t>=u?o(e,t,u,"day"):t>=a?o(e,t,a,"hour"):t>=c?o(e,t,c,"minute"):t>=s?o(e,t,s,"second"):e+" ms"}function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}var s=1e3,c=60*s,a=60*c,u=24*a,l=7*u,h=365.25*u;e.exports=function(e,t){t=t||{};var o=typeof e;if("string"===o&&e.length>0)return n(e);if("number"===o&&!1===isNaN(e))return t.long?i(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(t,n,r){(function(n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function i(e){return"function"==typeof e}function o(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<C;e+=2)(0,U[e])(U[e+1]),U[e]=void 0,U[e+1]=void 0;C=0}function a(e,t){var n=this,r=new this.constructor(l);void 0===r[H]&&w(r);var i=n._state;if(i){var o=arguments[i-1];N(function(){return k(i,r,o,n._result)})}else b(n,r,e,t);return r}function u(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(l);return g(t,e),t}function l(){}function h(e){try{return e.then}catch(e){return G.error=e,G}}function f(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function p(e,t,n){N(function(e){var r=!1,i=f(n,t,function(n){r||(r=!0,t!==n?g(e,n):_(e,n))},function(t){r||(r=!0,y(e,t))},e._label);!r&&i&&(r=!0,y(e,i))},e)}function d(e,t){t._state===q?_(e,t._result):t._state===W?y(e,t._result):b(t,void 0,function(t){return g(e,t)},function(t){return y(e,t)})}function m(e,t,n){t.constructor===e.constructor&&n===a&&t.constructor.resolve===u?d(e,t):n===G?(y(e,G.error),G.error=null):void 0===n?_(e,t):i(n)?p(e,t,n):_(e,t)}function g(e,n){e===n?y(e,new TypeError("You cannot resolve a promise with itself")):t(n)?m(e,n,h(n)):_(e,n)}function v(e){e._onerror&&e._onerror(e._result),S(e)}function _(e,t){e._state===B&&(e._result=t,e._state=q,0!==e._subscribers.length&&N(S,e))}function y(e,t){e._state===B&&(e._state=W,e._result=t,N(v,e))}function b(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+q]=n,i[o+W]=r,0===o&&e._state&&N(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?k(n,r,i,o):i(o);e._subscribers.length=0}}function E(e,t){try{return e(t)}catch(e){return G.error=e,G}}function k(e,t,n,r){var o=i(n),s=void 0,c=void 0,a=void 0,u=void 0;if(o){if((s=E(n,r))===G?(u=!0,c=s.error,s.error=null):a=!0,t===s)return void y(t,new TypeError("A promises callback cannot return that same promise."))}else s=r,a=!0;t._state!==B||(o&&a?g(t,s):u?y(t,c):e===q?_(t,s):e===W&&y(t,s))}function T(e,t){try{t(function(t){g(e,t)},function(t){y(e,t)})}catch(t){y(e,t)}}function w(e){e[H]=K++,e._state=void 0,e._result=void 0,e._subscribers=[]}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function A(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var I=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},C=0,x=void 0,O=void 0,N=function(e,t){U[C]=e,U[C+1]=t,2===(C+=2)&&(O?O(c):j())},P=void 0!==s?s:void 0,L=P||{},M=L.MutationObserver||L.WebKitMutationObserver,D="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),F="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,U=new Array(1e3),j=void 0;j=D?function(){return e.nextTick(c)}:M?function(){var e=0,t=new M(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():F?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===P?function(){try{var e=r(43);return void 0!==(x=e.runOnLoop||e.runOnContext)?function(){x(c)}:o()}catch(e){return o()}}():o();var H=Math.random().toString(36).substring(2),B=void 0,q=1,W=2,G={error:null},K=0,z=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(l),this.promise[H]||w(this.promise),I(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&_(this.promise,this._result))):y(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===B&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===u){var i=h(e);if(i===a&&e._state!==B)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===J){var o=new n(l);m(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===B&&(this._remaining--,e===W?y(r,n):this._result[t]=n),0===this._remaining&&_(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;b(e,void 0,function(e){return n._settledAt(q,t,e)},function(e){return n._settledAt(W,t,e)})},e}(),J=function(){function e(t){this[H]=K++,this._result=this._state=void 0,this._subscribers=[],l!==t&&("function"!=typeof t&&R(),this instanceof e?T(this,t):A())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},e}();return J.prototype.then=a,J.all=function(e){return new z(this,e).promise},J.race=function(e){var t=this;return new t(I(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},J.resolve=u,J.reject=function(e){var t=new this(l);return y(t,e),t},J._setScheduler=function(e){O=e},J._setAsap=function(e){N=e},J._asap=N,J.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=J},J.Promise=J,J})}).call(n,r(6))},function(e,t){},function(e,t,n){"use strict";(function(t){var r=n(0),i={},o=t.localStorage;try{var s="__storejs__";if(o.setItem(s,s),o.getItem(s)!=s)throw new Error;o.removeItem(s)}catch(e){o=n(45)}r(["getItem","setItem","removeItem","clear"]).each(function(e){i[e]=function(){return o[e].apply(o,arguments)}}),i.async=!1,e.exports=i}).call(t,n(6))},function(e,t,n){!function(t){var n={},r={};n.length=0,n.getItem=function(e){return e in r?r[e]:null},n.setItem=function(e,t){void 0===t?n.removeItem(e):(r.hasOwnProperty(e)||n.length++,r[e]=""+t)},n.removeItem=function(e){r.hasOwnProperty(e)&&(delete r[e],n.length--)},n.key=function(e){return Object.keys(r)[e]||null},n.clear=function(){r={},n.length=0},e.exports=n}()},function(e,t,n){"use strict";function r(e){var t=void 0,n=e.slice(0,8).toLowerCase();switch(e.slice(-9)){case"-9Nh9j0Va":t="lncldapi.com";break;case"-MdYXbMMI":t="lncldglobal.com";break;default:t="lncld.net"}return{push:"https://"+n+".push."+t,stats:"https://"+n+".stats."+t,engine:"https://"+n+".engine."+t,api:"https://"+n+".api."+t}}var i=n(5),o=n(47),s=n(3).isNullOrUndefined,c=n(0),a=c.extend,u=c.isObject,l=function(e){return{push:e,stats:e,engine:e,api:e}},h=!1;i.init=function(e){if(!u(e))return i.init({appId:e,appKey:arguments.length<=1?void 0:arguments[1],masterKey:arguments.length<=2?void 0:arguments[2]});var t=e.appId,n=e.appKey,s=e.masterKey,c=(e.hookKey,e.serverURLs),f=e.disableCurrentUser,p=e.production,d=e.realtime;if(i.applicationId)throw new Error("SDK is already initialized.");if(!t)throw new TypeError("appId must be a string");if(!n)throw new TypeError("appKey must be a string");s&&console.warn("MasterKey is not supposed to be used in browser."),i._config.applicationId=t,i._config.applicationKey=n,i._config.masterKey=s,void 0!==p&&(i._config.production=p),void 0!==f&&(i._config.disableCurrentUser=f),i._appRouter=new o(i);var m=h||void 0!==c;i._setServerURLs(a({},r(t),i._config.serverURLs,"string"==typeof c?l(c):c),m),d?i._config.realtime=d:i._sharedConfig.liveQueryRealtime&&(i._config.realtime=new i._sharedConfig.liveQueryRealtime({appId:t,appKey:n}))},i.setProduction=function(e){s(e)?i._config.production=null:i._config.production=e?1:0},i._setServerURLs=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"string"!=typeof e?a(i._config.serverURLs,e):i._config.serverURLs=l(e),t&&(i._appRouter?i._appRouter.disable():h=!0)},i.setServerURLs=function(e){return i._setServerURLs(e)},i.keepErrorRawMessage=function(e){i._sharedConfig.keepErrorRawMessage=e},i.setRequestTimeout=function(e){i._config.requestTimeout=e},i.initialize=i.init,["applicationId","applicationKey","masterKey","hookKey"].forEach(function(e){return Object.defineProperty(i,e,{get:function(){return i._config[e]},set:function(t){i._config[e]=t}})})},function(e,t,n){"use strict";function r(e){var t=this;this.AV=e,this.lockedUntil=0,o.getAsync("serverURLs").then(function(e){if(!t.disabled){if(!e)return t.lock(0);var n=e.serverURLs,r=e.lockedUntil;t.AV._setServerURLs(n,!1),t.lockedUntil=r}}).catch(function(){return t.lock(0)})}var i=n(3).ajax,o=n(21);r.prototype.disable=function(){this.disabled=!0},r.prototype.lock=function(e){this.lockedUntil=Date.now()+e},r.prototype.refresh=function(){var e=this;if(!(this.disabled||Date.now()<this.lockedUntil))return this.lock(10),i({method:"get",url:"https://app-router.leancloud.cn/2/route",query:{appId:this.AV.applicationId}}).then(function(t){if(!e.disabled){var n=t.ttl;if(!n)throw new Error("missing ttl");n*=1e3;var r={push:"https://"+t.push_server,stats:"https://"+t.stats_server,engine:"https://"+t.engine_server,api:"https://"+t.api_server};return e.AV._setServerURLs(r,!1),e.lock(n),o.setAsync("serverURLs",{serverURLs:r,lockedUntil:e.lockedUntil},n)}}).catch(function(t){console.warn("refresh server URLs failed: "+t.message),e.lock(600)})},e.exports=r},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){var t=/\s+/,n=Array.prototype.slice;e.Events={on:function(e,n,r){var i,o,s,c,a;if(!n)return this;for(e=e.split(t),i=this._callbacks||(this._callbacks={}),o=e.shift();o;)(s=(a=i[o])?a.tail:{}).next=c={},s.context=r,s.callback=n,i[o]={tail:c,next:a?a.next:s},o=e.shift();return this},off:function(e,n,i){var o,s,c,a,u,l;if(s=this._callbacks){if(!(e||n||i))return delete this._callbacks,this;for(o=(e=e?e.split(t):r.keys(s)).shift();o;)if(c=s[o],delete s[o],c&&(n||i)){for(a=c.tail,c=c.next;c!==a;)u=c.callback,l=c.context,(n&&u!==n||i&&l!==i)&&this.on(o,u,l),c=c.next;o=e.shift()}return this}},trigger:function(e){var r,i,o,s,c,a,u;if(!(o=this._callbacks))return this;for(a=o.all,e=e.split(t),u=n.call(arguments,1),r=e.shift();r;){if(i=o[r])for(s=i.tail;(i=i.next)!==s;)i.callback.apply(i.context||this,u);if(i=a)for(s=i.tail,c=[r].concat(u);(i=i.next)!==s;)i.callback.apply(i.context||this,c);r=e.shift()}return this}},e.Events.bind=e.Events.on,e.Events.unbind=e.Events.off}},function(e,t,n){"use strict";var r=n(0),o=n(1);e.exports=function(e){e.GeoPoint=function(t,n){r.isArray(t)?(e.GeoPoint._validate(t[0],t[1]),this.latitude=t[0],this.longitude=t[1]):r.isObject(t)?(e.GeoPoint._validate(t.latitude,t.longitude),this.latitude=t.latitude,this.longitude=t.longitude):r.isNumber(t)&&r.isNumber(n)?(e.GeoPoint._validate(t,n),this.latitude=t,this.longitude=n):(this.latitude=0,this.longitude=0);var i=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return i._latitude}),this.__defineGetter__("longitude",function(){return i._longitude}),this.__defineSetter__("latitude",function(t){e.GeoPoint._validate(t,i.longitude),i._latitude=t}),this.__defineSetter__("longitude",function(t){e.GeoPoint._validate(i.latitude,t),i._longitude=t}))},e.GeoPoint._validate=function(e,t){if(e<-90)throw new Error("AV.GeoPoint latitude "+e+" < -90.0.");if(e>90)throw new Error("AV.GeoPoint latitude "+e+" > 90.0.");if(t<-180)throw new Error("AV.GeoPoint longitude "+t+" < -180.0.");if(t>180)throw new Error("AV.GeoPoint longitude "+t+" > 180.0.")},e.GeoPoint.current=function(){return new o(function(t,n){i.geolocation.getCurrentPosition(function(n){t(new e.GeoPoint({latitude:n.coords.latitude,longitude:n.coords.longitude}))},n)})},r.extend(e.GeoPoint.prototype,{toJSON:function(){return e.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(e){var t=Math.PI/180,n=this.latitude*t,r=this.longitude*t,i=e.latitude*t,o=n-i,s=r-e.longitude*t,c=Math.sin(o/2),a=Math.sin(s/2),u=c*c+Math.cos(n)*Math.cos(i)*a*a;return u=Math.min(1,u),2*Math.asin(Math.sqrt(u))},kilometersTo:function(e){return 6371*this.radiansTo(e)},milesTo:function(e){return 3958.8*this.radiansTo(e)}})}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){e.ACL=function(t){var n=this;if(n.permissionsById={},r.isObject(t))if(t instanceof e.User)n.setReadAccess(t,!0),n.setWriteAccess(t,!0);else{if(r.isFunction(t))throw new Error("AV.ACL() called with a function.  Did you forget ()?");e._objectEach(t,function(t,i){if(!r.isString(i))throw new Error("Tried to create an ACL with an invalid userId.");n.permissionsById[i]={},e._objectEach(t,function(e,t){if("read"!==t&&"write"!==t)throw new Error("Tried to create an ACL with an invalid permission type.");if(!r.isBoolean(e))throw new Error("Tried to create an ACL with an invalid permission value.");n.permissionsById[i][t]=e})})}},e.ACL.prototype.toJSON=function(){return r.clone(this.permissionsById)},e.ACL.prototype._setAccess=function(t,n,i){if(n instanceof e.User?n=n.id:n instanceof e.Role&&(n="role:"+n.getName()),!r.isString(n))throw new Error("userId must be a string.");if(!r.isBoolean(i))throw new Error("allowed must be either true or false.");var o=this.permissionsById[n];if(!o){if(!i)return;o={},this.permissionsById[n]=o}i?this.permissionsById[n][t]=!0:(delete o[t],r.isEmpty(o)&&delete this.permissionsById[n])},e.ACL.prototype._getAccess=function(t,n){n instanceof e.User?n=n.id:n instanceof e.Role&&(n="role:"+n.getName());var r=this.permissionsById[n];return!!r&&!!r[t]},e.ACL.prototype.setReadAccess=function(e,t){this._setAccess("read",e,t)},e.ACL.prototype.getReadAccess=function(e){return this._getAccess("read",e)},e.ACL.prototype.setWriteAccess=function(e,t){this._setAccess("write",e,t)},e.ACL.prototype.getWriteAccess=function(e){return this._getAccess("write",e)},e.ACL.prototype.setPublicReadAccess=function(e){this.setReadAccess("*",e)},e.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess("*")},e.ACL.prototype.setPublicWriteAccess=function(e){this.setWriteAccess("*",e)},e.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess("*")},e.ACL.prototype.getRoleReadAccess=function(t){if(t instanceof e.Role&&(t=t.getName()),r.isString(t))return this.getReadAccess("role:"+t);throw new Error("role must be a AV.Role or a String")},e.ACL.prototype.getRoleWriteAccess=function(t){if(t instanceof e.Role&&(t=t.getName()),r.isString(t))return this.getWriteAccess("role:"+t);throw new Error("role must be a AV.Role or a String")},e.ACL.prototype.setRoleReadAccess=function(t,n){if(t instanceof e.Role&&(t=t.getName()),!r.isString(t))throw new Error("role must be a AV.Role or a String");this.setReadAccess("role:"+t,n)},e.ACL.prototype.setRoleWriteAccess=function(t,n){if(t instanceof e.Role&&(t=t.getName()),!r.isString(t))throw new Error("role must be a AV.Role or a String");this.setWriteAccess("role:"+t,n)}}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){e.Op=function(){this._initialize.apply(this,arguments)},r.extend(e.Op.prototype,{_initialize:function(){}}),r.extend(e.Op,{_extend:e._extend,_opDecoderMap:{},_registerDecoder:function(t,n){e.Op._opDecoderMap[t]=n},_decode:function(t){var n=e.Op._opDecoderMap[t.__op];return n?n(t):void 0}}),e.Op._registerDecoder("Batch",function(t){var n=null;return e._arrayEach(t.ops,function(t){t=e.Op._decode(t),n=t._mergeWithPrevious(n)}),n}),e.Op.Set=e.Op._extend({_initialize:function(e){this._value=e},value:function(){return this._value},toJSON:function(){return e._encode(this.value())},_mergeWithPrevious:function(e){return this},_estimate:function(e){return this.value()}}),e.Op._UNSET={},e.Op.Unset=e.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(e){return this},_estimate:function(t){return e.Op._UNSET}}),e.Op._registerDecoder("Delete",function(t){return new e.Op.Unset}),e.Op.Increment=e.Op._extend({_initialize:function(e){this._amount=e},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.amount());if(t instanceof e.Op.Set)return new e.Op.Set(t.value()+this.amount());if(t instanceof e.Op.Increment)return new e.Op.Increment(this.amount()+t.amount());throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e){return e?e+this.amount():this.amount()}}),e.Op._registerDecoder("Increment",function(t){return new e.Op.Increment(t.amount)}),e.Op.BitAnd=e.Op._extend({_initialize:function(e){this._value=e},value:function(){return this._value},toJSON:function(){return{__op:"BitAnd",value:this.value()}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(0);if(t instanceof e.Op.Set)return new e.Op.Set(t.value()&this.value());throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e){return e&this.value()}}),e.Op._registerDecoder("BitAnd",function(t){return new e.Op.BitAnd(t.value)}),e.Op.BitOr=e.Op._extend({_initialize:function(e){this._value=e},value:function(){return this._value},toJSON:function(){return{__op:"BitOr",value:this.value()}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.value());if(t instanceof e.Op.Set)return new e.Op.Set(t.value()|this.value());throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e){return e|this.value()}}),e.Op._registerDecoder("BitOr",function(t){return new e.Op.BitOr(t.value)}),e.Op.BitXor=e.Op._extend({_initialize:function(e){this._value=e},value:function(){return this._value},toJSON:function(){return{__op:"BitXor",value:this.value()}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.value());if(t instanceof e.Op.Set)return new e.Op.Set(t.value()^this.value());throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e){return e^this.value()}}),e.Op._registerDecoder("BitXor",function(t){return new e.Op.BitXor(t.value)}),e.Op.Add=e.Op._extend({_initialize:function(e){this._objects=e},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:e._encode(this.objects())}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.objects());if(t instanceof e.Op.Set)return new e.Op.Set(this._estimate(t.value()));if(t instanceof e.Op.Add)return new e.Op.Add(t.objects().concat(this.objects()));throw new Error("Op is invalid after previous op.")}return this},_estimate:function(e){return e?e.concat(this.objects()):r.clone(this.objects())}}),e.Op._registerDecoder("Add",function(t){return new e.Op.Add(e._decode(t.objects))}),e.Op.AddUnique=e.Op._extend({_initialize:function(e){this._objects=r.uniq(e)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:e._encode(this.objects())}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return new e.Op.Set(this.objects());if(t instanceof e.Op.Set)return new e.Op.Set(this._estimate(t.value()));if(t instanceof e.Op.AddUnique)return new e.Op.AddUnique(this._estimate(t.objects()));throw new Error("Op is invalid after previous op.")}return this},_estimate:function(t){if(t){var n=r.clone(t);return e._arrayEach(this.objects(),function(t){if(t instanceof e.Object&&t.id){var i=r.find(n,function(n){return n instanceof e.Object&&n.id===t.id});if(i){var o=r.indexOf(n,i);n[o]=t}else n.push(t)}else r.contains(n,t)||n.push(t)}),n}return r.clone(this.objects())}}),e.Op._registerDecoder("AddUnique",function(t){return new e.Op.AddUnique(e._decode(t.objects))}),e.Op.Remove=e.Op._extend({_initialize:function(e){this._objects=r.uniq(e)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:e._encode(this.objects())}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)return t;if(t instanceof e.Op.Set)return new e.Op.Set(this._estimate(t.value()));if(t instanceof e.Op.Remove)return new e.Op.Remove(r.union(t.objects(),this.objects()));throw new Error("Op is invalid after previous op.")}return this},_estimate:function(t){if(t){var n=r.difference(t,this.objects());return e._arrayEach(this.objects(),function(t){t instanceof e.Object&&t.id&&(n=r.reject(n,function(n){return n instanceof e.Object&&n.id===t.id}))}),n}return[]}}),e.Op._registerDecoder("Remove",function(t){return new e.Op.Remove(e._decode(t.objects))}),e.Op.Relation=e.Op._extend({_initialize:function(t,n){this._targetClassName=null;var i=this,o=function(t){if(t instanceof e.Object){if(!t.id)throw new Error("You can't add an unsaved AV.Object to a relation.");if(i._targetClassName||(i._targetClassName=t.className),i._targetClassName!==t.className)throw new Error("Tried to create a AV.Relation with 2 different types: "+i._targetClassName+" and "+t.className+".");return t.id}return t};this.relationsToAdd=r.uniq(r.map(t,o)),this.relationsToRemove=r.uniq(r.map(n,o))},added:function(){var t=this;return r.map(this.relationsToAdd,function(n){var r=e.Object._create(t._targetClassName);return r.id=n,r})},removed:function(){var t=this;return r.map(this.relationsToRemove,function(n){var r=e.Object._create(t._targetClassName);return r.id=n,r})},toJSON:function(){var e=null,t=null,n=this,i=function(e){return{__type:"Pointer",className:n._targetClassName,objectId:e}};return this.relationsToAdd.length>0&&(e={__op:"AddRelation",objects:r.map(this.relationsToAdd,i)}),this.relationsToRemove.length>0&&(t={__op:"RemoveRelation",objects:r.map(this.relationsToRemove,i)}),e&&t?{__op:"Batch",ops:[e,t]}:e||t||{}},_mergeWithPrevious:function(t){if(t){if(t instanceof e.Op.Unset)throw new Error("You can't modify a relation after deleting it.");if(t instanceof e.Op.Relation){if(t._targetClassName&&t._targetClassName!==this._targetClassName)throw new Error("Related object must be of class "+t._targetClassName+", but "+this._targetClassName+" was passed in.");var n=r.union(r.difference(t.relationsToAdd,this.relationsToRemove),this.relationsToAdd),i=r.union(r.difference(t.relationsToRemove,this.relationsToAdd),this.relationsToRemove),o=new e.Op.Relation(n,i);return o._targetClassName=this._targetClassName,o}throw new Error("Op is invalid after previous op.")}return this},_estimate:function(t,n,r){if(t){if(t instanceof e.Relation){if(this._targetClassName)if(t.targetClassName){if(t.targetClassName!==this._targetClassName)throw new Error("Related object must be a "+t.targetClassName+", but a "+this._targetClassName+" was passed in.")}else t.targetClassName=this._targetClassName;return t}throw new Error("Op is invalid after previous op.")}new e.Relation(n,r).targetClassName=this._targetClassName}}),e.Op._registerDecoder("AddRelation",function(t){return new e.Op.Relation(e._decode(t.objects),[])}),e.Op._registerDecoder("RemoveRelation",function(t){return new e.Op.Relation([],e._decode(t.objects))})}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){e.Relation=function(e,t){if(!r.isString(t))throw new TypeError("key must be a string");this.parent=e,this.key=t,this.targetClassName=null},e.Relation.reverseQuery=function(t,n,r){var i=new e.Query(t);return i.equalTo(n,r._toPointer()),i},r.extend(e.Relation.prototype,{_ensureParentAndKey:function(e,t){if(this.parent=this.parent||e,this.key=this.key||t,this.parent!==e)throw new Error("Internal Error. Relation retrieved from two different Objects.");if(this.key!==t)throw new Error("Internal Error. Relation retrieved from two different keys.")},add:function(t){r.isArray(t)||(t=[t]);var n=new e.Op.Relation(t,[]);this.parent.set(this.key,n),this.targetClassName=n._targetClassName},remove:function(t){r.isArray(t)||(t=[t]);var n=new e.Op.Relation([],t);this.parent.set(this.key,n),this.targetClassName=n._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var t,n;return this.targetClassName?(t=e.Object._getSubclass(this.targetClassName),n=new e.Query(t)):(t=e.Object._getSubclass(this.parent.className),(n=new e.Query(t))._extraOptions.redirectClassNameForKey=this.key),n._addCondition("$relatedTo","object",this.parent._toPointer()),n._addCondition("$relatedTo","key",this.key),n}})}},function(e,t,n){"use strict";var r=n(0),i=n(54),o=n(55),s=n(56),c=n(4),a=n(2)._request,u=n(1),l=n(3),h=l.tap,f=l.transformFetchOptions,p=n(7)("leancloud:file"),d=n(60);e.exports=function(e){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},n=function(e){return r.isString(e)?e.match(/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/)[4]:""},l=function(e){if(e<26)return String.fromCharCode(65+e);if(e<52)return String.fromCharCode(e-26+97);if(e<62)return String.fromCharCode(e-52+48);if(62===e)return"+";if(63===e)return"/";throw new Error("Tried to encode large digit "+e+" in base64.")},m=function(e){var t=[];return t.length=Math.ceil(e.length/3),r.times(t.length,function(n){var r=e[3*n],i=e[3*n+1]||0,o=e[3*n+2]||0,s=3*n+1<e.length,c=3*n+2<e.length;t[n]=[l(r>>2&63),l(r<<4&48|i>>4&15),s?l(i<<2&60|o>>6&3):"=",c?l(63&o):"="].join("")}),t.join("")};e.File=function(t,i,o){if(this.attributes={name:t,url:"",metaData:{},base64:""},r.isString(i))throw new TypeError("Creating an AV.File from a String is not yet supported.");r.isArray(i)&&(this.attributes.metaData.size=i.length,i={base64:m(i)}),this._extName="",this._data=i,this._uploadHeaders={},i&&i.blob&&(this._extName=n(i.blob.uri)),"undefined"!=typeof Blob&&i instanceof Blob&&(i.size&&(this.attributes.metaData.size=i.size),i.name&&(this._extName=n(i.name)));var s=void 0;if(i&&i.owner)s=i.owner;else if(!e._config.disableCurrentUser)try{s=e.User.current()}catch(e){if("SYNC_API_NOT_AVAILABLE"!==e.code)throw e}this.attributes.metaData.owner=s?s.id:"unknown",this.set("mime_type",o)},e.File.withURL=function(t,n,r,i){if(!t||!n)throw new Error("Please provide file name and url");var o=new e.File(t,null,i);if(r)for(var s in r)o.attributes.metaData[s]||(o.attributes.metaData[s]=r[s]);return o.attributes.url=n,o.attributes.metaData.__source="external",o},e.File.createWithoutData=function(t){var n=new e.File;return n.id=t,n},r.extend(e.File.prototype,{className:"_File",_toFullJSON:function(t){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=r.clone(this.attributes);return e._objectEach(o,function(n,r){o[r]=e._encode(n,t,void 0,i)}),e._objectEach(this._operations,function(e,t){o[t]=e}),r.has(this,"id")&&(o.objectId=this.id),r(["createdAt","updatedAt"]).each(function(e){if(r.has(n,e)){var t=n[e];o[e]=r.isDate(t)?t.toJSON():t}}),i&&(o.__type="File"),o},toFullJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this._toFullJSON(e)},toJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[this];return this._toFullJSON(n,!1)},_toPointer:function(){return{__type:"Pointer",className:this.className,objectId:this.id}},getACL:function(){return this._acl},setACL:function(t){if(!(t instanceof e.ACL))return new c(c.OTHER_CAUSE,"ACL must be a AV.ACL.");this._acl=t},name:function(){return this.get("name")},url:function(){return this.get("url")},get:function(e){switch(e){case"objectId":return this.id;case"url":case"name":case"mime_type":case"metaData":case"createdAt":case"updatedAt":return this.attributes[e];default:return this.attributes.metaData[e]}},set:function(){for(var e=this,t=function(t,n){switch(t){case"name":case"url":case"mime_type":case"base64":case"metaData":e.attributes[t]=n;break;default:e.attributes.metaData[t]=n}},n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];switch(r.length){case 1:for(var o in r[0])t(o,r[0][o]);break;case 2:t(r[0],r[1])}},setUploadHeader:function(e,t){return this._uploadHeaders[e]=t,this},metaData:function(e,t){return e&&t?(this.attributes.metaData[e]=t,this):e&&!t?this.attributes.metaData[e]:this.attributes.metaData},thumbnailURL:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"png",o=this.attributes.url;if(!o)throw new Error("Invalid url.");if(!e||!t||e<=0||t<=0)throw new Error("Invalid width or height value.");if(n<=0||n>100)throw new Error("Invalid quality value.");return o+"?imageView/"+(r?2:1)+"/w/"+e+"/h/"+t+"/q/"+n+"/format/"+i},size:function(){return this.metaData().size},ownerId:function(){return this.metaData().owner},destroy:function(e){return this.id?a("files",null,this.id,"DELETE",null,e):u.reject(new Error("The file id does not eixst."))},_fileToken:function(e,r){var i=this.attributes.name,o=n(i);!o&&this._extName&&(i+=this._extName,o=this._extName);var s=t()+t()+t()+t()+t()+o,c={key:s,name:i,keep_file_name:r.keepFileName,ACL:this._acl,mime_type:e,metaData:this.attributes.metaData};return this._qiniu_key=s,a("fileTokens",null,null,"POST",c,r)},save:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.id)throw new Error("File is already saved.");if(!this._previousSave)if(this._data){var n=this.get("mime_type");this._previousSave=this._fileToken(n,t).then(function(c){return c.mime_type&&(n=c.mime_type,e.set("mime_type",n)),e._token=c.token,u.resolve().then(function(){var t=e._data;if(t&&t.base64)return d(t.base64,n);if(t&&t.blob)return!t.blob.type&&n&&(t.blob.type=n),t.blob.name||(t.blob.name=e.get("name")),t.blob;if("undefined"!=typeof Blob&&t instanceof Blob)return t;throw new TypeError("malformed file data")}).then(function(n){var a=r.extend({},t);switch(t.onprogress&&(a.onprogress=function(e){if("download"!==e.direction)return t.onprogress(e)}),c.provider){case"s3":return s(c,n,e,a);case"qcloud":return i(c,n,e,a);case"qiniu":default:return o(c,n,e,a)}}).then(h(function(){return e._callback(!0)}),function(t){throw e._callback(!1),t})})}else if(this.attributes.url&&"external"===this.attributes.metaData.__source){var c={name:this.attributes.name,ACL:this._acl,metaData:this.attributes.metaData,mime_type:this.mimeType,url:this.attributes.url};this._previousSave=a("files",this.attributes.name,null,"post",c,t).then(function(t){return e.attributes.name=t.name,e.attributes.url=t.url,e.id=t.objectId,t.size&&(e.attributes.metaData.size=t.size),e})}return this._previousSave},_callback:function(e){a("fileCallback",null,null,"post",{token:this._token,result:e}).catch(p),delete this._token,delete this._data},fetch:function(e,t){return a("files",null,this.id,"GET",f(e),t).then(this._finishFetch.bind(this))},_finishFetch:function(t){var n=e.Object.prototype.parse(t);return n.attributes={name:n.name,url:n.url,mime_type:n.mime_type,bucket:n.bucket},n.attributes.metaData=n.metaData||{},n.id=n.objectId,delete n.objectId,delete n.metaData,delete n.url,delete n.name,delete n.mime_type,delete n.bucket,r.extend(this,n),this}})}},function(e,t,n){"use strict";var r=n(8),i=n(7)("cos"),o=n(1);e.exports=function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n.attributes.url=e.url,n._bucket=e.bucket,n.id=e.objectId;var c=e.upload_url+"?sign="+encodeURIComponent(e.token);return new o(function(e,o){var a=r("POST",c).set(n._uploadHeaders).attach("fileContent",t,n.attributes.name).field("op","upload");s.onprogress&&a.on("progress",s.onprogress),a.end(function(t,r){if(r&&i(r.status,r.body,r.text),t)return r&&(t.statusCode=r.status,t.responseText=r.text,t.response=r.body),o(t);e(n)})})}},function(e,t,n){"use strict";var r=n(8),i=n(1),o=n(7)("qiniu");e.exports=function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n.attributes.url=e.url,n._bucket=e.bucket,n.id=e.objectId;var c=e.token,a=e.upload_url||"https://upload.qiniup.com";return new i(function(i,u){var l=r("POST",a).set(n._uploadHeaders).attach("file",t,n.attributes.name).field("name",n.attributes.name).field("key",e.key||n._qiniu_key).field("token",c);s.onprogress&&l.on("progress",s.onprogress),l.end(function(e,t){if(t&&o(t.status,t.body,t.text),e)return t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),u(e);i(n)})})}},function(e,t,n){"use strict";var r=n(8),i=n(1),o=function(e,t){return t&&(e.statusCode=t.status,e.responseText=t.text,e.response=t.body),e};e.exports=function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.attributes.url=e.url,n._bucket=e.bucket,n.id=e.objectId,new i(function(i,c){var a=r("PUT",e.upload_url).set(Object.assign({"Content-Type":n.get("mime_type"),"Cache-Control":"public, max-age=31536000"},n._uploadHeaders));s.onprogress&&a.on("progress",s.onprogress),a.on("response",function(e){if(e.ok)return i(n);c(o(e.error,e))}),a.on("error",function(e,t){return c(o(e,t))}),a.send(t).end()})}},function(e,t,n){!function(){var t=n(58),r=n(22).utf8,i=n(59),o=n(22).bin,s=function(e,n){e.constructor==String?e=n&&"binary"===n.encoding?o.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var c=t.bytesToWords(e),a=8*e.length,u=1732584193,l=-271733879,h=-1732584194,f=271733878,p=0;p<c.length;p++)c[p]=16711935&(c[p]<<8|c[p]>>>24)|4278255360&(c[p]<<24|c[p]>>>8);c[a>>>5]|=128<<a%32,c[14+(a+64>>>9<<4)]=a;var d=s._ff,m=s._gg,g=s._hh,v=s._ii;for(p=0;p<c.length;p+=16){var _=u,y=l,b=h,S=f;l=v(l=v(l=v(l=v(l=g(l=g(l=g(l=g(l=m(l=m(l=m(l=m(l=d(l=d(l=d(l=d(l,h=d(h,f=d(f,u=d(u,l,h,f,c[p+0],7,-680876936),l,h,c[p+1],12,-389564586),u,l,c[p+2],17,606105819),f,u,c[p+3],22,-1044525330),h=d(h,f=d(f,u=d(u,l,h,f,c[p+4],7,-176418897),l,h,c[p+5],12,1200080426),u,l,c[p+6],17,-1473231341),f,u,c[p+7],22,-45705983),h=d(h,f=d(f,u=d(u,l,h,f,c[p+8],7,1770035416),l,h,c[p+9],12,-1958414417),u,l,c[p+10],17,-42063),f,u,c[p+11],22,-1990404162),h=d(h,f=d(f,u=d(u,l,h,f,c[p+12],7,1804603682),l,h,c[p+13],12,-40341101),u,l,c[p+14],17,-1502002290),f,u,c[p+15],22,1236535329),h=m(h,f=m(f,u=m(u,l,h,f,c[p+1],5,-165796510),l,h,c[p+6],9,-1069501632),u,l,c[p+11],14,643717713),f,u,c[p+0],20,-373897302),h=m(h,f=m(f,u=m(u,l,h,f,c[p+5],5,-701558691),l,h,c[p+10],9,38016083),u,l,c[p+15],14,-660478335),f,u,c[p+4],20,-405537848),h=m(h,f=m(f,u=m(u,l,h,f,c[p+9],5,568446438),l,h,c[p+14],9,-1019803690),u,l,c[p+3],14,-187363961),f,u,c[p+8],20,1163531501),h=m(h,f=m(f,u=m(u,l,h,f,c[p+13],5,-1444681467),l,h,c[p+2],9,-51403784),u,l,c[p+7],14,1735328473),f,u,c[p+12],20,-1926607734),h=g(h,f=g(f,u=g(u,l,h,f,c[p+5],4,-378558),l,h,c[p+8],11,-2022574463),u,l,c[p+11],16,1839030562),f,u,c[p+14],23,-35309556),h=g(h,f=g(f,u=g(u,l,h,f,c[p+1],4,-1530992060),l,h,c[p+4],11,1272893353),u,l,c[p+7],16,-155497632),f,u,c[p+10],23,-1094730640),h=g(h,f=g(f,u=g(u,l,h,f,c[p+13],4,681279174),l,h,c[p+0],11,-358537222),u,l,c[p+3],16,-722521979),f,u,c[p+6],23,76029189),h=g(h,f=g(f,u=g(u,l,h,f,c[p+9],4,-640364487),l,h,c[p+12],11,-421815835),u,l,c[p+15],16,530742520),f,u,c[p+2],23,-995338651),h=v(h,f=v(f,u=v(u,l,h,f,c[p+0],6,-198630844),l,h,c[p+7],10,1126891415),u,l,c[p+14],15,-1416354905),f,u,c[p+5],21,-57434055),h=v(h,f=v(f,u=v(u,l,h,f,c[p+12],6,1700485571),l,h,c[p+3],10,-1894986606),u,l,c[p+10],15,-1051523),f,u,c[p+1],21,-2054922799),h=v(h,f=v(f,u=v(u,l,h,f,c[p+8],6,1873313359),l,h,c[p+15],10,-30611744),u,l,c[p+6],15,-1560198380),f,u,c[p+13],21,1309151649),h=v(h,f=v(f,u=v(u,l,h,f,c[p+4],6,-145523070),l,h,c[p+11],10,-1120210379),u,l,c[p+2],15,718787259),f,u,c[p+9],21,-343485551),u=u+_>>>0,l=l+y>>>0,h=h+b>>>0,f=f+S>>>0}return t.endian([u,l,h,f])};s._ff=function(e,t,n,r,i,o,s){var c=e+(t&n|~t&r)+(i>>>0)+s;return(c<<o|c>>>32-o)+t},s._gg=function(e,t,n,r,i,o,s){var c=e+(t&r|n&~r)+(i>>>0)+s;return(c<<o|c>>>32-o)+t},s._hh=function(e,t,n,r,i,o,s){var c=e+(t^n^r)+(i>>>0)+s;return(c<<o|c>>>32-o)+t},s._ii=function(e,t,n,r,i,o,s){var c=e+(n^(t|~r))+(i>>>0)+s;return(c<<o|c>>>32-o)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(s(e,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):t.bytesToHex(r)}}()},function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?n.push(t.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}};e.exports=n}()},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){"use strict";e.exports=function(e,t){var n;e.indexOf("base64")<0?n=atob(e):e.split(",")[0].indexOf("base64")>=0?(t=t||e.split(",")[0].split(":")[1].split(";")[0],n=atob(e.split(",")[1])):n=unescape(e.split(",")[1]);for(var r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return new Blob([r],{type:t})}},function(e,t,n){"use strict";function r(e,t){return e&&e[t]?o.isFunction(e[t])?e[t]():e[t]:null}var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(0),s=n(4),c=n(1),a=n(2)._request,u=n(3),l=u.isNullOrUndefined,h=u.ensureArray,f=u.transformFetchOptions,p=u.setValue,d=u.findValue,m=u.isPlainObject,g=function e(t){return o.isArray(t)?t.map(e):m(t)?o.mapObject(t,e):o.isObject(t)&&t._toPointer?t._toPointer():t},v=["objectId","createdAt","updatedAt"],_=function(e){if(-1!==v.indexOf(e))throw new Error("key["+e+"] is reserved")},y=function(e){var t=o.find(e,function(e){return e instanceof Error});if(!t)return e;var n=new s(t.code,t.message);throw n.results=e,n};e.exports=function(e){e.Object=function(t,n){if(o.isString(t))return e.Object._create.apply(this,arguments);t=t||{},n&&n.parse&&(t=this.parse(t),t=this._mergeMagicFields(t));var i=r(this,"defaults");i&&(t=o.extend({},i,t)),n&&n.collection&&(this.collection=n.collection),this._serverData={},this._opSetQueue=[{}],this._flags={},this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=o.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(t,{silent:!0}),this.changed={},this._silent={},this._pending={},this._hasData=!0,this._previousAttributes=o.clone(this.attributes),this.initialize.apply(this,arguments)},e.Object.saveAll=function(t,n){return e.Object._deepSaveAsync(t,null,n)},e.Object.fetchAll=function(e,t){return c.resolve().then(function(){return a("batch",null,null,"POST",{requests:o.map(e,function(e){if(!e.className)throw new Error("object must have className to fetch");if(!e.id)throw new Error("object must have id to fetch");if(e.dirty())throw new Error("object is modified but not saved");return{method:"GET",path:"/1.1/classes/"+e.className+"/"+e.id}})},t)}).then(function(t){var n=o.map(e,function(e,n){if(t[n].success){var r=e.parse(t[n].success);return e._cleanupUnsetKeys(r),e._finishFetch(r),e}return null===t[n].success?new s(s.OBJECT_NOT_FOUND,"Object not found."):new s(t[n].error.code,t[n].error.error)});return y(n)})},o.extend(e.Object.prototype,e.Events,{_fetchWhenSave:!1,initialize:function(){},fetchWhenSave:function(e){if(console.warn("AV.Object#fetchWhenSave is deprecated, use AV.Object#save with options.fetchWhenSave instead."),!o.isBoolean(e))throw new Error("Expect boolean value for fetchWhenSave");this._fetchWhenSave=e},getObjectId:function(){return this.id},getCreatedAt:function(){return this.createdAt||this.get("createdAt")},getUpdatedAt:function(){return this.updatedAt||this.get("updatedAt")},toJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this._toFullJSON(n,!1)},toFullJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this._toFullJSON(e)},_toFullJSON:function(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=o.clone(this.attributes);if(o.isArray(t))var s=t.concat(this);return e._objectEach(i,function(t,n){i[n]=e._encode(t,s,void 0,r)}),e._objectEach(this._operations,function(e,t){i[t]=e}),o.has(this,"id")&&(i.objectId=this.id),o(["createdAt","updatedAt"]).each(function(e){if(o.has(n,e)){var t=n[e];i[e]=o.isDate(t)?t.toJSON():t}}),r&&(i.__type="Object",o.isArray(t)&&t.length&&(i.__type="Pointer"),i.className=this.className),i},_refreshCache:function(){var t=this;t._refreshingCache||(t._refreshingCache=!0,e._objectEach(this.attributes,function(n,r){n instanceof e.Object?n._refreshCache():o.isObject(n)&&t._resetCacheForKey(r)&&t.set(r,new e.Op.Set(n),{silent:!0})}),delete t._refreshingCache)},dirty:function(e){this._refreshCache();var t=o.last(this._opSetQueue);return e?!!t[e]:!this.id||o.keys(t).length>0},_toPointer:function(){return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(e){switch(e){case"objectId":return this.id;case"createdAt":case"updatedAt":return this[e];default:return this.attributes[e]}},relation:function(t){var n=this.get(t);if(n){if(!(n instanceof e.Relation))throw new Error("Called relation() on non-relation field "+t);return n._ensureParentAndKey(this,t),n}return new e.Relation(this,t)},escape:function(e){var t=this._escapedAttributes[e];if(t)return t;var n,r=this.attributes[e];return n=l(r)?"":o.escape(r.toString()),this._escapedAttributes[e]=n,n},has:function(e){return!l(this.attributes[e])},_mergeMagicFields:function(t){var n=this;return e._arrayEach(["objectId","createdAt","updatedAt"],function(r){t[r]&&("objectId"===r?n.id=t[r]:"createdAt"!==r&&"updatedAt"!==r||o.isDate(t[r])?n[r]=t[r]:n[r]=e._parseDate(t[r]),delete t[r])}),t},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var t=o.first(this._opSetQueue);this._opSetQueue=o.rest(this._opSetQueue);var n=o.first(this._opSetQueue);e._objectEach(t,function(e,r){var i=t[r],o=n[r];i&&o?n[r]=o._mergeWithPrevious(i):i&&(n[r]=i)}),this._saving=this._saving-1},_finishSave:function(t){var n={};e._traverse(this.attributes,function(t){t instanceof e.Object&&t.id&&t._hasData&&(n[t.id]=t)});var r=o.first(this._opSetQueue);this._opSetQueue=o.rest(this._opSetQueue),this._applyOpSet(r,this._serverData),this._mergeMagicFields(t);var i=this;e._objectEach(t,function(t,r){i._serverData[r]=e._decode(t,r);var o=e._traverse(i._serverData[r],function(t){if(t instanceof e.Object&&n[t.id])return n[t.id]});o&&(i._serverData[r]=o)}),this._rebuildAllEstimatedData();var s=this._opSetQueue.map(o.clone);this._refreshCache(),this._opSetQueue=s,this._saving=this._saving-1},_finishFetch:function(t,n){this._opSetQueue=[{}],this._mergeMagicFields(t);var r=this;e._objectEach(t,function(t,n){r._serverData[n]=e._decode(t,n)}),this._rebuildAllEstimatedData(),this._refreshCache(),this._opSetQueue=[{}],this._hasData=n},_applyOpSet:function(t,n){var r=this;e._objectEach(t,function(t,o){var s=d(n,o),c=i(s,3),a=c[0],u=c[1],l=c[2];p(n,o,t._estimate(a,r,o)),u&&u[l]===e.Op._UNSET&&delete u[l]})},_resetCacheForKey:function(t){var n=this.attributes[t];if(o.isObject(n)&&!(n instanceof e.Object)&&!(n instanceof e.File)){var r=JSON.stringify(g(n));if(this._hashedJSON[t]!==r){var i=!!this._hashedJSON[t];return this._hashedJSON[t]=r,i}}return!1},_rebuildEstimatedDataForKey:function(t){var n=this;delete this.attributes[t],this._serverData[t]&&(this.attributes[t]=this._serverData[t]),e._arrayEach(this._opSetQueue,function(r){var o=r[t];if(o){var s=d(n.attributes,t),c=i(s,4),a=c[0],u=c[1],l=c[2],h=c[3];p(n.attributes,t,o._estimate(a,n,t)),u&&u[l]===e.Op._UNSET&&delete u[l],n._resetCacheForKey(h)}})},_rebuildAllEstimatedData:function(){var t=this,n=o.clone(this.attributes);this.attributes=o.clone(this._serverData),e._arrayEach(this._opSetQueue,function(n){t._applyOpSet(n,t.attributes),e._objectEach(n,function(e,n){t._resetCacheForKey(n)})}),e._objectEach(n,function(e,n){t.attributes[n]!==e&&t.trigger("change:"+n,t,t.attributes[n],{})}),e._objectEach(this.attributes,function(e,r){o.has(n,r)||t.trigger("change:"+r,t,e,{})})},set:function(t,n,r){var i;if(o.isObject(t)||l(t)?(i=o.mapObject(t,function(t,n){return _(n),e._decode(t,n)}),r=n):(i={},_(t),i[t]=e._decode(n,t)),r=r||{},!i)return this;i instanceof e.Object&&(i=i.attributes),r.unset&&e._objectEach(i,function(t,n){i[n]=new e.Op.Unset});var s=o.clone(i),c=this;e._objectEach(s,function(t,n){t instanceof e.Op&&(s[n]=t._estimate(c.attributes[n],c,n),s[n]===e.Op._UNSET&&delete s[n])}),this._validate(i,r),r.changes={};var a=this._escapedAttributes;return e._arrayEach(o.keys(i),function(t){var n=i[t];n instanceof e.Relation&&(n.parent=c),n instanceof e.Op||(n=new e.Op.Set(n));var s=!0;n instanceof e.Op.Set&&o.isEqual(c.attributes[t],n.value)&&(s=!1),s&&(delete a[t],r.silent?c._silent[t]=!0:r.changes[t]=!0);var u=o.last(c._opSetQueue);u[t]=n._mergeWithPrevious(u[t]),c._rebuildEstimatedDataForKey(t),s?(c.changed[t]=c.attributes[t],r.silent||(c._pending[t]=!0)):(delete c.changed[t],delete c._pending[t])}),r.silent||this.change(r),this},unset:function(e,t){return(t=t||{}).unset=!0,this.set(e,null,t)},increment:function(t,n){return(o.isUndefined(n)||o.isNull(n))&&(n=1),this.set(t,new e.Op.Increment(n))},add:function(t,n){return this.set(t,new e.Op.Add(h(n)))},addUnique:function(t,n){return this.set(t,new e.Op.AddUnique(h(n)))},remove:function(t,n){return this.set(t,new e.Op.Remove(h(n)))},bitAnd:function(t,n){return this.set(t,new e.Op.BitAnd(n))},bitOr:function(t,n){return this.set(t,new e.Op.BitOr(n))},bitXor:function(t,n){return this.set(t,new e.Op.BitXor(n))},op:function(e){return o.last(this._opSetQueue)[e]},clear:function(e){(e=e||{}).unset=!0;var t=o.extend(this.attributes,this._operations);return this.set(t,e)},revert:function(e){var t=o.last(this._opSetQueue);return h(e||o.keys(t)).forEach(function(e){delete t[e]}),this._rebuildAllEstimatedData(),this},_getSaveJSON:function(){var t=o.clone(o.first(this._opSetQueue));return e._objectEach(t,function(e,n){t[n]=e.toJSON()}),t},_canBeSerialized:function(){return e.Object._canBeSerializedAsValue(this.attributes)},fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=this;return a("classes",this.className,this.id,"GET",f(e),t).then(function(t){var r=n.parse(t);return e.keys||n._cleanupUnsetKeys(r),n._finishFetch(r,!0),n})},_cleanupUnsetKeys:function(t){var n=this;e._objectEach(this._serverData,function(e,r){void 0===t[r]&&delete n._serverData[r]})},save:function(t,n,r){var i,s,u;o.isObject(t)||l(t)?(i=t,u=n):((i={})[t]=n,u=r),(u=o.clone(u)||{}).wait&&(s=o.clone(this.attributes));var h=o.clone(u)||{};h.wait&&(h.silent=!0),i&&this.set(i,h);var f=this,p=[],d=[];return e.Object._findUnsavedChildren(f,p,d),p.length+d.length>1?e.Object._deepSaveAsync(this,f,u):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||c.resolve(),this._allPreviousSaves=this._allPreviousSaves.catch(function(e){}).then(function(){var e,t=f.id?"PUT":"POST",n=f._getSaveJSON(),r={};if(((f._fetchWhenSave||u.fetchWhenSave)&&(r.new="true"),u._failOnNotExist&&(r.failOnNotExist="true"),u.query)&&("function"==typeof u.query.toJSON&&(e=u.query.toJSON())&&(r.where=e.where),!r.where))throw new Error("options.query is not an AV.Query");o.extend(n,f._flags);var c="classes",l=f.className;"_User"!==f.className||f.id||(c="users",l=null);var p=(u._makeRequest||a)(c,l,f.id,t,n,u,r);return p.then(function(e){var t=f.parse(e);return u.wait&&(t=o.extend(i||{},t)),f._finishSave(t),u.wait&&f.set(s,h),f},function(e){throw f._cancelSave(),e})}),this._allPreviousSaves)},destroy:function(e){e=e||{};var t=this,n=function(){t.trigger("destroy",t,t.collection,e)};return this.id?(e.wait||n(),a("classes",this.className,this.id,"DELETE",this._flags,e).then(function(){return e.wait&&n(),t})):n()},parse:function(t){var n=o.clone(t);return o(["createdAt","updatedAt"]).each(function(t){n[t]&&(n[t]=e._parseDate(n[t]))}),n.createdAt&&!n.updatedAt&&(n.updatedAt=n.createdAt),n},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(t){t=t||{};var n=this._changing;this._changing=!0;var r=this;e._objectEach(this._silent,function(e){r._pending[e]=!0});var i=o.extend({},t.changes,this._silent);if(this._silent={},e._objectEach(i,function(e,n){r.trigger("change:"+n,r,r.get(n),t)}),n)return this;for(var s=function(e,t){r._pending[t]||r._silent[t]||delete r.changed[t]};!o.isEmpty(this._pending);)this._pending={},this.trigger("change",this,t),e._objectEach(this.changed,s),r._previousAttributes=o.clone(this.attributes);return this._changing=!1,this},hasChanged:function(e){return arguments.length?this.changed&&o.has(this.changed,e):!o.isEmpty(this.changed)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&o.clone(this.changed);var n={},r=this._previousAttributes;return e._objectEach(t,function(e,t){o.isEqual(r[t],e)||(n[t]=e)}),n},previous:function(e){return arguments.length&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},isValid:function(){try{this.validate(this.attributes)}catch(e){return!1}return!0},validate:function(t){if(o.has(t,"ACL")&&!(t.ACL instanceof e.ACL))throw new s(s.OTHER_CAUSE,"ACL must be a AV.ACL.")},_validate:function(e,t){!t.silent&&this.validate&&(e=o.extend({},this.attributes,e),this.validate(e))},getACL:function(){return this.get("ACL")},setACL:function(e,t){return this.set("ACL",e,t)},disableBeforeHook:function(){this.ignoreHook("beforeSave"),this.ignoreHook("beforeUpdate"),this.ignoreHook("beforeDelete")},disableAfterHook:function(){this.ignoreHook("afterSave"),this.ignoreHook("afterUpdate"),this.ignoreHook("afterDelete")},ignoreHook:function(t){o.contains(["beforeSave","afterSave","beforeUpdate","afterUpdate","beforeDelete","afterDelete"],t)||console.trace("Unsupported hookName: "+t),e.hookKey||console.trace("ignoreHook required hookKey"),this._flags.__ignore_hooks||(this._flags.__ignore_hooks=[]),this._flags.__ignore_hooks.push(t)}}),e.Object.createWithoutData=function(t,n,r){var i=new e.Object(t);return i.id=n,i._hasData=r,i},e.Object.destroyAll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||0===e.length)return c.resolve();var n=o.groupBy(e,function(e){return JSON.stringify({className:e.className,flags:e._flags})}),r={requests:o.map(n,function(e){var t=o.map(e,"id").join(",");return{method:"DELETE",path:"/1.1/classes/"+e[0].className+"/"+t,body:e[0]._flags}})};return a("batch",null,null,"POST",r,t).then(function(e){var t=o.find(e,function(e){return!e.success});if(t)throw new s(t.error.code,t.error.error)})},e.Object._getSubclass=function(t){if(!o.isString(t))throw new Error("AV.Object._getSubclass requires a string argument.");var n=e.Object._classMap[t];return n||(n=e.Object.extend(t),e.Object._classMap[t]=n),n},e.Object._create=function(t,n,r){return new(e.Object._getSubclass(t))(n,r)},e.Object._classMap={},e.Object._extend=e._extend,e.Object.new=function(t,n){return new e.Object(t,n)},e.Object.extend=function(t,n,r){if(!o.isString(t)){if(t&&o.has(t,"className"))return e.Object.extend(t.className,t,n);throw new Error("AV.Object.extend's first argument should be the className.")}"User"===t&&(t="_User");var i=null;if(o.has(e.Object._classMap,t)){var s=e.Object._classMap[t];if(!n&&!r)return s;i=s._extend(n,r)}else(n=n||{})._className=t,i=this._extend(n,r);return i.extend=function(n){if(o.isString(n)||n&&o.has(n,"className"))return e.Object.extend.apply(i,arguments);var r=[t].concat(o.toArray(arguments));return e.Object.extend.apply(i,r)},Object.defineProperty(i,"query",Object.getOwnPropertyDescriptor(e.Object,"query")),i.new=function(e,t){return new i(e,t)},e.Object._classMap[t]=i,i},Object.defineProperty(e.Object.prototype,"className",{get:function(){var e=this._className||this.constructor._LCClassName||this.constructor.name;return"User"===e?"_User":e}}),e.Object.register=function(t,n){if(!(t.prototype instanceof e.Object))throw new Error("registered class is not a subclass of AV.Object");var r=n||t.name;if(!r.length)throw new Error("registered class must be named");n&&(t._LCClassName=n),e.Object._classMap[r]=t},Object.defineProperty(e.Object,"query",{get:function(){return new e.Query(this.prototype.className)}}),e.Object._findUnsavedChildren=function(t,n,r){e._traverse(t,function(t){return t instanceof e.Object?void(t.dirty()&&n.push(t)):t instanceof e.File?void(t.id||r.push(t)):void 0})},e.Object._canBeSerializedAsValue=function(t){var n=!0;return t instanceof e.Object||t instanceof e.File?n=!!t.id:o.isArray(t)?e._arrayEach(t,function(t){e.Object._canBeSerializedAsValue(t)||(n=!1)}):o.isObject(t)&&e._objectEach(t,function(t){e.Object._canBeSerializedAsValue(t)||(n=!1)}),n},e.Object._deepSaveAsync=function(t,n,r){var i=[],u=[];e.Object._findUnsavedChildren(t,i,u);var l=c.resolve();o.each(u,function(e){l=l.then(function(){return e.save()})});var h=o.uniq(i),f=o.uniq(h);return l.then(function(){return c._continueWhile(function(){return f.length>0},function(){var t=[],n=[];if(e._arrayEach(f,function(e){t.length>20?n.push(e):e._canBeSerialized()?t.push(e):n.push(e)}),f=n,0===t.length)return c.reject(new s(s.OTHER_CAUSE,"Tried to save a batch with a cycle."));var i=c.resolve(o.map(t,function(e){return e._allPreviousSaves||c.resolve()})).then(function(){return a("batch",null,null,"POST",{requests:o.map(t,function(e){var t=e.id?"PUT":"POST",n=e._getSaveJSON();o.extend(n,e._flags);var r="/classes/"+e.className;"_User"!==e.className||e.id||(r="/users");r="/1.1"+r;return e.id&&(r=r+"/"+e.id),e._startSave(),{method:t,path:r,body:n}})},r).then(function(e){var n=o.map(t,function(t,n){return e[n].success?(t._finishSave(t.parse(e[n].success)),t):(t._cancelSave(),new s(e[n].error.code,e[n].error.error))});return y(n)})});return e._arrayEach(t,function(e){e._allPreviousSaves=i}),i})}).then(function(){return t})}}},function(e,t,n){"use strict";var r=n(0),i=n(4);e.exports=function(e){e.Role=e.Object.extend("_Role",{constructor:function(t,n){if(r.isString(t)?(e.Object.prototype.constructor.call(this,null,null),this.setName(t)):e.Object.prototype.constructor.call(this,t,n),n){if(!(n instanceof e.ACL))throw new TypeError("acl must be an instance of AV.ACL");this.setACL(n)}},getName:function(){return this.get("name")},setName:function(e,t){return this.set("name",e,t)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(t,n){if("name"in t&&t.name!==this.getName()){var o=t.name;if(this.id&&this.id!==t.objectId)return new i(i.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if(!r.isString(o))return new i(i.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(o))return new i(i.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}return!!e.Object.prototype.validate&&e.Object.prototype.validate.call(this,t,n)}})}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(0),o=n(17),s=n(4),c=n(2),a=c._request,u=c.request,l=n(1),h=function(){if("undefined"==typeof wx||"function"!=typeof wx.login)throw new Error("Weapp Login is only available in Weapp");return new l(function(e,t){wx.login({success:function(n){var r=n.code,i=n.errMsg;r?e(r):t(new Error(i))},fail:function(){return t(new Error("wx.login \u5931\u8d25"))}})})},f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.unionIdPlatform,o=void 0===r?"weixin":r,c=n.asMainAccount,a=void 0!==c&&c;if("string"!=typeof t)throw new s(s.OTHER_CAUSE,"unionId is not a string");if("string"!=typeof o)throw new s(s.OTHER_CAUSE,"unionIdPlatform is not a string");return i.extend({},e,{platform:o,unionid:t,main_account:Boolean(a)})};e.exports=function(e){e.User=e.Object.extend("_User",{_isCurrentUser:!1,_mergeMagicFields:function(t){return t.sessionToken&&(this._sessionToken=t.sessionToken,delete t.sessionToken),e.User.__super__._mergeMagicFields.call(this,t)},_cleanupAuthData:function(){if(this.isCurrent()){var t=this.get("authData");t&&e._objectEach(this.get("authData"),function(e,n){t[n]||delete t[n]})}},_synchronizeAllAuthData:function(){if(this.get("authData")){var t=this;e._objectEach(this.get("authData"),function(e,n){t._synchronizeAuthData(n)})}},_synchronizeAuthData:function(t){if(this.isCurrent()){var n;i.isString(t)?(n=t,t=e.User._authProviders[n]):n=t.getAuthType();var r=this.get("authData");r&&t&&(t.restoreAuthentication(r[n])||this.dissociateAuthData(t))}},_handleSaveResult:function(t){return t&&!e._config.disableCurrentUser&&(this._isCurrentUser=!0),this._cleanupAuthData(),this._synchronizeAllAuthData(),delete this._serverData.password,this._rebuildEstimatedDataForKey("password"),this._refreshCache(),!t&&!this.isCurrent()||e._config.disableCurrentUser?l.resolve():l.resolve(e.User._saveCurrentUser(this))},_linkWith:function(t,n){var o,s=this,c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).failOnNotExist,a=void 0!==c&&c;return i.isString(t)?(o=t,t=e.User._authProviders[t]):o=t.getAuthType(),n?this.save({authData:r({},o,n)},{fetchWhenSave:!!this.get("authData"),_failOnNotExist:a}).then(function(e){return e._handleSaveResult(!0).then(function(){return e})}):t.authenticate().then(function(e){return s._linkWith(t,e)})},associateWithAuthData:function(e,t){return this._linkWith(t,e)},associateWithAuthDataAndUnionId:function(e,t,n,r){return this._linkWith(t,f(e,n,r))},linkWithWeapp:function(){var e=this;return h().then(function(t){return e._linkWith("lc_weapp",{code:t})})},dissociateAuthData:function(e){return this.unset("authData."+e),this.save().then(function(e){return e._handleSaveResult(!0).then(function(){return e})})},_unlinkFrom:function(e){return console.warn("DEPRECATED: User#_unlinkFrom \u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 User#dissociateAuthData \u4ee3\u66ff"),this.dissociateAuthData(e)},_isLinked:function(e){var t;return t=i.isString(e)?e:e.getAuthType(),!!(this.get("authData")||{})[t]},isAnonymous:function(){return this._isLinked("anonymous")},logOut:function(){this._logOutWithAll(),this._isCurrentUser=!1},_logOutWithAll:function(){if(this.get("authData")){var t=this;e._objectEach(this.get("authData"),function(e,n){t._logOutWith(n)})}},_logOutWith:function(t){this.isCurrent()&&(i.isString(t)&&(t=e.User._authProviders[t]),t&&t.deauthenticate&&t.deauthenticate())},signUp:function(e,t){var n=e&&e.username||this.get("username");if(!n||""===n)throw new s(s.OTHER_CAUSE,"Cannot sign up user with an empty name.");var r=e&&e.password||this.get("password");if(!r||""===r)throw new s(s.OTHER_CAUSE,"Cannot sign up user with an empty password.");return this.save(e,t).then(function(e){return e.isAnonymous()&&(e.unset("authData.anonymous"),e._opSetQueue=[{}]),e._handleSaveResult(!0).then(function(){return e})})},signUpOrlogInWithMobilePhone:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&e.mobilePhoneNumber||this.get("mobilePhoneNumber");if(!n||""===n)throw new s(s.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber with an empty mobilePhoneNumber.");var r=e&&e.smsCode||this.get("smsCode");if(!r||""===r)throw new s(s.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber  with an empty smsCode.");return t._makeRequest=function(e,t,n,r,i){return a("usersByMobilePhone",null,null,"POST",i)},this.save(e,t).then(function(e){return delete e.attributes.smsCode,delete e._serverData.smsCode,e._handleSaveResult(!0).then(function(){return e})})},loginWithAuthData:function(e,t,n){return this._linkWith(t,e,n)},loginWithAuthDataAndUnionId:function(e,t,n,r){return this.loginWithAuthData(f(e,n,r),t,r)},loginWithWeapp:function(e){var t=this;return h().then(function(n){return t.loginWithAuthData({code:n},"lc_weapp",e)})},logIn:function(){var e=this;return a("login",null,null,"POST",this.toJSON()).then(function(t){var n=e.parse(t);return e._finishFetch(n),e._handleSaveResult(!0).then(function(){return n.smsCode||delete e.attributes.smsCode,e})})},save:function(t,n,r){var o,s;return i.isObject(t)||i.isNull(t)||i.isUndefined(t)?(o=t,s=n):((o={})[t]=n,s=r),s=s||{},e.Object.prototype.save.call(this,o,s).then(function(e){return e._handleSaveResult(!1).then(function(){return e})})},follow:function(t,n){if(!this.id)throw new Error("Please signin.");var r=void 0,o=void 0;t.user?(r=t.user,o=t.attributes):r=t;var s=i.isString(r)?r:r.id;if(!s)throw new Error("Invalid target user.");var c="users/"+this.id+"/friendship/"+s;return a(c,null,null,"POST",e._encode(o),n)},unfollow:function(e,t){if(!this.id)throw new Error("Please signin.");var n;n=e.user?e.user:e;var r=i.isString(n)?n:n.id;if(!r)throw new Error("Invalid target user.");var o="users/"+this.id+"/friendship/"+r;return a(o,null,null,"DELETE",null,t)},followerQuery:function(){return e.User.followerQuery(this.id)},followeeQuery:function(){return e.User.followeeQuery(this.id)},fetch:function(t,n){return e.Object.prototype.fetch.call(this,t,n).then(function(e){return e._handleSaveResult(!1).then(function(){return e})})},updatePassword:function(e,t,n){var r="users/"+this.id+"/updatePassword";return a(r,null,null,"PUT",{old_password:e,new_password:t},n)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},getMobilePhoneNumber:function(){return this.get("mobilePhoneNumber")},setMobilePhoneNumber:function(e,t){return this.set("mobilePhoneNumber",e,t)},setUsername:function(e,t){return this.set("username",e,t)},setPassword:function(e,t){return this.set("password",e,t)},getEmail:function(){return this.get("email")},setEmail:function(e,t){return this.set("email",e,t)},authenticated:function(){return console.warn("DEPRECATED: \u5982\u679c\u8981\u5224\u65ad\u5f53\u524d\u7528\u6237\u7684\u767b\u5f55\u72b6\u6001\u662f\u5426\u6709\u6548\uff0c\u8bf7\u4f7f\u7528 currentUser.isAuthenticated().then()\uff0c\u5982\u679c\u8981\u5224\u65ad\u8be5\u7528\u6237\u662f\u5426\u662f\u5f53\u524d\u767b\u5f55\u7528\u6237\uff0c\u8bf7\u4f7f\u7528 user.id === currentUser.id\u3002"),!!this._sessionToken&&!e._config.disableCurrentUser&&e.User.current()&&e.User.current().id===this.id},isAuthenticated:function(){var t=this;return l.resolve().then(function(){return!!t._sessionToken&&e.User._fetchUserBySessionToken(t._sessionToken).then(function(){return!0},function(e){if(211===e.code)return!1;throw e})})},getSessionToken:function(){return this._sessionToken},refreshSessionToken:function(e){var t=this;return a("users/"+this.id+"/refreshSessionToken",null,null,"PUT",null,e).then(function(e){return t._finishFetch(e),t._handleSaveResult(!0).then(function(){return t})})},getRoles:function(t){return e.Relation.reverseQuery("_Role","users",this).find(t)}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(t,n,r,i){return(r=r||{}).username=t,r.password=n,e.Object._create("_User").signUp(r,i)},logIn:function(t,n){var r=e.Object._create("_User");return r._finishFetch({username:t,password:n}),r.logIn()},become:function(e){return this._fetchUserBySessionToken(e).then(function(e){return e._handleSaveResult(!0).then(function(){return e})})},_fetchUserBySessionToken:function(t){var n=e.Object._create("_User");return u({method:"GET",path:"/users/me",authOptions:{sessionToken:t}}).then(function(e){var t=n.parse(e);return n._finishFetch(t),n})},logInWithMobilePhoneSmsCode:function(t,n){var r=e.Object._create("_User");return r._finishFetch({mobilePhoneNumber:t,smsCode:n}),r.logIn()},signUpOrlogInWithMobilePhone:function(t,n,r,i){return(r=r||{}).mobilePhoneNumber=t,r.smsCode=n,e.Object._create("_User").signUpOrlogInWithMobilePhone(r,i)},logInWithMobilePhone:function(t,n){var r=e.Object._create("_User");return r._finishFetch({mobilePhoneNumber:t,password:n}),r.logIn()},loginWithAuthData:function(t,n,r){return e.User._logInWith(n,t,r)},signUpOrlogInWithAuthData:function(){return console.warn("DEPRECATED: User.signUpOrlogInWithAuthData \u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 User#loginWithAuthData \u4ee3\u66ff"),this.loginWithAuthData.apply(this,arguments)},loginWithAuthDataAndUnionId:function(e,t,n,r){return this.loginWithAuthData(f(e,n,r),t,r)},signUpOrlogInWithAuthDataAndUnionId:function(){return console.warn("DEPRECATED: User.signUpOrlogInWithAuthDataAndUnionId \u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 User#loginWithAuthDataAndUnionId \u4ee3\u66ff"),this.loginWithAuthDataAndUnionId.apply(this,arguments)},loginWithWeapp:function(e){var t=this;return h().then(function(n){return t.loginWithAuthData({code:n},"lc_weapp",e)})},loginAnonymously:function(){return this.loginWithAuthData({id:o()},"anonymous")},associateWithAuthData:function(e,t,n){return console.warn("DEPRECATED: User.associateWithAuthData \u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 User#associateWithAuthData \u4ee3\u66ff"),e._linkWith(t,n)},logOut:function(){return e._config.disableCurrentUser?(console.warn("AV.User.current() was disabled in multi-user environment, call logOut() from user object instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),l.resolve(null)):(null!==e.User._currentUser&&(e.User._currentUser._logOutWithAll(),e.User._currentUser._isCurrentUser=!1),e.User._currentUserMatchesDisk=!0,e.User._currentUser=null,e.localStorage.removeItemAsync(e._getAVPath(e.User._CURRENT_USER_KEY)).then(function(){return e._refreshSubscriptionId()}))},followerQuery:function(t){if(!t||!i.isString(t))throw new Error("Invalid user object id.");var n=new e.FriendShipQuery("_Follower");return n._friendshipTag="follower",n.equalTo("user",e.Object.createWithoutData("_User",t)),n},followeeQuery:function(t){if(!t||!i.isString(t))throw new Error("Invalid user object id.");var n=new e.FriendShipQuery("_Followee");return n._friendshipTag="followee",n.equalTo("user",e.Object.createWithoutData("_User",t)),n},requestPasswordReset:function(e){return a("requestPasswordReset",null,null,"POST",{email:e})},requestEmailVerify:function(e){return a("requestEmailVerify",null,null,"POST",{email:e})},requestMobilePhoneVerify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mobilePhoneNumber:e};return t.validateToken&&(n.validate_token=t.validateToken),a("requestMobilePhoneVerify",null,null,"POST",n,t)},requestPasswordResetBySmsCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mobilePhoneNumber:e};return t.validateToken&&(n.validate_token=t.validateToken),a("requestPasswordResetBySmsCode",null,null,"POST",n,t)},resetPasswordBySmsCode:function(e,t){return a("resetPasswordBySmsCode",null,e,"PUT",{password:t})},verifyMobilePhone:function(e){return a("verifyMobilePhone",null,e,"POST",null)},requestLoginSmsCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mobilePhoneNumber:e};return t.validateToken&&(n.validate_token=t.validateToken),a("requestLoginSmsCode",null,null,"POST",n,t)},currentAsync:function(){return e._config.disableCurrentUser?(console.warn("AV.User.currentAsync() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),l.resolve(null)):e.User._currentUser?l.resolve(e.User._currentUser):e.User._currentUserMatchesDisk?l.resolve(e.User._currentUser):e.localStorage.getItemAsync(e._getAVPath(e.User._CURRENT_USER_KEY)).then(function(t){if(!t)return null;e.User._currentUserMatchesDisk=!0,e.User._currentUser=e.Object._create("_User"),e.User._currentUser._isCurrentUser=!0;var n=JSON.parse(t);return e.User._currentUser.id=n._id,delete n._id,e.User._currentUser._sessionToken=n._sessionToken,delete n._sessionToken,e.User._currentUser._finishFetch(n),e.User._currentUser._synchronizeAllAuthData(),e.User._currentUser._refreshCache(),e.User._currentUser._opSetQueue=[{}],e.User._currentUser})},current:function(){if(e._config.disableCurrentUser)return console.warn("AV.User.current() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),null;if(e.User._currentUser)return e.User._currentUser;if(e.User._currentUserMatchesDisk)return e.User._currentUser;e.User._currentUserMatchesDisk=!0;var t=e.localStorage.getItem(e._getAVPath(e.User._CURRENT_USER_KEY));if(!t)return null;e.User._currentUser=e.Object._create("_User"),e.User._currentUser._isCurrentUser=!0;var n=JSON.parse(t);return e.User._currentUser.id=n._id,delete n._id,e.User._currentUser._sessionToken=n._sessionToken,delete n._sessionToken,e.User._currentUser._finishFetch(n),e.User._currentUser._synchronizeAllAuthData(),e.User._currentUser._refreshCache(),e.User._currentUser._opSetQueue=[{}],e.User._currentUser},_saveCurrentUser:function(t){return(e.User._currentUser!==t?e.User.logOut():l.resolve()).then(function(){t._isCurrentUser=!0,e.User._currentUser=t;var n=t._toFullJSON();return n._id=t.id,n._sessionToken=t._sessionToken,e.localStorage.setItemAsync(e._getAVPath(e.User._CURRENT_USER_KEY),JSON.stringify(n)).then(function(){return e.User._currentUserMatchesDisk=!0,e._refreshSubscriptionId()})})},_registerAuthenticationProvider:function(t){e.User._authProviders[t.getAuthType()]=t,!e._config.disableCurrentUser&&e.User.current()&&e.User.current()._synchronizeAuthData(t.getAuthType())},_logInWith:function(t,n,r){return e.Object._create("_User")._linkWith(t,n,r)}})}},function(e,t,n){"use strict";var r=n(0),i=n(7)("leancloud:query"),o=n(1),s=n(4),c=n(2),a=c._request,u=c.request,l=n(3),h=l.ensureArray,f=l.transformFetchOptions,p=function(e,t){if(void 0===e)throw new Error(t)};e.exports=function(e){e.Query=function(t){r.isString(t)&&(t=e.Object._getSubclass(t)),this.objectClass=t,this.className=t.prototype.className,this._where={},this._include=[],this._select=[],this._limit=-1,this._skip=0,this._extraOptions={}},e.Query.or=function(){var t=r.toArray(arguments),n=null;e._arrayEach(t,function(e){if(r.isNull(n)&&(n=e.className),n!==e.className)throw new Error("All queries must be for the same class")});var i=new e.Query(n);return i._orQuery(t),i},e.Query.and=function(){var t=r.toArray(arguments),n=null;e._arrayEach(t,function(e){if(r.isNull(n)&&(n=e.className),n!==e.className)throw new Error("All queries must be for the same class")});var i=new e.Query(n);return i._andQuery(t),i},e.Query.doCloudQuery=function(t,n,i){var o={cql:t};return r.isArray(n)?o.pvalues=n:i=n,a("cloudQuery",null,null,"GET",o,i).then(function(t){var n=new e.Query(t.className);return{results:r.map(t.results,function(e){var r=n._newObject(t);return r._finishFetch&&r._finishFetch(n._processResult(e),!0),r}),count:t.count,className:t.className}})},e.Query._extend=e._extend,r.extend(e.Query.prototype,{_processResult:function(e){return e},get:function(e,t){if(!e)throw new s(s.OBJECT_NOT_FOUND,"Object not found.");var n=this._newObject();n.id=e;var i=this.toJSON(),o={};return i.keys&&(o.keys=i.keys),i.include&&(o.include=i.include),i.includeACL&&(o.includeACL=i.includeACL),a("classes",this.className,e,"GET",f(o),t).then(function(e){if(r.isEmpty(e))throw new s(s.OBJECT_NOT_FOUND,"Object not found.");return n._finishFetch(n.parse(e),!0),n})},toJSON:function(){var t={where:this._where};return this._include.length>0&&(t.include=this._include.join(",")),this._select.length>0&&(t.keys=this._select.join(",")),void 0!==this._includeACL&&(t.returnACL=this._includeACL),this._limit>=0&&(t.limit=this._limit),this._skip>0&&(t.skip=this._skip),void 0!==this._order&&(t.order=this._order),e._objectEach(this._extraOptions,function(e,n){t[n]=e}),t},_newObject:function(t){return t&&t.className?new e.Object(t.className):new this.objectClass},_createRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toJSON(),t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/classes/"+this.className;return encodeURIComponent(JSON.stringify(e)).length>2e3?u({path:"/batch",method:"POST",data:{requests:[{method:"GET",path:"/1.1"+n,params:e}]},authOptions:t}).then(function(e){var t=e[0];if(t.success)return t.success;var n=new Error(t.error.error||"Unknown batch error");throw n.code=t.error.code,n}):u({method:"GET",path:n,query:e,authOptions:t})},_parseResponse:function(e){var t=this;return r.map(e.results,function(n){var r=t._newObject(e);return r._finishFetch&&r._finishFetch(t._processResult(n),!0),r})},find:function(e){return this._createRequest(void 0,e).then(this._parseResponse.bind(this))},scan:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.orderedBy,s=t.batchSize,c=arguments[1],u=this.toJSON();i("scan %O",u),u.order&&(console.warn("The order of the query is ignored for Query#scan. Checkout the orderedBy option of Query#scan."),delete u.order),u.skip&&(console.warn("The skip option of the query is ignored for Query#scan."),delete u.skip),u.limit&&(console.warn("The limit option of the query is ignored for Query#scan."),delete u.limit),n&&(u.scan_key=n),s&&(u.limit=s);var l=o.resolve([]),h=void 0,f=!1;return{next:function(){return(l=l.then(function(t){return f?[]:t.length>1?t:h||0===t.length?a("scan/classes",e.className,null,"GET",h?r.extend({},u,{cursor:h}):u,c).then(function(t){return h=t.cursor,e._parseResponse(t)}).then(function(e){return e.length||(f=!0),t.concat(e)}):(f=!0,t)})).then(function(e){return e.shift()}).then(function(e){return{value:e,done:f}})}}},destroyAll:function(t){return this.find(t).then(function(n){return e.Object.destroyAll(n,t)})},count:function(e){var t=this.toJSON();return t.limit=0,t.count=1,this._createRequest(t,e).then(function(e){return e.count})},first:function(e){var t=this,n=this.toJSON();return n.limit=1,this._createRequest(n,e).then(function(e){return r.map(e.results,function(e){var n=t._newObject();return n._finishFetch&&n._finishFetch(t._processResult(e),!0),n})[0]})},skip:function(e){return p(e,"undefined is not a valid skip value"),this._skip=e,this},limit:function(e){return p(e,"undefined is not a valid limit value"),this._limit=e,this},equalTo:function(t,n){return p(t,"undefined is not a valid key"),p(n,"undefined is not a valid value"),this._where[t]=e._encode(n),this},_addCondition:function(t,n,r){return p(t,"undefined is not a valid condition key"),p(n,"undefined is not a valid condition"),p(r,"undefined is not a valid condition value"),this._where[t]||(this._where[t]={}),this._where[t][n]=e._encode(r),this},sizeEqualTo:function(e,t){return this._addCondition(e,"$size",t),this},notEqualTo:function(e,t){return this._addCondition(e,"$ne",t),this},lessThan:function(e,t){return this._addCondition(e,"$lt",t),this},greaterThan:function(e,t){return this._addCondition(e,"$gt",t),this},lessThanOrEqualTo:function(e,t){return this._addCondition(e,"$lte",t),this},greaterThanOrEqualTo:function(e,t){return this._addCondition(e,"$gte",t),this},containedIn:function(e,t){return this._addCondition(e,"$in",t),this},notContainedIn:function(e,t){return this._addCondition(e,"$nin",t),this},containsAll:function(e,t){return this._addCondition(e,"$all",t),this},exists:function(e){return this._addCondition(e,"$exists",!0),this},doesNotExist:function(e){return this._addCondition(e,"$exists",!1),this},matches:function(e,t,n){return this._addCondition(e,"$regex",t),n||(n=""),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),n&&n.length&&this._addCondition(e,"$options",n),this},matchesQuery:function(e,t){var n=t.toJSON();return n.className=t.className,this._addCondition(e,"$inQuery",n),this},doesNotMatchQuery:function(e,t){var n=t.toJSON();return n.className=t.className,this._addCondition(e,"$notInQuery",n),this},matchesKeyInQuery:function(e,t,n){var r=n.toJSON();return r.className=n.className,this._addCondition(e,"$select",{key:t,query:r}),this},doesNotMatchKeyInQuery:function(e,t,n){var r=n.toJSON();return r.className=n.className,this._addCondition(e,"$dontSelect",{key:t,query:r}),this},_orQuery:function(e){var t=r.map(e,function(e){return e.toJSON().where});return this._where.$or=t,this},_andQuery:function(e){var t=r.map(e,function(e){return e.toJSON().where});return this._where.$and=t,this},_quote:function(e){return"\\Q"+e.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(e,t){return this._addCondition(e,"$regex",this._quote(t)),this},startsWith:function(e,t){return this._addCondition(e,"$regex","^"+this._quote(t)),this},endsWith:function(e,t){return this._addCondition(e,"$regex",this._quote(t)+"$"),this},ascending:function(e){return p(e,"undefined is not a valid key"),this._order=e,this},addAscending:function(e){return p(e,"undefined is not a valid key"),this._order?this._order+=","+e:this._order=e,this},descending:function(e){return p(e,"undefined is not a valid key"),this._order="-"+e,this},addDescending:function(e){return p(e,"undefined is not a valid key"),this._order?this._order+=",-"+e:this._order="-"+e,this},near:function(t,n){return n instanceof e.GeoPoint||(n=new e.GeoPoint(n)),this._addCondition(t,"$nearSphere",n),this},withinRadians:function(e,t,n){return this.near(e,t),this._addCondition(e,"$maxDistance",n),this},withinMiles:function(e,t,n){return this.withinRadians(e,t,n/3958.8)},withinKilometers:function(e,t,n){return this.withinRadians(e,t,n/6371)},withinGeoBox:function(t,n,r){return n instanceof e.GeoPoint||(n=new e.GeoPoint(n)),r instanceof e.GeoPoint||(r=new e.GeoPoint(r)),this._addCondition(t,"$within",{$box:[n,r]}),this},include:function(e){var t=this;return p(e,"undefined is not a valid key"),r(arguments).forEach(function(e){t._include=t._include.concat(h(e))}),this},includeACL:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._includeACL=e,this},select:function(e){var t=this;return p(e,"undefined is not a valid key"),r(arguments).forEach(function(e){t._select=t._select.concat(h(e))}),this},each:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._order||this._skip||this._limit>=0){var i=new Error("Cannot iterate on a query with sort, skip, or limit.");return o.reject(i)}var s=new e.Query(this.objectClass);s._limit=n.batchSize||100,s._where=r.clone(this._where),s._include=r.clone(this._include),s.ascending("objectId");var c=!1;return o._continueWhile(function(){return!c},function(){return s.find(n).then(function(e){var n=o.resolve();return r.each(e,function(e){n=n.then(function(){return t(e)})}),n.then(function(){e.length>=s._limit?s.greaterThan("objectId",e[e.length-1].id):c=!0})})})},subscribe:function(t){return e.LiveQuery.init(this,t)}}),e.FriendShipQuery=e.Query._extend({_objectClass:e.User,_newObject:function(){return new e.User},_processResult:function(e){if(e&&e[this._friendshipTag]){var t=e[this._friendshipTag];return"Pointer"===t.__type&&"_User"===t.className&&(delete t.__type,delete t.className),t}return null}})}},function(e,t,n){"use strict";var r=n(0),i=n(66),o=n(1),s=n(3).inherits,c=n(2).request,a=function(e,t){return c({method:"POST",path:"/LiveQuery/subscribe",data:{query:e,id:t}})};e.exports=function(e){var t=function(){if(!e._config.realtime)throw new Error("LiveQuery not supported. Please use the LiveQuery bundle. https://url.leanapp.cn/enable-live-query")};e.LiveQuery=s(i,{constructor:function(e,t,n,r){var o=this;i.apply(this),this.id=e,this._client=t,this._client.register(this),this._queryJSON=n,this._subscriptionId=r,this._onMessage=this._dispatch.bind(this),this._onReconnect=function(){a(o._queryJSON,o._subscriptionId).catch(function(e){return console.error("LiveQuery resubscribe error: "+e.message)})},t.on("message",this._onMessage),t.on("reconnect",this._onReconnect)},_dispatch:function(t){var n=this;t.forEach(function(t){var i=t.op,o=t.object,s=t.query_id,c=t.updatedKeys;if(s===n.id){var a=e.parseJSON(r.extend({__type:"_File"===o.className?"File":"Object"},o));c?n.emit(i,a,c):n.emit(i,a)}})},unsubscribe:function(){var e=this._client;return e.off("message",this._onMessage),e.off("reconnect",this._onReconnect),e.deregister(this),c({method:"POST",path:"/LiveQuery/unsubscribe",data:{id:e.id,query_id:this.id}})}},{init:function(n){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).subscriptionId,i=void 0===r?e._getSubscriptionId():r;if(t(),!(n instanceof e.Query))throw new TypeError("LiveQuery must be inited with a Query");return o.resolve(i).then(function(t){return e._config.realtime.createLiveQueryClient(t).then(function(r){var i=n.toJSON(),o={where:i.where,keys:i.keys,returnACL:i.returnACL,className:n.className},s=a(o,t).then(function(n){var i=n.query_id;return new e.LiveQuery(i,r,o,t)}).finally(function(){r.deregister(s)});return r.register(s),s})})},pause:function(){return t(),e._config.realtime.pause()},resume:function(){return t(),e._config.realtime.resume()}})}},function(e,t,n){"use strict";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,c="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(c=!1)),o.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)s.call(e,t)&&n.push(c?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e,t){var n=c?c+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},o.prototype.emit=function(e,t,n,r,i,o){var s=c?c+e:e;if(!this._events[s])return!1;var a,u,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,o),!0}for(u=1,a=new Array(h-1);u<h;u++)a[u-1]=arguments[u];l.fn.apply(l.context,a)}else{var f,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,r);break;default:if(!a)for(f=1,a=new Array(h-1);f<h;f++)a[f-1]=arguments[f];l[u].fn.apply(l[u].context,a)}}return!0},o.prototype.on=function(e,t,n){var r=new i(t,n||this),o=c?c+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.once=function(e,t,n){var r=new i(t,n||this,!0),o=c?c+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.removeListener=function(e,t,n,i){var o=c?c+e:e;if(!this._events[o])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new r:delete this._events[o]);else{for(var a=0,u=[],l=s.length;a<l;a++)(s[a].fn!==t||i&&!s[a].once||n&&s[a].context!==n)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new r:delete this._events[o]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=c?c+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=c,o.EventEmitter=o,e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(3).tap;e.exports=function(e){e.Captcha=function(e,t){this._options=e,this._authOptions=t,this.url=void 0,this.captchaToken=void 0,this.validateToken=void 0},e.Captcha.prototype.refresh=function(){var t=this;return e.Cloud._requestCaptcha(this._options,this._authOptions).then(function(e){var n=e.captchaToken,i=e.url;return r.extend(t,{captchaToken:n,url:i}),i})},e.Captcha.prototype.verify=function(t){var n=this;return e.Cloud.verifyCaptcha(t,this.captchaToken).then(i(function(e){return n.validateToken=e}))},e.Captcha.request=function(t,n){var r=new e.Captcha(t,n);return r.refresh().then(function(){return r})}}},function(e,t,n){"use strict";var r=n(0),i=n(2),o=i._request,s=i.request,c=n(1);e.exports=function(e){e.Cloud=e.Cloud||{},r.extend(e.Cloud,{run:function(t,n,r){return s({service:"engine",method:"POST",path:"/functions/"+t,data:e._encode(n,null,!0),authOptions:r}).then(function(t){return e._decode(t).result})},rpc:function(t,n,i){return r.isArray(n)?c.reject(new Error("Can't pass Array as the param of rpc function in JavaScript SDK.")):s({service:"engine",method:"POST",path:"/call/"+t,data:e._encodeObjectOrArray(n),authOptions:i}).then(function(t){return e._decode(t).result})},getServerDate:function(){return o("date",null,null,"GET").then(function(t){return e._decode(t)})},requestSmsCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.isString(e)&&(e={mobilePhoneNumber:e}),!e.mobilePhoneNumber)throw new Error("Missing mobilePhoneNumber.");return t.validateToken&&(e=r.extend({},e,{validate_token:t.validateToken})),o("requestSmsCode",null,null,"POST",e,t)},verifySmsCode:function(e,t){if(!e)throw new Error("Missing sms code.");var n={};return r.isString(t)&&(n.mobilePhoneNumber=t),o("verifySmsCode",e,null,"POST",n)},_requestCaptcha:function(e,t){return o("requestCaptcha",null,null,"GET",e,t).then(function(e){var t=e.captcha_url;return{captchaToken:e.captcha_token,url:t}})},requestCaptcha:e.Captcha.request,verifyCaptcha:function(e,t){return o("verifyCaptcha",null,null,"POST",{captcha_code:e,captcha_token:t}).then(function(e){return e.validate_token})}})}},function(e,t,n){"use strict";var r=n(2).request;e.exports=function(e){e.Installation=e.Object.extend("_Installation"),e.Push=e.Push||{},e.Push.send=function(e,t){if(e.where&&(e.where=e.where.toJSON().where),e.where&&e.cql)throw new Error("Both where and cql can't be set");if(e.push_time&&(e.push_time=e.push_time.toJSON()),e.expiration_time&&(e.expiration_time=e.expiration_time.toJSON()),e.expiration_time&&e.expiration_time_interval)throw new Error("Both expiration_time and expiration_time_interval can't be set");return r({service:"push",method:"POST",path:"/push",data:e,authOptions:t})}}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),o=n(1),s=n(2)._request,c=n(3).getSessionToken;e.exports=function(e){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(t)?e.User._fetchUserBySessionToken(c(t)):e.User.currentAsync()},n=function(n){return t(n).then(function(t){return e.Object.createWithoutData("_User",t.id)._toPointer()})};e.Status=function(e,t){return this.data={},this.inboxType="default",this.query=null,e&&"object"===(void 0===e?"undefined":r(e))?this.data=e:(e&&(this.data.image=e),t&&(this.data.message=t)),this},i.extend(e.Status.prototype,{get:function(e){return this.data[e]},set:function(e,t){return this.data[e]=t,this},destroy:function(e){return this.id?s("statuses",null,this.id,"DELETE",e):o.reject(new Error("The status id is not exists."))},toObject:function(){return this.id?e.Object.createWithoutData("_Status",this.id):null},_getDataJSON:function(){var t=i.clone(this.data);return e._encode(t)},send:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!c(r)&&!e.User.current())throw new Error("Please signin an user.");return this.query?n(r).then(function(e){var n=t.query.toJSON();n.className=t.query.className;var i={};return i.query=n,t.data=t.data||{},t.data.source=t.data.source||e,i.data=t._getDataJSON(),i.inboxType=t.inboxType||"default",s("statuses",null,null,"POST",i,r)}).then(function(n){return t.id=n.objectId,t.createdAt=e._parseDate(n.createdAt),t}):e.Status.sendStatusToFollowers(this,r)},_finishFetch:function(t){this.id=t.objectId,this.createdAt=e._parseDate(t.createdAt),this.updatedAt=e._parseDate(t.updatedAt),this.messageId=t.messageId,delete t.messageId,delete t.objectId,delete t.createdAt,delete t.updatedAt,this.data=e._decode(t)}}),e.Status.sendStatusToFollowers=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!c(r)&&!e.User.current())throw new Error("Please signin an user.");return n(r).then(function(n){var i={className:"_Follower",keys:"follower"};i.where={user:n};var o={};return o.query=i,t.data=t.data||{},t.data.source=t.data.source||n,o.data=t._getDataJSON(),o.inboxType=t.inboxType||"default",s("statuses",null,null,"POST",o,r).then(function(n){return t.id=n.objectId,t.createdAt=e._parseDate(n.createdAt),t})})},e.Status.sendPrivateStatus=function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!c(o)&&!e.User.current())throw new Error("Please signin an user.");if(!r)throw new Error("Invalid target user.");var a=i.isString(r)?r:r.id;if(!a)throw new Error("Invalid target user.");return n(o).then(function(n){var r={className:"_User"};r.where={objectId:a};var i={};return i.query=r,t.data=t.data||{},t.data.source=t.data.source||n,i.data=t._getDataJSON(),i.inboxType="private",t.inboxType="private",s("statuses",null,null,"POST",i,o).then(function(n){return t.id=n.objectId,t.createdAt=e._parseDate(n.createdAt),t})})},e.Status.countUnreadStatuses=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i.isString(r)||(a=r),!c(a)&&null==n&&!e.User.current())throw new Error("Please signin an user or pass the owner objectId.");return o.resolve(n||t(a)).then(function(t){var n={};return n.inboxType=e._encode(r),n.owner=e._encode(t),s("subscribe/statuses/count",null,null,"GET",n,a)})},e.Status.resetUnreadCount=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i.isString(r)||(a=r),!c(a)&&null==n&&!e.User.current())throw new Error("Please signin an user or pass the owner objectId.");return o.resolve(n||t(a)).then(function(t){var n={};return n.inboxType=e._encode(r),n.owner=e._encode(t),s("subscribe/statuses/resetUnreadCount",null,null,"POST",n,a)})},e.Status.statusQuery=function(t){var n=new e.Query("_Status");return t&&n.equalTo("source",t),n},e.InboxQuery=e.Query._extend({_objectClass:e.Status,_sinceId:0,_maxId:0,_inboxType:"default",_owner:null,_newObject:function(){return new e.Status},_createRequest:function(t,n){return e.InboxQuery.__super__._createRequest.call(this,t,n,"/subscribe/statuses")},sinceId:function(e){return this._sinceId=e,this},maxId:function(e){return this._maxId=e,this},owner:function(e){return this._owner=e,this},inboxType:function(e){return this._inboxType=e,this},toJSON:function(){var t=e.InboxQuery.__super__.toJSON.call(this);return t.owner=e._encode(this._owner),t.inboxType=e._encode(this._inboxType),t.sinceId=e._encode(this._sinceId),t.maxId=e._encode(this._maxId),t}}),e.Status.inboxQuery=function(t,n){var r=new e.InboxQuery(e.Status);return t&&(r._owner=t),n&&(r._inboxType=n),r}}},function(e,t,n){"use strict";var r=n(0),i=n(2)._request;e.exports=function(e){e.SearchSortBuilder=function(){this._sortFields=[]},r.extend(e.SearchSortBuilder.prototype,{_addField:function(e,t,n,r){var i={};return i[e]={order:t||"asc",mode:n||"avg",missing:"_"+(r||"last")},this._sortFields.push(i),this},ascending:function(e,t,n){return this._addField(e,"asc",t,n)},descending:function(e,t,n){return this._addField(e,"desc",t,n)},whereNear:function(e,t,n){n=n||{};var r={},i={lat:t.latitude,lon:t.longitude},o={order:n.order||"asc",mode:n.mode||"avg",unit:n.unit||"km"};return o[e]=i,r._geo_distance=o,this._sortFields.push(r),this},build:function(){return JSON.stringify(e._encode(this._sortFields))}}),e.SearchQuery=e.Query._extend({_sid:null,_hits:0,_queryString:null,_highlights:null,_sortBuilder:null,_createRequest:function(e,t){return i("search/select",null,null,"GET",e||this.toJSON(),t)},sid:function(e){return this._sid=e,this},queryString:function(e){return this._queryString=e,this},highlights:function(e){var t;return t=e&&r.isString(e)?arguments:e,this._highlights=t,this},sortBy:function(e){return this._sortBuilder=e,this},hits:function(){return this._hits||(this._hits=0),this._hits},_processResult:function(e){return delete e.className,delete e._app_url,delete e._deeplink,e},hasMore:function(){return!this._hitEnd},reset:function(){this._hitEnd=!1,this._sid=null,this._hits=0},find:function(){var e=this;return this._createRequest().then(function(t){return t.sid?(e._oldSid=e._sid,e._sid=t.sid):(e._sid=null,e._hitEnd=!0),e._hits=t.hits||0,r.map(t.results,function(n){n.className&&(t.className=n.className);var r=e._newObject(t);return r.appURL=n._app_url,r._finishFetch(e._processResult(n),!0),r})})},toJSON:function(){var t=e.SearchQuery.__super__.toJSON.call(this);if(delete t.where,this.className&&(t.clazz=this.className),this._sid&&(t.sid=this._sid),!this._queryString)throw new Error("Please set query string.");if(t.q=this._queryString,this._highlights&&(t.highlights=this._highlights.join(",")),this._sortBuilder&&t.order)throw new Error("sort and order can not be set at same time.");return this._sortBuilder&&(t.sort=this._sortBuilder.build()),t}})}},function(e,t,n){"use strict";var r=n(0),i=n(4),o=n(2).request,s=n(1);e.exports=function(e){e.Insight=e.Insight||{},r.extend(e.Insight,{startJob:function(t,n){if(!t||!t.sql)throw new Error("Please provide the sql to run the job.");var r={jobConfig:t,appId:e.applicationId};return o({path:"/bigquery/jobs",method:"POST",data:e._encode(r,null,!0),authOptions:n,signKey:!1}).then(function(t){return e._decode(t).id})},on:function(e,t){}}),e.Insight.JobQuery=function(e,t){if(!e)throw new Error("Please provide the job id.");this.id=e,this.className=t,this._skip=0,this._limit=100},r.extend(e.Insight.JobQuery.prototype,{skip:function(e){return this._skip=e,this},limit:function(e){return this._limit=e,this},find:function(e){var t={skip:this._skip,limit:this._limit};return o({path:"/bigquery/jobs/"+this.id,method:"GET",query:t,authOptions:e,signKey:!1}).then(function(e){return e.error?s.reject(new i(e.code,e.error)):s.resolve(e)})}})}},function(e,t,n){"use strict";var r=n(0),i=n(2)._request,o=n(5),s=function(e){return"string"==typeof e?e:"function"==typeof e.getPayload?JSON.stringify(e.getPayload()):JSON.stringify(e)};e.exports=o.Object.extend("_Conversation",{constructor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.Object.prototype.constructor.call(this,null,null),this.set("name",e),void 0!==t.isSystem&&this.set("sys",!!t.isSystem),void 0!==t.isTransient&&this.set("tr",!!t.isTransient)},getCreator:function(){return this.get("c")},getLastMessageAt:function(){return this.get("lm")},getMembers:function(){return this.get("m")},addMember:function(e){return this.add("m",e)},getMutedMembers:function(){return this.get("mu")},getName:function(){return this.get("name")},isTransient:function(){return this.get("tr")},isSystem:function(){return this.get("sys")},send:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o={from_peer:e,conv_id:this.id,transient:!1,message:s(t)};return void 0!==n.toClients&&(o.to_peers=n.toClients),void 0!==n.transient&&(o.transient=!!n.transient),void 0!==n.pushData&&(o.push_data=n.pushData),i("rtm","messages",null,"POST",o,r)},broadcast:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c={from_peer:e,conv_id:this.id,message:s(t)};if(void 0!==n.pushData&&(c.push=n.pushData),void 0!==n.validTill){var a=n.validTill;r.isDate(a)&&(a=a.getTime()),n.valid_till=a}return i("rtm","broadcast",null,"POST",c,o)}})},function(e,t,n){"use strict";function r(e){var t=e.name,n=e.value,r=e.version;this.name=t,this.value=n,this.version=r}var i=n(0),o=n(1),s=n(2).request,c=n(3),a=c.ensureArray,u=c.parseDate,l=n(5);l.LeaderboardVersionChangeInterval={NEVER:"never",DAY:"day",WEEK:"week",MONTH:"month"},l.LeaderboardOrder={ASCENDING:"ascending",DESCENDING:"descending"},l.LeaderboardUpdateStrategy={BETTER:"better",LAST:"last",SUM:"sum"};var h=function(e){var t=l._decode(e);return new r({name:t.statisticName,value:t.statisticValue,version:t.version})};l.Leaderboard=function(e){this.statisticName=e,this.order=void 0,this.updateStrategy=void 0,this.versionChangeInterval=void 0,this.version=void 0,this.nextResetAt=void 0,this.createdAt=void 0};var f=l.Leaderboard;l.Leaderboard.createWithoutData=function(e){return new f(e)},l.Leaderboard.createLeaderboard=function(e,t){var n=e.statisticName,r=e.order,i=e.versionChangeInterval,o=e.updateStrategy;return s({method:"POST",path:"/leaderboard/leaderboards",data:{statisticName:n,order:r,versionChangeInterval:i,updateStrategy:o},authOptions:t}).then(function(e){return new f(n)._finishFetch(e)})},l.Leaderboard.getLeaderboard=function(e,t){return f.createWithoutData(e).fetch(t)},l.Leaderboard.getStatistics=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).statisticNames,n=arguments[2];return o.resolve().then(function(){if(!e||!e.id)throw new Error("user must be an AV.User");return s({method:"GET",path:"/leaderboard/users/"+e.id+"/statistics",query:{statistics:t?a(t).join(","):void 0},authOptions:n}).then(function(e){return e.results.map(h)})})},l.Leaderboard.updateStatistics=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.resolve().then(function(){if(!e||!e.id)throw new Error("user must be an AV.User");var r=i.map(t,function(e,t){return{statisticName:t,statisticValue:e}}),o=n.overwrite;return s({method:"POST",path:"/leaderboard/users/"+e.id+"/statistics",query:{overwrite:o?1:void 0},data:r,authOptions:n}).then(function(e){return e.results.map(h)})})},l.Leaderboard.deleteStatistics=function(e,t,n){return o.resolve().then(function(){if(!e||!e.id)throw new Error("user must be an AV.User");return s({method:"DELETE",path:"/leaderboard/users/"+e.id+"/statistics",query:{statistics:a(t).join(",")},authOptions:n}).then(function(){})})},i.extend(f.prototype,{_finishFetch:function(e){var t=this;return i.forEach(e,function(e,n){"updatedAt"!==n&&"objectId"!==n&&("expiredAt"===n&&(n="nextResetAt"),"createdAt"===n&&(e=u(e)),e&&"Date"===e.__type&&(e=u(e.iso)),t[n]=e)}),this},fetch:function(e){var t=this;return s({method:"GET",path:"/leaderboard/leaderboards/"+this.statisticName,authOptions:e}).then(function(e){return t._finishFetch(e)})},_getResults:function(e,t,n){var r=e.skip,i=e.limit,o=e.selectUserKeys,c=e.includeStatistics,u=e.version;return s({method:"GET",path:"/leaderboard/leaderboards/"+this.statisticName+"/ranks"+(n?"/"+n:""),query:{skip:r,limit:i,includeUser:o?a(o).join(","):void 0,includeStatistics:c?a(c).join(","):void 0,version:u},authOptions:t}).then(function(e){return e.results.map(function(e){var t=l._decode(e),n=t.user,r=t.statisticValue,i=t.rank,o=t.statistics;return{user:n,value:r,rank:i,includedStatistics:(void 0===o?[]:o).map(h)}})})},getResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skip,n=e.limit,r=e.selectUserKeys,i=e.includeStatistics,o=e.version,s=arguments[1];return this._getResults({skip:t,limit:n,selectUserKeys:r,includeStatistics:i,version:o},s)},getResultsAroundUser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if(e&&"string"!=typeof e.id)return this.getResultsAroundUser(void 0,e,t);var r=t.limit,i=t.selectUserKeys,o=t.includeStatistics,s=t.version;return this._getResults({limit:r,selectUserKeys:i,includeStatistics:o,version:s},n,e?e.id:"self")},_update:function(e,t){var n=this;return s({method:"PUT",path:"/leaderboard/leaderboards/"+this.statisticName,data:e,authOptions:t}).then(function(e){return n._finishFetch(e)})},updateVersionChangeInterval:function(e,t){return this._update({versionChangeInterval:e},t)},updateUpdateStrategy:function(e,t){return this._update({updateStrategy:e},t)},reset:function(e){var t=this;return s({method:"PUT",path:"/leaderboard/leaderboards/"+this.statisticName+"/incrementVersion",authOptions:e}).then(function(e){return t._finishFetch(e)})},destroy:function(e){return l.request({method:"DELETE",path:"/leaderboard/leaderboards/"+this.statisticName,authOptions:e}).then(function(){})},getArchives:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.skip,r=t.limit,i=arguments[1];return s({method:"GET",path:"/leaderboard/leaderboards/"+this.statisticName+"/archives",query:{skip:n,limit:r},authOptions:i}).then(function(t){return t.results.map(function(t){var n=t.version,r=t.status,i=t.url,o=t.activatedAt,s=t.deactivatedAt;return{statisticName:e.statisticName,version:n,status:r,url:i,activatedAt:u(o.iso),deactivatedAt:u(s.iso)}})})}})}])})}).call(this,e("_process"))},{_process:1}],3:[function(e,t,n){(function(e){(function(){var r,i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",c="__lodash_hash_undefined__",a=500,u="__lodash_placeholder__",l=1,h=2,f=4,p=1,d=2,m=1,g=2,v=4,_=8,y=16,b=32,S=64,E=128,k=256,T=512,w=30,R="...",A=800,I=16,C=1,x=2,O=1/0,N=9007199254740991,P=1.7976931348623157e308,L=NaN,M=4294967295,D=M-1,F=M>>>1,U=[["ary",E],["bind",m],["bindKey",g],["curry",_],["curryRight",y],["flip",T],["partial",b],["partialRight",S],["rearg",k]],j="[object Arguments]",H="[object Array]",B="[object AsyncFunction]",q="[object Boolean]",W="[object Date]",G="[object DOMException]",K="[object Error]",z="[object Function]",J="[object GeneratorFunction]",V="[object Map]",Y="[object Number]",X="[object Null]",Q="[object Object]",Z="[object Proxy]",$="[object RegExp]",ee="[object Set]",te="[object String]",ne="[object Symbol]",re="[object Undefined]",ie="[object WeakMap]",oe="[object WeakSet]",se="[object ArrayBuffer]",ce="[object DataView]",ae="[object Float32Array]",ue="[object Float64Array]",le="[object Int8Array]",he="[object Int16Array]",fe="[object Int32Array]",pe="[object Uint8Array]",de="[object Uint8ClampedArray]",me="[object Uint16Array]",ge="[object Uint32Array]",ve=/\b__p \+= '';/g,_e=/\b(__p \+=) '' \+/g,ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39);/g,Se=/[&<>"']/g,Ee=RegExp(be.source),ke=RegExp(Se.source),Te=/<%-([\s\S]+?)%>/g,we=/<%([\s\S]+?)%>/g,Re=/<%=([\s\S]+?)%>/g,Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xe=/[\\^$.*+?()[\]{}|]/g,Oe=RegExp(xe.source),Ne=/^\s+|\s+$/g,Pe=/^\s+/,Le=/\s+$/,Me=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,De=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,je=/\\(\\)?/g,He=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Be=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,Ge=/^\[object .+?Constructor\]$/,Ke=/^0o[0-7]+$/i,ze=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ve=/($^)/,Ye=/['\n\r\u2028\u2029\\]/g,Xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ze="[\\ud800-\\udfff]",$e="["+Qe+"]",et="["+Xe+"]",tt="\\d+",nt="[\\u2700-\\u27bf]",rt="[a-z\\xdf-\\xf6\\xf8-\\xff]",it="[^\\ud800-\\udfff"+Qe+tt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ot="\\ud83c[\\udffb-\\udfff]",st="[^\\ud800-\\udfff]",ct="(?:\\ud83c[\\udde6-\\uddff]){2}",at="[\\ud800-\\udbff][\\udc00-\\udfff]",ut="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lt="(?:"+rt+"|"+it+")",ht="(?:"+ut+"|"+it+")",ft="(?:"+et+"|"+ot+")"+"?",pt="[\\ufe0e\\ufe0f]?"+ft+("(?:\\u200d(?:"+[st,ct,at].join("|")+")[\\ufe0e\\ufe0f]?"+ft+")*"),dt="(?:"+[nt,ct,at].join("|")+")"+pt,mt="(?:"+[st+et+"?",et,ct,at,Ze].join("|")+")",gt=RegExp("['\u2019]","g"),vt=RegExp(et,"g"),_t=RegExp(ot+"(?="+ot+")|"+mt+pt,"g"),yt=RegExp([ut+"?"+rt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[$e,ut,"$"].join("|")+")",ht+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[$e,ut+lt,"$"].join("|")+")",ut+"?"+lt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ut+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tt,dt].join("|"),"g"),bt=RegExp("[\\u200d\\ud800-\\udfff"+Xe+"\\ufe0e\\ufe0f]"),St=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Et=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kt=-1,Tt={};Tt[ae]=Tt[ue]=Tt[le]=Tt[he]=Tt[fe]=Tt[pe]=Tt[de]=Tt[me]=Tt[ge]=!0,Tt[j]=Tt[H]=Tt[se]=Tt[q]=Tt[ce]=Tt[W]=Tt[K]=Tt[z]=Tt[V]=Tt[Y]=Tt[Q]=Tt[$]=Tt[ee]=Tt[te]=Tt[ie]=!1;var wt={};wt[j]=wt[H]=wt[se]=wt[ce]=wt[q]=wt[W]=wt[ae]=wt[ue]=wt[le]=wt[he]=wt[fe]=wt[V]=wt[Y]=wt[Q]=wt[$]=wt[ee]=wt[te]=wt[ne]=wt[pe]=wt[de]=wt[me]=wt[ge]=!0,wt[K]=wt[z]=wt[ie]=!1;var Rt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},At=parseFloat,It=parseInt,Ct="object"==typeof e&&e&&e.Object===Object&&e,xt="object"==typeof self&&self&&self.Object===Object&&self,Ot=Ct||xt||Function("return this")(),Nt="object"==typeof n&&n&&!n.nodeType&&n,Pt=Nt&&"object"==typeof t&&t&&!t.nodeType&&t,Lt=Pt&&Pt.exports===Nt,Mt=Lt&&Ct.process,Dt=function(){try{var e=Pt&&Pt.require&&Pt.require("util").types;return e||Mt&&Mt.binding&&Mt.binding("util")}catch(e){}}(),Ft=Dt&&Dt.isArrayBuffer,Ut=Dt&&Dt.isDate,jt=Dt&&Dt.isMap,Ht=Dt&&Dt.isRegExp,Bt=Dt&&Dt.isSet,qt=Dt&&Dt.isTypedArray;function Wt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Gt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function Kt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function zt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Jt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Vt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function Yt(e,t){return!!(null==e?0:e.length)&&an(e,t,0)>-1}function Xt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Qt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Zt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function $t(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function en(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function tn(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var nn=fn("length");function rn(e){return e.split("")}function on(e){return e.match(Ue)||[]}function sn(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function cn(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function an(e,t,n){return t==t?Fn(e,t,n):cn(e,ln,n)}function un(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function ln(e){return e!=e}function hn(e,t){var n=null==e?0:e.length;return n?gn(e,t)/n:L}function fn(e){return function(t){return null==t?r:t[e]}}function pn(e){return function(t){return null==e?r:e[t]}}function dn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function mn(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function gn(e,t){for(var n,i=-1,o=e.length;++i<o;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function vn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function _n(e,t){return Qt(t,function(t){return[t,e[t]]})}function yn(e){return function(t){return e(t)}}function bn(e,t){return Qt(t,function(t){return e[t]})}function Sn(e,t){return e.has(t)}function En(e,t){for(var n=-1,r=e.length;++n<r&&an(t,e[n],0)>-1;);return n}function kn(e,t){for(var n=e.length;n--&&an(t,e[n],0)>-1;);return n}function Tn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var wn=pn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Rn=pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function An(e){return"\\"+Rt[e]}function In(e,t){return null==e?r:e[t]}function Cn(e){return bt.test(e)}function xn(e){return St.test(e)}function On(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function Nn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function Pn(e,t){return function(n){return e(t(n))}}function Ln(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==u||(e[n]=u,o[i++]=n)}return o}function Mn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Dn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Fn(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Un(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function jn(e){return Cn(e)?qn(e):nn(e)}function Hn(e){return Cn(e)?Wn(e):rn(e)}var Bn=pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});function qn(e){for(var t=_t.lastIndex=0;_t.test(e);)++t;return t}function Wn(e){return e.match(_t)||[]}function Gn(e){return e.match(yt)||[]}var Kn=function e(t){var n=(t=null==t?Ot:Kn.defaults(Ot.Object(),t,Kn.pick(Ot,Et))).Array,Ue=t.Date,Xe=t.Error,Qe=t.Function,Ze=t.Math,$e=t.Object,et=t.RegExp,tt=t.String,nt=t.TypeError,rt=n.prototype,it=Qe.prototype,ot=$e.prototype,st=t["__core-js_shared__"],ct=it.toString,at=ot.hasOwnProperty,ut=0,lt=function(){var e=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ht=ot.toString,ft=ct.call($e),pt=Ot._,dt=et("^"+ct.call(at).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=Lt?t.Buffer:r,_t=t.Symbol,yt=t.Uint8Array,bt=mt?mt.allocUnsafe:r,St=Pn($e.getPrototypeOf,$e),Rt=$e.create,Ct=ot.propertyIsEnumerable,xt=rt.splice,Nt=_t?_t.isConcatSpreadable:r,Pt=_t?_t.iterator:r,Mt=_t?_t.toStringTag:r,Dt=function(){try{var e=hs($e,"defineProperty");return e({},"",{}),e}catch(e){}}(),nn=t.clearTimeout!==Ot.clearTimeout&&t.clearTimeout,rn=Ue&&Ue.now!==Ot.Date.now&&Ue.now,pn=t.setTimeout!==Ot.setTimeout&&t.setTimeout,Fn=Ze.ceil,qn=Ze.floor,Wn=$e.getOwnPropertySymbols,zn=mt?mt.isBuffer:r,Jn=t.isFinite,Vn=rt.join,Yn=Pn($e.keys,$e),Xn=Ze.max,Qn=Ze.min,Zn=Ue.now,$n=t.parseInt,er=Ze.random,tr=rt.reverse,nr=hs(t,"DataView"),rr=hs(t,"Map"),ir=hs(t,"Promise"),or=hs(t,"Set"),sr=hs(t,"WeakMap"),cr=hs($e,"create"),ar=sr&&new sr,ur={},lr=Ys(nr),hr=Ys(rr),fr=Ys(ir),pr=Ys(or),dr=Ys(sr),mr=_t?_t.prototype:r,gr=mr?mr.valueOf:r,vr=mr?mr.toString:r;function _r(e){if(pa(e)&&!na(e)&&!(e instanceof Er)){if(e instanceof Sr)return e;if(at.call(e,"__wrapped__"))return Qs(e)}return new Sr(e)}var yr=function(){function e(){}return function(t){if(!fa(t))return{};if(Rt)return Rt(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function br(){}function Sr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Er(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function kr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Tr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function wr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Rr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new wr;++t<n;)this.add(e[t])}function Ar(e){var t=this.__data__=new Tr(e);this.size=t.size}function Ir(e,t){var n=na(e),r=!n&&ta(e),i=!n&&!r&&sa(e),o=!n&&!r&&!i&&Sa(e),s=n||r||i||o,c=s?vn(e.length,tt):[],a=c.length;for(var u in e)!t&&!at.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ts(u,a))||c.push(u);return c}function Cr(e){var t=e.length;return t?e[Mi(0,t-1)]:r}function xr(e,t){return zs(Eo(e),Hr(t,0,e.length))}function Or(e){return zs(Eo(e))}function Nr(e,t,n){(n===r||Zc(e[t],n))&&(n!==r||t in e)||Ur(e,t,n)}function Pr(e,t,n){var i=e[t];at.call(e,t)&&Zc(i,n)&&(n!==r||t in e)||Ur(e,t,n)}function Lr(e,t){for(var n=e.length;n--;)if(Zc(e[n][0],t))return n;return-1}function Mr(e,t,n,r){return zr(e,function(e,i,o){t(r,e,n(e),o)}),r}function Dr(e,t){return e&&ko(t,Wa(t),e)}function Fr(e,t){return e&&ko(t,Ga(t),e)}function Ur(e,t,n){"__proto__"==t&&Dt?Dt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function jr(e,t){for(var i=-1,o=t.length,s=n(o),c=null==e;++i<o;)s[i]=c?r:Ua(e,t[i]);return s}function Hr(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function Br(e,t,n,i,o,s){var c,a=t&l,u=t&h,p=t&f;if(n&&(c=o?n(e,i,o,s):n(e)),c!==r)return c;if(!fa(e))return e;var d=na(e);if(d){if(c=ys(e),!a)return Eo(e,c)}else{var m=ms(e),g=m==z||m==J;if(sa(e))return ho(e,a);if(m==Q||m==j||g&&!o){if(c=u||g?{}:bs(e),!a)return u?wo(e,Fr(c,e)):To(e,Dr(c,e))}else{if(!wt[m])return o?e:{};c=Ss(e,m,a)}}s||(s=new Ar);var v=s.get(e);if(v)return v;s.set(e,c),_a(e)?e.forEach(function(r){c.add(Br(r,t,n,r,e,s))}):da(e)&&e.forEach(function(r,i){c.set(i,Br(r,t,n,i,e,s))});var _=d?r:(p?u?is:rs:u?Ga:Wa)(e);return Kt(_||e,function(r,i){_&&(r=e[i=r]),Pr(c,i,Br(r,t,n,i,e,s))}),c}function qr(e){var t=Wa(e);return function(n){return Wr(n,e,t)}}function Wr(e,t,n){var i=n.length;if(null==e)return!i;for(e=$e(e);i--;){var o=n[i],s=t[o],c=e[o];if(c===r&&!(o in e)||!s(c))return!1}return!0}function Gr(e,t,n){if("function"!=typeof e)throw new nt(s);return qs(function(){e.apply(r,n)},t)}function Kr(e,t,n,r){var o=-1,s=Yt,c=!0,a=e.length,u=[],l=t.length;if(!a)return u;n&&(t=Qt(t,yn(n))),r?(s=Xt,c=!1):t.length>=i&&(s=Sn,c=!1,t=new Rr(t));e:for(;++o<a;){var h=e[o],f=null==n?h:n(h);if(h=r||0!==h?h:0,c&&f==f){for(var p=l;p--;)if(t[p]===f)continue e;u.push(h)}else s(t,f,r)||u.push(h)}return u}_r.templateSettings={escape:Te,evaluate:we,interpolate:Re,variable:"",imports:{_:_r}},_r.prototype=br.prototype,_r.prototype.constructor=_r,Sr.prototype=yr(br.prototype),Sr.prototype.constructor=Sr,Er.prototype=yr(br.prototype),Er.prototype.constructor=Er,kr.prototype.clear=function(){this.__data__=cr?cr(null):{},this.size=0},kr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},kr.prototype.get=function(e){var t=this.__data__;if(cr){var n=t[e];return n===c?r:n}return at.call(t,e)?t[e]:r},kr.prototype.has=function(e){var t=this.__data__;return cr?t[e]!==r:at.call(t,e)},kr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=cr&&t===r?c:t,this},Tr.prototype.clear=function(){this.__data__=[],this.size=0},Tr.prototype.delete=function(e){var t=this.__data__,n=Lr(t,e);return!(n<0||(n==t.length-1?t.pop():xt.call(t,n,1),--this.size,0))},Tr.prototype.get=function(e){var t=this.__data__,n=Lr(t,e);return n<0?r:t[n][1]},Tr.prototype.has=function(e){return Lr(this.__data__,e)>-1},Tr.prototype.set=function(e,t){var n=this.__data__,r=Lr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new kr,map:new(rr||Tr),string:new kr}},wr.prototype.delete=function(e){var t=us(this,e).delete(e);return this.size-=t?1:0,t},wr.prototype.get=function(e){return us(this,e).get(e)},wr.prototype.has=function(e){return us(this,e).has(e)},wr.prototype.set=function(e,t){var n=us(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Rr.prototype.add=Rr.prototype.push=function(e){return this.__data__.set(e,c),this},Rr.prototype.has=function(e){return this.__data__.has(e)},Ar.prototype.clear=function(){this.__data__=new Tr,this.size=0},Ar.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ar.prototype.get=function(e){return this.__data__.get(e)},Ar.prototype.has=function(e){return this.__data__.has(e)},Ar.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Tr){var r=n.__data__;if(!rr||r.length<i-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(e,t),this.size=n.size,this};var zr=Io(ti),Jr=Io(ni,!0);function Vr(e,t){var n=!0;return zr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Yr(e,t,n){for(var i=-1,o=e.length;++i<o;){var s=e[i],c=t(s);if(null!=c&&(a===r?c==c&&!ba(c):n(c,a)))var a=c,u=s}return u}function Xr(e,t,n,i){var o=e.length;for((n=Ra(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:Ra(i))<0&&(i+=o),i=n>i?0:Aa(i);n<i;)e[n++]=t;return e}function Qr(e,t){var n=[];return zr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Zr(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=ks),i||(i=[]);++o<s;){var c=e[o];t>0&&n(c)?t>1?Zr(c,t-1,n,r,i):Zt(i,c):r||(i[i.length]=c)}return i}var $r=Co(),ei=Co(!0);function ti(e,t){return e&&$r(e,t,Wa)}function ni(e,t){return e&&ei(e,t,Wa)}function ri(e,t){return Vt(t,function(t){return ua(e[t])})}function ii(e,t){for(var n=0,i=(t=co(t,e)).length;null!=e&&n<i;)e=e[Vs(t[n++])];return n&&n==i?e:r}function oi(e,t,n){var r=t(e);return na(e)?r:Zt(r,n(e))}function si(e){return null==e?e===r?re:X:Mt&&Mt in $e(e)?fs(e):Ds(e)}function ci(e,t){return e>t}function ai(e,t){return null!=e&&at.call(e,t)}function ui(e,t){return null!=e&&t in $e(e)}function li(e,t,n){return e>=Qn(t,n)&&e<Xn(t,n)}function hi(e,t,i){for(var o=i?Xt:Yt,s=e[0].length,c=e.length,a=c,u=n(c),l=1/0,h=[];a--;){var f=e[a];a&&t&&(f=Qt(f,yn(t))),l=Qn(f.length,l),u[a]=!i&&(t||s>=120&&f.length>=120)?new Rr(a&&f):r}f=e[0];var p=-1,d=u[0];e:for(;++p<s&&h.length<l;){var m=f[p],g=t?t(m):m;if(m=i||0!==m?m:0,!(d?Sn(d,g):o(h,g,i))){for(a=c;--a;){var v=u[a];if(!(v?Sn(v,g):o(e[a],g,i)))continue e}d&&d.push(g),h.push(m)}}return h}function fi(e,t,n,r){return ti(e,function(e,i,o){t(r,n(e),i,o)}),r}function pi(e,t,n){var i=null==(e=Us(e,t=co(t,e)))?e:e[Vs(ac(t))];return null==i?r:Wt(i,e,n)}function di(e){return pa(e)&&si(e)==j}function mi(e,t,n,r,i){return e===t||(null==e||null==t||!pa(e)&&!pa(t)?e!=e&&t!=t:gi(e,t,n,r,mi,i))}function gi(e,t,n,r,i,o){var s=na(e),c=na(t),a=s?H:ms(e),u=c?H:ms(t),l=(a=a==j?Q:a)==Q,h=(u=u==j?Q:u)==Q,f=a==u;if(f&&sa(e)){if(!sa(t))return!1;s=!0,l=!1}if(f&&!l)return o||(o=new Ar),s||Sa(e)?$o(e,t,n,r,i,o):es(e,t,a,n,r,i,o);if(!(n&p)){var d=l&&at.call(e,"__wrapped__"),m=h&&at.call(t,"__wrapped__");if(d||m){var g=d?e.value():e,v=m?t.value():t;return o||(o=new Ar),i(g,v,n,r,o)}}return!!f&&(o||(o=new Ar),ts(e,t,n,r,i,o))}function vi(e,t,n,i){var o=n.length,s=o,c=!i;if(null==e)return!s;for(e=$e(e);o--;){var a=n[o];if(c&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<s;){var u=(a=n[o])[0],l=e[u],h=a[1];if(c&&a[2]){if(l===r&&!(u in e))return!1}else{var f=new Ar;if(i)var m=i(l,h,u,e,t,f);if(!(m===r?mi(h,l,p|d,i,f):m))return!1}}return!0}function _i(e){return!(!fa(e)||Cs(e))&&(ua(e)?dt:Ge).test(Ys(e))}function yi(e){return"function"==typeof e?e:null==e?mu:"object"==typeof e?na(e)?wi(e[0],e[1]):Ti(e):Tu(e)}function bi(e){if(!Os(e))return Yn(e);var t=[];for(var n in $e(e))at.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Si(e){if(!fa(e))return Ms(e);var t=Os(e),n=[];for(var r in e)("constructor"!=r||!t&&at.call(e,r))&&n.push(r);return n}function Ei(e,t){return e<t}function ki(e,t){var r=-1,i=ia(e)?n(e.length):[];return zr(e,function(e,n,o){i[++r]=t(e,n,o)}),i}function Ti(e){var t=ls(e);return 1==t.length&&t[0][2]?Ps(t[0][0],t[0][1]):function(n){return n===e||vi(n,e,t)}}function wi(e,t){return Rs(e)&&Ns(t)?Ps(Vs(e),t):function(n){var i=Ua(n,e);return i===r&&i===t?ja(n,e):mi(t,i,p|d)}}function Ri(e,t,n,i,o){e!==t&&$r(t,function(s,c){if(o||(o=new Ar),fa(s))Ai(e,t,c,n,Ri,i,o);else{var a=i?i(Hs(e,c),s,c+"",e,t,o):r;a===r&&(a=s),Nr(e,c,a)}},Ga)}function Ai(e,t,n,i,o,s,c){var a=Hs(e,n),u=Hs(t,n),l=c.get(u);if(l)Nr(e,n,l);else{var h=s?s(a,u,n+"",e,t,c):r,f=h===r;if(f){var p=na(u),d=!p&&sa(u),m=!p&&!d&&Sa(u);h=u,p||d||m?na(a)?h=a:oa(a)?h=Eo(a):d?(f=!1,h=ho(u,!0)):m?(f=!1,h=vo(u,!0)):h=[]:ga(u)||ta(u)?(h=a,ta(a)?h=Ca(a):fa(a)&&!ua(a)||(h=bs(u))):f=!1}f&&(c.set(u,h),o(h,u,i,s,c),c.delete(u)),Nr(e,n,h)}}function Ii(e,t){var n=e.length;if(n)return Ts(t+=t<0?n:0,n)?e[t]:r}function Ci(e,t,n){var r=-1;return t=Qt(t.length?t:[mu],yn(as())),mn(ki(e,function(e,n,i){return{criteria:Qt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return yo(e,t,n)})}function xi(e,t){return Oi(e,t,function(t,n){return ja(e,n)})}function Oi(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],c=ii(e,s);n(c,s)&&Bi(o,co(s,e),c)}return o}function Ni(e){return function(t){return ii(t,e)}}function Pi(e,t,n,r){var i=r?un:an,o=-1,s=t.length,c=e;for(e===t&&(t=Eo(t)),n&&(c=Qt(e,yn(n)));++o<s;)for(var a=0,u=t[o],l=n?n(u):u;(a=i(c,l,a,r))>-1;)c!==e&&xt.call(c,a,1),xt.call(e,a,1);return e}function Li(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Ts(i)?xt.call(e,i,1):$i(e,i)}}return e}function Mi(e,t){return e+qn(er()*(t-e+1))}function Di(e,t,r,i){for(var o=-1,s=Xn(Fn((t-e)/(r||1)),0),c=n(s);s--;)c[i?s:++o]=e,e+=r;return c}function Fi(e,t){var n="";if(!e||t<1||t>N)return n;do{t%2&&(n+=e),(t=qn(t/2))&&(e+=e)}while(t);return n}function Ui(e,t){return Ws(Fs(e,t,mu),e+"")}function ji(e){return Cr(Za(e))}function Hi(e,t){var n=Za(e);return zs(n,Hr(t,0,n.length))}function Bi(e,t,n,i){if(!fa(e))return e;for(var o=-1,s=(t=co(t,e)).length,c=s-1,a=e;null!=a&&++o<s;){var u=Vs(t[o]),l=n;if(o!=c){var h=a[u];(l=i?i(h,u,a):r)===r&&(l=fa(h)?h:Ts(t[o+1])?[]:{})}Pr(a,u,l),a=a[u]}return e}var qi=ar?function(e,t){return ar.set(e,t),e}:mu,Wi=Dt?function(e,t){return Dt(e,"toString",{configurable:!0,enumerable:!1,value:fu(t),writable:!0})}:mu;function Gi(e){return zs(Za(e))}function Ki(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=n(o);++i<o;)s[i]=e[i+t];return s}function zi(e,t){var n;return zr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function Ji(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=F){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!ba(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return Vi(e,t,mu,n)}function Vi(e,t,n,i){t=n(t);for(var o=0,s=null==e?0:e.length,c=t!=t,a=null===t,u=ba(t),l=t===r;o<s;){var h=qn((o+s)/2),f=n(e[h]),p=f!==r,d=null===f,m=f==f,g=ba(f);if(c)var v=i||m;else v=l?m&&(i||p):a?m&&p&&(i||!d):u?m&&p&&!d&&(i||!g):!d&&!g&&(i?f<=t:f<t);v?o=h+1:s=h}return Qn(s,D)}function Yi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],c=t?t(s):s;if(!n||!Zc(c,a)){var a=c;o[i++]=0===s?0:s}}return o}function Xi(e){return"number"==typeof e?e:ba(e)?L:+e}function Qi(e){if("string"==typeof e)return e;if(na(e))return Qt(e,Qi)+"";if(ba(e))return vr?vr.call(e):"";var t=e+"";return"0"==t&&1/e==-O?"-0":t}function Zi(e,t,n){var r=-1,o=Yt,s=e.length,c=!0,a=[],u=a;if(n)c=!1,o=Xt;else if(s>=i){var l=t?null:Jo(e);if(l)return Mn(l);c=!1,o=Sn,u=new Rr}else u=t?[]:a;e:for(;++r<s;){var h=e[r],f=t?t(h):h;if(h=n||0!==h?h:0,c&&f==f){for(var p=u.length;p--;)if(u[p]===f)continue e;t&&u.push(f),a.push(h)}else o(u,f,n)||(u!==a&&u.push(f),a.push(h))}return a}function $i(e,t){return null==(e=Us(e,t=co(t,e)))||delete e[Vs(ac(t))]}function eo(e,t,n,r){return Bi(e,t,n(ii(e,t)),r)}function to(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Ki(e,r?0:o,r?o+1:i):Ki(e,r?o+1:0,r?i:o)}function no(e,t){var n=e;return n instanceof Er&&(n=n.value()),$t(t,function(e,t){return t.func.apply(t.thisArg,Zt([e],t.args))},n)}function ro(e,t,r){var i=e.length;if(i<2)return i?Zi(e[0]):[];for(var o=-1,s=n(i);++o<i;)for(var c=e[o],a=-1;++a<i;)a!=o&&(s[o]=Kr(s[o]||c,e[a],t,r));return Zi(Zr(s,1),t,r)}function io(e,t,n){for(var i=-1,o=e.length,s=t.length,c={};++i<o;){var a=i<s?t[i]:r;n(c,e[i],a)}return c}function oo(e){return oa(e)?e:[]}function so(e){return"function"==typeof e?e:mu}function co(e,t){return na(e)?e:Rs(e,t)?[e]:Js(xa(e))}var ao=Ui;function uo(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:Ki(e,t,n)}var lo=nn||function(e){return Ot.clearTimeout(e)};function ho(e,t){if(t)return e.slice();var n=e.length,r=bt?bt(n):new e.constructor(n);return e.copy(r),r}function fo(e){var t=new e.constructor(e.byteLength);return new yt(t).set(new yt(e)),t}function po(e,t){var n=t?fo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function mo(e){var t=new e.constructor(e.source,Be.exec(e));return t.lastIndex=e.lastIndex,t}function go(e){return gr?$e(gr.call(e)):{}}function vo(e,t){var n=t?fo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function _o(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,s=ba(e),c=t!==r,a=null===t,u=t==t,l=ba(t);if(!a&&!l&&!s&&e>t||s&&c&&u&&!a&&!l||i&&c&&u||!n&&u||!o)return 1;if(!i&&!s&&!l&&e<t||l&&n&&o&&!i&&!s||a&&n&&o||!c&&o||!u)return-1}return 0}function yo(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,c=n.length;++r<s;){var a=_o(i[r],o[r]);if(a)return r>=c?a:a*("desc"==n[r]?-1:1)}return e.index-t.index}function bo(e,t,r,i){for(var o=-1,s=e.length,c=r.length,a=-1,u=t.length,l=Xn(s-c,0),h=n(u+l),f=!i;++a<u;)h[a]=t[a];for(;++o<c;)(f||o<s)&&(h[r[o]]=e[o]);for(;l--;)h[a++]=e[o++];return h}function So(e,t,r,i){for(var o=-1,s=e.length,c=-1,a=r.length,u=-1,l=t.length,h=Xn(s-a,0),f=n(h+l),p=!i;++o<h;)f[o]=e[o];for(var d=o;++u<l;)f[d+u]=t[u];for(;++c<a;)(p||o<s)&&(f[d+r[c]]=e[o++]);return f}function Eo(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function ko(e,t,n,i){var o=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var a=t[s],u=i?i(n[a],e[a],a,n,e):r;u===r&&(u=e[a]),o?Ur(n,a,u):Pr(n,a,u)}return n}function To(e,t){return ko(e,ps(e),t)}function wo(e,t){return ko(e,ds(e),t)}function Ro(e,t){return function(n,r){var i=na(n)?Gt:Mr,o=t?t():{};return i(n,e,as(r,2),o)}}function Ao(e){return Ui(function(t,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,c=o>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,c&&ws(n[0],n[1],c)&&(s=o<3?r:s,o=1),t=$e(t);++i<o;){var a=n[i];a&&e(t,a,i,s)}return t})}function Io(e,t){return function(n,r){if(null==n)return n;if(!ia(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=$e(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Co(e){return function(t,n,r){for(var i=-1,o=$e(t),s=r(t),c=s.length;c--;){var a=s[e?c:++i];if(!1===n(o[a],a,o))break}return t}}function xo(e,t,n){var r=t&m,i=Po(e);return function t(){return(this&&this!==Ot&&this instanceof t?i:e).apply(r?n:this,arguments)}}function Oo(e){return function(t){var n=Cn(t=xa(t))?Hn(t):r,i=n?n[0]:t.charAt(0),o=n?uo(n,1).join(""):t.slice(1);return i[e]()+o}}function No(e){return function(t){return $t(uu(tu(t).replace(gt,"")),e,"")}}function Po(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=yr(e.prototype),r=e.apply(n,t);return fa(r)?r:n}}function Lo(e,t,i){var o=Po(e);return function s(){for(var c=arguments.length,a=n(c),u=c,l=cs(s);u--;)a[u]=arguments[u];var h=c<3&&a[0]!==l&&a[c-1]!==l?[]:Ln(a,l);return(c-=h.length)<i?Ko(e,t,Fo,s.placeholder,r,a,h,r,r,i-c):Wt(this&&this!==Ot&&this instanceof s?o:e,this,a)}}function Mo(e){return function(t,n,i){var o=$e(t);if(!ia(t)){var s=as(n,3);t=Wa(t),n=function(e){return s(o[e],e,o)}}var c=e(t,n,i);return c>-1?o[s?t[c]:c]:r}}function Do(e){return ns(function(t){var n=t.length,i=n,o=Sr.prototype.thru;for(e&&t.reverse();i--;){var c=t[i];if("function"!=typeof c)throw new nt(s);if(o&&!a&&"wrapper"==ss(c))var a=new Sr([],!0)}for(i=a?i:n;++i<n;){var u=ss(c=t[i]),l="wrapper"==u?os(c):r;a=l&&Is(l[0])&&l[1]==(E|_|b|k)&&!l[4].length&&1==l[9]?a[ss(l[0])].apply(a,l[3]):1==c.length&&Is(c)?a[u]():a.thru(c)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&na(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Fo(e,t,i,o,s,c,a,u,l,h){var f=t&E,p=t&m,d=t&g,v=t&(_|y),b=t&T,S=d?r:Po(e);return function r(){for(var m=arguments.length,g=n(m),_=m;_--;)g[_]=arguments[_];if(v)var y=cs(r),E=Tn(g,y);if(o&&(g=bo(g,o,s,v)),c&&(g=So(g,c,a,v)),m-=E,v&&m<h){var k=Ln(g,y);return Ko(e,t,Fo,r.placeholder,i,g,k,u,l,h-m)}var T=p?i:this,w=d?T[e]:e;return m=g.length,u?g=js(g,u):b&&m>1&&g.reverse(),f&&l<m&&(g.length=l),this&&this!==Ot&&this instanceof r&&(w=S||Po(w)),w.apply(T,g)}}function Uo(e,t){return function(n,r){return fi(n,e,t(r),{})}}function jo(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=Qi(n),i=Qi(i)):(n=Xi(n),i=Xi(i)),o=e(n,i)}return o}}function Ho(e){return ns(function(t){return t=Qt(t,yn(as())),Ui(function(n){var r=this;return e(t,function(e){return Wt(e,r,n)})})})}function Bo(e,t){var n=(t=t===r?" ":Qi(t)).length;if(n<2)return n?Fi(t,e):t;var i=Fi(t,Fn(e/jn(t)));return Cn(t)?uo(Hn(i),0,e).join(""):i.slice(0,e)}function qo(e,t,r,i){var o=t&m,s=Po(e);return function t(){for(var c=-1,a=arguments.length,u=-1,l=i.length,h=n(l+a),f=this&&this!==Ot&&this instanceof t?s:e;++u<l;)h[u]=i[u];for(;a--;)h[u++]=arguments[++c];return Wt(f,o?r:this,h)}}function Wo(e){return function(t,n,i){return i&&"number"!=typeof i&&ws(t,n,i)&&(n=i=r),t=wa(t),n===r?(n=t,t=0):n=wa(n),Di(t,n,i=i===r?t<n?1:-1:wa(i),e)}}function Go(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Ia(t),n=Ia(n)),e(t,n)}}function Ko(e,t,n,i,o,s,c,a,u,l){var h=t&_;t|=h?b:S,(t&=~(h?S:b))&v||(t&=~(m|g));var f=[e,t,o,h?s:r,h?c:r,h?r:s,h?r:c,a,u,l],p=n.apply(r,f);return Is(e)&&Bs(p,f),p.placeholder=i,Gs(p,e,t)}function zo(e){var t=Ze[e];return function(e,n){if(e=Ia(e),(n=null==n?0:Qn(Ra(n),292))&&Jn(e)){var r=(xa(e)+"e").split("e");return+((r=(xa(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Jo=or&&1/Mn(new or([,-0]))[1]==O?function(e){return new or(e)}:bu;function Vo(e){return function(t){var n=ms(t);return n==V?Nn(t):n==ee?Dn(t):_n(t,e(t))}}function Yo(e,t,n,i,o,c,a,u){var l=t&g;if(!l&&"function"!=typeof e)throw new nt(s);var h=i?i.length:0;if(h||(t&=~(b|S),i=o=r),a=a===r?a:Xn(Ra(a),0),u=u===r?u:Ra(u),h-=o?o.length:0,t&S){var f=i,p=o;i=o=r}var d=l?r:os(e),v=[e,t,n,i,o,f,p,c,a,u];if(d&&Ls(v,d),e=v[0],t=v[1],n=v[2],i=v[3],o=v[4],!(u=v[9]=v[9]===r?l?0:e.length:Xn(v[9]-h,0))&&t&(_|y)&&(t&=~(_|y)),t&&t!=m)E=t==_||t==y?Lo(e,t,u):t!=b&&t!=(m|b)||o.length?Fo.apply(r,v):qo(e,t,n,i);else var E=xo(e,t,n);return Gs((d?qi:Bs)(E,v),e,t)}function Xo(e,t,n,i){return e===r||Zc(e,ot[n])&&!at.call(i,n)?t:e}function Qo(e,t,n,i,o,s){return fa(e)&&fa(t)&&(s.set(t,e),Ri(e,t,r,Qo,s),s.delete(t)),e}function Zo(e){return ga(e)?r:e}function $o(e,t,n,i,o,s){var c=n&p,a=e.length,u=t.length;if(a!=u&&!(c&&u>a))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var h=-1,f=!0,m=n&d?new Rr:r;for(s.set(e,t),s.set(t,e);++h<a;){var g=e[h],v=t[h];if(i)var _=c?i(v,g,h,t,e,s):i(g,v,h,e,t,s);if(_!==r){if(_)continue;f=!1;break}if(m){if(!tn(t,function(e,t){if(!Sn(m,t)&&(g===e||o(g,e,n,i,s)))return m.push(t)})){f=!1;break}}else if(g!==v&&!o(g,v,n,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function es(e,t,n,r,i,o,s){switch(n){case ce:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case se:return!(e.byteLength!=t.byteLength||!o(new yt(e),new yt(t)));case q:case W:case Y:return Zc(+e,+t);case K:return e.name==t.name&&e.message==t.message;case $:case te:return e==t+"";case V:var c=Nn;case ee:var a=r&p;if(c||(c=Mn),e.size!=t.size&&!a)return!1;var u=s.get(e);if(u)return u==t;r|=d,s.set(e,t);var l=$o(c(e),c(t),r,i,o,s);return s.delete(e),l;case ne:if(gr)return gr.call(e)==gr.call(t)}return!1}function ts(e,t,n,i,o,s){var c=n&p,a=rs(e),u=a.length;if(u!=rs(t).length&&!c)return!1;for(var l=u;l--;){var h=a[l];if(!(c?h in t:at.call(t,h)))return!1}var f=s.get(e);if(f&&s.get(t))return f==t;var d=!0;s.set(e,t),s.set(t,e);for(var m=c;++l<u;){var g=e[h=a[l]],v=t[h];if(i)var _=c?i(v,g,h,t,e,s):i(g,v,h,e,t,s);if(!(_===r?g===v||o(g,v,n,i,s):_)){d=!1;break}m||(m="constructor"==h)}if(d&&!m){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(d=!1)}return s.delete(e),s.delete(t),d}function ns(e){return Ws(Fs(e,r,rc),e+"")}function rs(e){return oi(e,Wa,ps)}function is(e){return oi(e,Ga,ds)}var os=ar?function(e){return ar.get(e)}:bu;function ss(e){for(var t=e.name+"",n=ur[t],r=at.call(ur,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function cs(e){return(at.call(_r,"placeholder")?_r:e).placeholder}function as(){var e=_r.iteratee||gu;return e=e===gu?yi:e,arguments.length?e(arguments[0],arguments[1]):e}function us(e,t){var n=e.__data__;return As(t)?n["string"==typeof t?"string":"hash"]:n.map}function ls(e){for(var t=Wa(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ns(i)]}return t}function hs(e,t){var n=In(e,t);return _i(n)?n:r}function fs(e){var t=at.call(e,Mt),n=e[Mt];try{e[Mt]=r;var i=!0}catch(e){}var o=ht.call(e);return i&&(t?e[Mt]=n:delete e[Mt]),o}var ps=Wn?function(e){return null==e?[]:(e=$e(e),Vt(Wn(e),function(t){return Ct.call(e,t)}))}:Au,ds=Wn?function(e){for(var t=[];e;)Zt(t,ps(e)),e=St(e);return t}:Au,ms=si;function gs(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Qn(t,e+s);break;case"takeRight":e=Xn(e,t-s)}}return{start:e,end:t}}function vs(e){var t=e.match(De);return t?t[1].split(Fe):[]}function _s(e,t,n){for(var r=-1,i=(t=co(t,e)).length,o=!1;++r<i;){var s=Vs(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ha(i)&&Ts(s,i)&&(na(e)||ta(e))}function ys(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&at.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function bs(e){return"function"!=typeof e.constructor||Os(e)?{}:yr(St(e))}function Ss(e,t,n){var r=e.constructor;switch(t){case se:return fo(e);case q:case W:return new r(+e);case ce:return po(e,n);case ae:case ue:case le:case he:case fe:case pe:case de:case me:case ge:return vo(e,n);case V:return new r;case Y:case te:return new r(e);case $:return mo(e);case ee:return new r;case ne:return go(e)}}function Es(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Me,"{\n/* [wrapped with "+t+"] */\n")}function ks(e){return na(e)||ta(e)||!!(Nt&&e&&e[Nt])}function Ts(e,t){var n=typeof e;return!!(t=null==t?N:t)&&("number"==n||"symbol"!=n&&ze.test(e))&&e>-1&&e%1==0&&e<t}function ws(e,t,n){if(!fa(n))return!1;var r=typeof t;return!!("number"==r?ia(n)&&Ts(t,n.length):"string"==r&&t in n)&&Zc(n[t],e)}function Rs(e,t){if(na(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ba(e))||Ie.test(e)||!Ae.test(e)||null!=t&&e in $e(t)}function As(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Is(e){var t=ss(e),n=_r[t];if("function"!=typeof n||!(t in Er.prototype))return!1;if(e===n)return!0;var r=os(n);return!!r&&e===r[0]}function Cs(e){return!!lt&&lt in e}(nr&&ms(new nr(new ArrayBuffer(1)))!=ce||rr&&ms(new rr)!=V||ir&&"[object Promise]"!=ms(ir.resolve())||or&&ms(new or)!=ee||sr&&ms(new sr)!=ie)&&(ms=function(e){var t=si(e),n=t==Q?e.constructor:r,i=n?Ys(n):"";if(i)switch(i){case lr:return ce;case hr:return V;case fr:return"[object Promise]";case pr:return ee;case dr:return ie}return t});var xs=st?ua:Iu;function Os(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ot)}function Ns(e){return e==e&&!fa(e)}function Ps(e,t){return function(n){return null!=n&&n[e]===t&&(t!==r||e in $e(n))}}function Ls(e,t){var n=e[1],r=t[1],i=n|r,o=i<(m|g|E),s=r==E&&n==_||r==E&&n==k&&e[7].length<=t[8]||r==(E|k)&&t[7].length<=t[8]&&n==_;if(!o&&!s)return e;r&m&&(e[2]=t[2],i|=n&m?0:v);var c=t[3];if(c){var a=e[3];e[3]=a?bo(a,c,t[4]):c,e[4]=a?Ln(e[3],u):t[4]}return(c=t[5])&&(a=e[5],e[5]=a?So(a,c,t[6]):c,e[6]=a?Ln(e[5],u):t[6]),(c=t[7])&&(e[7]=c),r&E&&(e[8]=null==e[8]?t[8]:Qn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Ms(e){var t=[];if(null!=e)for(var n in $e(e))t.push(n);return t}function Ds(e){return ht.call(e)}function Fs(e,t,i){return t=Xn(t===r?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=Xn(r.length-t,0),c=n(s);++o<s;)c[o]=r[t+o];o=-1;for(var a=n(t+1);++o<t;)a[o]=r[o];return a[t]=i(c),Wt(e,this,a)}}function Us(e,t){return t.length<2?e:ii(e,Ki(t,0,-1))}function js(e,t){for(var n=e.length,i=Qn(t.length,n),o=Eo(e);i--;){var s=t[i];e[i]=Ts(s,n)?o[s]:r}return e}function Hs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Bs=Ks(qi),qs=pn||function(e,t){return Ot.setTimeout(e,t)},Ws=Ks(Wi);function Gs(e,t,n){var r=t+"";return Ws(e,Es(r,Xs(vs(r),n)))}function Ks(e){var t=0,n=0;return function(){var i=Zn(),o=I-(i-n);if(n=i,o>0){if(++t>=A)return arguments[0]}else t=0;return e.apply(r,arguments)}}function zs(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var s=Mi(n,o),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}var Js=function(e){var t=zc(e,function(e){return n.size===a&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ce,function(e,n,r,i){t.push(r?i.replace(je,"$1"):n||e)}),t});function Vs(e){if("string"==typeof e||ba(e))return e;var t=e+"";return"0"==t&&1/e==-O?"-0":t}function Ys(e){if(null!=e){try{return ct.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Xs(e,t){return Kt(U,function(n){var r="_."+n[0];t&n[1]&&!Yt(e,r)&&e.push(r)}),e.sort()}function Qs(e){if(e instanceof Er)return e.clone();var t=new Sr(e.__wrapped__,e.__chain__);return t.__actions__=Eo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Zs=Ui(function(e,t){return oa(e)?Kr(e,Zr(t,1,oa,!0)):[]}),$s=Ui(function(e,t){var n=ac(t);return oa(n)&&(n=r),oa(e)?Kr(e,Zr(t,1,oa,!0),as(n,2)):[]}),ec=Ui(function(e,t){var n=ac(t);return oa(n)&&(n=r),oa(e)?Kr(e,Zr(t,1,oa,!0),r,n):[]});function tc(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Ra(n);return i<0&&(i=Xn(r+i,0)),cn(e,as(t,3),i)}function nc(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=Ra(n),o=n<0?Xn(i+o,0):Qn(o,i-1)),cn(e,as(t,3),o,!0)}function rc(e){return null!=e&&e.length?Zr(e,1):[]}function ic(e){return e&&e.length?e[0]:r}var oc=Ui(function(e){var t=Qt(e,oo);return t.length&&t[0]===e[0]?hi(t):[]}),sc=Ui(function(e){var t=ac(e),n=Qt(e,oo);return t===ac(n)?t=r:n.pop(),n.length&&n[0]===e[0]?hi(n,as(t,2)):[]}),cc=Ui(function(e){var t=ac(e),n=Qt(e,oo);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?hi(n,r,t):[]});function ac(e){var t=null==e?0:e.length;return t?e[t-1]:r}var uc=Ui(lc);function lc(e,t){return e&&e.length&&t&&t.length?Pi(e,t):e}var hc=ns(function(e,t){var n=null==e?0:e.length,r=jr(e,t);return Li(e,Qt(t,function(e){return Ts(e,n)?+e:e}).sort(_o)),r});function fc(e){return null==e?e:tr.call(e)}var pc=Ui(function(e){return Zi(Zr(e,1,oa,!0))}),dc=Ui(function(e){var t=ac(e);return oa(t)&&(t=r),Zi(Zr(e,1,oa,!0),as(t,2))}),mc=Ui(function(e){var t=ac(e);return t="function"==typeof t?t:r,Zi(Zr(e,1,oa,!0),r,t)});function gc(e){if(!e||!e.length)return[];var t=0;return e=Vt(e,function(e){if(oa(e))return t=Xn(e.length,t),!0}),vn(t,function(t){return Qt(e,fn(t))})}function vc(e,t){if(!e||!e.length)return[];var n=gc(e);return null==t?n:Qt(n,function(e){return Wt(t,r,e)})}var _c=Ui(function(e,t){return oa(e)?Kr(e,t):[]}),yc=Ui(function(e){return ro(Vt(e,oa))}),bc=Ui(function(e){var t=ac(e);return oa(t)&&(t=r),ro(Vt(e,oa),as(t,2))}),Sc=Ui(function(e){var t=ac(e);return t="function"==typeof t?t:r,ro(Vt(e,oa),r,t)}),Ec=Ui(gc);var kc=Ui(function(e){var t=e.length,n=t>1?e[t-1]:r;return vc(e,n="function"==typeof n?(e.pop(),n):r)});function Tc(e){var t=_r(e);return t.__chain__=!0,t}function wc(e,t){return t(e)}var Rc=ns(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return jr(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Er&&Ts(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:wc,args:[o],thisArg:r}),new Sr(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(r),e})):this.thru(o)});var Ac=Ro(function(e,t,n){at.call(e,n)?++e[n]:Ur(e,n,1)});var Ic=Mo(tc),Cc=Mo(nc);function xc(e,t){return(na(e)?Kt:zr)(e,as(t,3))}function Oc(e,t){return(na(e)?zt:Jr)(e,as(t,3))}var Nc=Ro(function(e,t,n){at.call(e,n)?e[n].push(t):Ur(e,n,[t])});var Pc=Ui(function(e,t,r){var i=-1,o="function"==typeof t,s=ia(e)?n(e.length):[];return zr(e,function(e){s[++i]=o?Wt(t,e,r):pi(e,t,r)}),s}),Lc=Ro(function(e,t,n){Ur(e,n,t)});function Mc(e,t){return(na(e)?Qt:ki)(e,as(t,3))}var Dc=Ro(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var Fc=Ui(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ws(e,t[0],t[1])?t=[]:n>2&&ws(t[0],t[1],t[2])&&(t=[t[0]]),Ci(e,Zr(t,1),[])}),Uc=rn||function(){return Ot.Date.now()};function jc(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Yo(e,E,r,r,r,r,t)}function Hc(e,t){var n;if("function"!=typeof t)throw new nt(s);return e=Ra(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Bc=Ui(function(e,t,n){var r=m;if(n.length){var i=Ln(n,cs(Bc));r|=b}return Yo(e,r,t,n,i)}),qc=Ui(function(e,t,n){var r=m|g;if(n.length){var i=Ln(n,cs(qc));r|=b}return Yo(t,r,e,n,i)});function Wc(e,t,n){var i,o,c,a,u,l,h=0,f=!1,p=!1,d=!0;if("function"!=typeof e)throw new nt(s);function m(t){var n=i,s=o;return i=o=r,h=t,a=e.apply(s,n)}function g(e){return h=e,u=qs(y,t),f?m(e):a}function v(e){var n=t-(e-l);return p?Qn(n,c-(e-h)):n}function _(e){var n=e-l;return l===r||n>=t||n<0||p&&e-h>=c}function y(){var e=Uc();if(_(e))return b(e);u=qs(y,v(e))}function b(e){return u=r,d&&i?m(e):(i=o=r,a)}function S(){var e=Uc(),n=_(e);if(i=arguments,o=this,l=e,n){if(u===r)return g(l);if(p)return lo(u),u=qs(y,t),m(l)}return u===r&&(u=qs(y,t)),a}return t=Ia(t)||0,fa(n)&&(f=!!n.leading,c=(p="maxWait"in n)?Xn(Ia(n.maxWait)||0,t):c,d="trailing"in n?!!n.trailing:d),S.cancel=function(){u!==r&&lo(u),h=0,i=l=o=u=r},S.flush=function(){return u===r?a:b(Uc())},S}var Gc=Ui(function(e,t){return Gr(e,1,t)}),Kc=Ui(function(e,t,n){return Gr(e,Ia(t)||0,n)});function zc(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new nt(s);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(zc.Cache||wr),n}function Jc(e){if("function"!=typeof e)throw new nt(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}zc.Cache=wr;var Vc=ao(function(e,t){var n=(t=1==t.length&&na(t[0])?Qt(t[0],yn(as())):Qt(Zr(t,1),yn(as()))).length;return Ui(function(r){for(var i=-1,o=Qn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Wt(e,this,r)})}),Yc=Ui(function(e,t){var n=Ln(t,cs(Yc));return Yo(e,b,r,t,n)}),Xc=Ui(function(e,t){var n=Ln(t,cs(Xc));return Yo(e,S,r,t,n)}),Qc=ns(function(e,t){return Yo(e,k,r,r,r,t)});function Zc(e,t){return e===t||e!=e&&t!=t}var $c=Go(ci),ea=Go(function(e,t){return e>=t}),ta=di(function(){return arguments}())?di:function(e){return pa(e)&&at.call(e,"callee")&&!Ct.call(e,"callee")},na=n.isArray,ra=Ft?yn(Ft):function(e){return pa(e)&&si(e)==se};function ia(e){return null!=e&&ha(e.length)&&!ua(e)}function oa(e){return pa(e)&&ia(e)}var sa=zn||Iu,ca=Ut?yn(Ut):function(e){return pa(e)&&si(e)==W};function aa(e){if(!pa(e))return!1;var t=si(e);return t==K||t==G||"string"==typeof e.message&&"string"==typeof e.name&&!ga(e)}function ua(e){if(!fa(e))return!1;var t=si(e);return t==z||t==J||t==B||t==Z}function la(e){return"number"==typeof e&&e==Ra(e)}function ha(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=N}function fa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function pa(e){return null!=e&&"object"==typeof e}var da=jt?yn(jt):function(e){return pa(e)&&ms(e)==V};function ma(e){return"number"==typeof e||pa(e)&&si(e)==Y}function ga(e){if(!pa(e)||si(e)!=Q)return!1;var t=St(e);if(null===t)return!0;var n=at.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ct.call(n)==ft}var va=Ht?yn(Ht):function(e){return pa(e)&&si(e)==$};var _a=Bt?yn(Bt):function(e){return pa(e)&&ms(e)==ee};function ya(e){return"string"==typeof e||!na(e)&&pa(e)&&si(e)==te}function ba(e){return"symbol"==typeof e||pa(e)&&si(e)==ne}var Sa=qt?yn(qt):function(e){return pa(e)&&ha(e.length)&&!!Tt[si(e)]};var Ea=Go(Ei),ka=Go(function(e,t){return e<=t});function Ta(e){if(!e)return[];if(ia(e))return ya(e)?Hn(e):Eo(e);if(Pt&&e[Pt])return On(e[Pt]());var t=ms(e);return(t==V?Nn:t==ee?Mn:Za)(e)}function wa(e){return e?(e=Ia(e))===O||e===-O?(e<0?-1:1)*P:e==e?e:0:0===e?e:0}function Ra(e){var t=wa(e),n=t%1;return t==t?n?t-n:t:0}function Aa(e){return e?Hr(Ra(e),0,M):0}function Ia(e){if("number"==typeof e)return e;if(ba(e))return L;if(fa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=fa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ne,"");var n=We.test(e);return n||Ke.test(e)?It(e.slice(2),n?2:8):qe.test(e)?L:+e}function Ca(e){return ko(e,Ga(e))}function xa(e){return null==e?"":Qi(e)}var Oa=Ao(function(e,t){if(Os(t)||ia(t))ko(t,Wa(t),e);else for(var n in t)at.call(t,n)&&Pr(e,n,t[n])}),Na=Ao(function(e,t){ko(t,Ga(t),e)}),Pa=Ao(function(e,t,n,r){ko(t,Ga(t),e,r)}),La=Ao(function(e,t,n,r){ko(t,Wa(t),e,r)}),Ma=ns(jr);var Da=Ui(function(e,t){e=$e(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&ws(t[0],t[1],o)&&(i=1);++n<i;)for(var s=t[n],c=Ga(s),a=-1,u=c.length;++a<u;){var l=c[a],h=e[l];(h===r||Zc(h,ot[l])&&!at.call(e,l))&&(e[l]=s[l])}return e}),Fa=Ui(function(e){return e.push(r,Qo),Wt(za,r,e)});function Ua(e,t,n){var i=null==e?r:ii(e,t);return i===r?n:i}function ja(e,t){return null!=e&&_s(e,t,ui)}var Ha=Uo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),e[t]=n},fu(mu)),Ba=Uo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),at.call(e,t)?e[t].push(n):e[t]=[n]},as),qa=Ui(pi);function Wa(e){return ia(e)?Ir(e):bi(e)}function Ga(e){return ia(e)?Ir(e,!0):Si(e)}var Ka=Ao(function(e,t,n){Ri(e,t,n)}),za=Ao(function(e,t,n,r){Ri(e,t,n,r)}),Ja=ns(function(e,t){var n={};if(null==e)return n;var r=!1;t=Qt(t,function(t){return t=co(t,e),r||(r=t.length>1),t}),ko(e,is(e),n),r&&(n=Br(n,l|h|f,Zo));for(var i=t.length;i--;)$i(n,t[i]);return n});var Va=ns(function(e,t){return null==e?{}:xi(e,t)});function Ya(e,t){if(null==e)return{};var n=Qt(is(e),function(e){return[e]});return t=as(t),Oi(e,n,function(e,n){return t(e,n[0])})}var Xa=Vo(Wa),Qa=Vo(Ga);function Za(e){return null==e?[]:bn(e,Wa(e))}var $a=No(function(e,t,n){return t=t.toLowerCase(),e+(n?eu(t):t)});function eu(e){return au(xa(e).toLowerCase())}function tu(e){return(e=xa(e))&&e.replace(Je,wn).replace(vt,"")}var nu=No(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),ru=No(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),iu=Oo("toLowerCase");var ou=No(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var su=No(function(e,t,n){return e+(n?" ":"")+au(t)});var cu=No(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),au=Oo("toUpperCase");function uu(e,t,n){return e=xa(e),(t=n?r:t)===r?xn(e)?Gn(e):on(e):e.match(t)||[]}var lu=Ui(function(e,t){try{return Wt(e,r,t)}catch(e){return aa(e)?e:new Xe(e)}}),hu=ns(function(e,t){return Kt(t,function(t){t=Vs(t),Ur(e,t,Bc(e[t],e))}),e});function fu(e){return function(){return e}}var pu=Do(),du=Do(!0);function mu(e){return e}function gu(e){return yi("function"==typeof e?e:Br(e,l))}var vu=Ui(function(e,t){return function(n){return pi(n,e,t)}}),_u=Ui(function(e,t){return function(n){return pi(e,n,t)}});function yu(e,t,n){var r=Wa(t),i=ri(t,r);null!=n||fa(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=ri(t,Wa(t)));var o=!(fa(n)&&"chain"in n&&!n.chain),s=ua(e);return Kt(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Eo(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Zt([this.value()],arguments))})}),e}function bu(){}var Su=Ho(Qt),Eu=Ho(Jt),ku=Ho(tn);function Tu(e){return Rs(e)?fn(Vs(e)):Ni(e)}var wu=Wo(),Ru=Wo(!0);function Au(){return[]}function Iu(){return!1}var Cu=jo(function(e,t){return e+t},0),xu=zo("ceil"),Ou=jo(function(e,t){return e/t},1),Nu=zo("floor");var Pu=jo(function(e,t){return e*t},1),Lu=zo("round"),Mu=jo(function(e,t){return e-t},0);return _r.after=function(e,t){if("function"!=typeof t)throw new nt(s);return e=Ra(e),function(){if(--e<1)return t.apply(this,arguments)}},_r.ary=jc,_r.assign=Oa,_r.assignIn=Na,_r.assignInWith=Pa,_r.assignWith=La,_r.at=Ma,_r.before=Hc,_r.bind=Bc,_r.bindAll=hu,_r.bindKey=qc,_r.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return na(e)?e:[e]},_r.chain=Tc,_r.chunk=function(e,t,i){t=(i?ws(e,t,i):t===r)?1:Xn(Ra(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,c=0,a=n(Fn(o/t));s<o;)a[c++]=Ki(e,s,s+=t);return a},_r.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},_r.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Zt(na(r)?Eo(r):[r],Zr(t,1))},_r.cond=function(e){var t=null==e?0:e.length,n=as();return e=t?Qt(e,function(e){if("function"!=typeof e[1])throw new nt(s);return[n(e[0]),e[1]]}):[],Ui(function(n){for(var r=-1;++r<t;){var i=e[r];if(Wt(i[0],this,n))return Wt(i[1],this,n)}})},_r.conforms=function(e){return qr(Br(e,l))},_r.constant=fu,_r.countBy=Ac,_r.create=function(e,t){var n=yr(e);return null==t?n:Dr(n,t)},_r.curry=function e(t,n,i){var o=Yo(t,_,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},_r.curryRight=function e(t,n,i){var o=Yo(t,y,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},_r.debounce=Wc,_r.defaults=Da,_r.defaultsDeep=Fa,_r.defer=Gc,_r.delay=Kc,_r.difference=Zs,_r.differenceBy=$s,_r.differenceWith=ec,_r.drop=function(e,t,n){var i=null==e?0:e.length;return i?Ki(e,(t=n||t===r?1:Ra(t))<0?0:t,i):[]},_r.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Ki(e,0,(t=i-(t=n||t===r?1:Ra(t)))<0?0:t):[]},_r.dropRightWhile=function(e,t){return e&&e.length?to(e,as(t,3),!0,!0):[]},_r.dropWhile=function(e,t){return e&&e.length?to(e,as(t,3),!0):[]},_r.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ws(e,t,n)&&(n=0,r=i),Xr(e,t,n,r)):[]},_r.filter=function(e,t){return(na(e)?Vt:Qr)(e,as(t,3))},_r.flatMap=function(e,t){return Zr(Mc(e,t),1)},_r.flatMapDeep=function(e,t){return Zr(Mc(e,t),O)},_r.flatMapDepth=function(e,t,n){return n=n===r?1:Ra(n),Zr(Mc(e,t),n)},_r.flatten=rc,_r.flattenDeep=function(e){return null!=e&&e.length?Zr(e,O):[]},_r.flattenDepth=function(e,t){return null!=e&&e.length?Zr(e,t=t===r?1:Ra(t)):[]},_r.flip=function(e){return Yo(e,T)},_r.flow=pu,_r.flowRight=du,_r.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},_r.functions=function(e){return null==e?[]:ri(e,Wa(e))},_r.functionsIn=function(e){return null==e?[]:ri(e,Ga(e))},_r.groupBy=Nc,_r.initial=function(e){return null!=e&&e.length?Ki(e,0,-1):[]},_r.intersection=oc,_r.intersectionBy=sc,_r.intersectionWith=cc,_r.invert=Ha,_r.invertBy=Ba,_r.invokeMap=Pc,_r.iteratee=gu,_r.keyBy=Lc,_r.keys=Wa,_r.keysIn=Ga,_r.map=Mc,_r.mapKeys=function(e,t){var n={};return t=as(t,3),ti(e,function(e,r,i){Ur(n,t(e,r,i),e)}),n},_r.mapValues=function(e,t){var n={};return t=as(t,3),ti(e,function(e,r,i){Ur(n,r,t(e,r,i))}),n},_r.matches=function(e){return Ti(Br(e,l))},_r.matchesProperty=function(e,t){return wi(e,Br(t,l))},_r.memoize=zc,_r.merge=Ka,_r.mergeWith=za,_r.method=vu,_r.methodOf=_u,_r.mixin=yu,_r.negate=Jc,_r.nthArg=function(e){return e=Ra(e),Ui(function(t){return Ii(t,e)})},_r.omit=Ja,_r.omitBy=function(e,t){return Ya(e,Jc(as(t)))},_r.once=function(e){return Hc(2,e)},_r.orderBy=function(e,t,n,i){return null==e?[]:(na(t)||(t=null==t?[]:[t]),na(n=i?r:n)||(n=null==n?[]:[n]),Ci(e,t,n))},_r.over=Su,_r.overArgs=Vc,_r.overEvery=Eu,_r.overSome=ku,_r.partial=Yc,_r.partialRight=Xc,_r.partition=Dc,_r.pick=Va,_r.pickBy=Ya,_r.property=Tu,_r.propertyOf=function(e){return function(t){return null==e?r:ii(e,t)}},_r.pull=uc,_r.pullAll=lc,_r.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Pi(e,t,as(n,2)):e},_r.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Pi(e,t,r,n):e},_r.pullAt=hc,_r.range=wu,_r.rangeRight=Ru,_r.rearg=Qc,_r.reject=function(e,t){return(na(e)?Vt:Qr)(e,Jc(as(t,3)))},_r.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=as(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Li(e,i),n},_r.rest=function(e,t){if("function"!=typeof e)throw new nt(s);return Ui(e,t=t===r?t:Ra(t))},_r.reverse=fc,_r.sampleSize=function(e,t,n){return t=(n?ws(e,t,n):t===r)?1:Ra(t),(na(e)?xr:Hi)(e,t)},_r.set=function(e,t,n){return null==e?e:Bi(e,t,n)},_r.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Bi(e,t,n,i)},_r.shuffle=function(e){return(na(e)?Or:Gi)(e)},_r.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ws(e,t,n)?(t=0,n=i):(t=null==t?0:Ra(t),n=n===r?i:Ra(n)),Ki(e,t,n)):[]},_r.sortBy=Fc,_r.sortedUniq=function(e){return e&&e.length?Yi(e):[]},_r.sortedUniqBy=function(e,t){return e&&e.length?Yi(e,as(t,2)):[]},_r.split=function(e,t,n){return n&&"number"!=typeof n&&ws(e,t,n)&&(t=n=r),(n=n===r?M:n>>>0)?(e=xa(e))&&("string"==typeof t||null!=t&&!va(t))&&!(t=Qi(t))&&Cn(e)?uo(Hn(e),0,n):e.split(t,n):[]},_r.spread=function(e,t){if("function"!=typeof e)throw new nt(s);return t=null==t?0:Xn(Ra(t),0),Ui(function(n){var r=n[t],i=uo(n,0,t);return r&&Zt(i,r),Wt(e,this,i)})},_r.tail=function(e){var t=null==e?0:e.length;return t?Ki(e,1,t):[]},_r.take=function(e,t,n){return e&&e.length?Ki(e,0,(t=n||t===r?1:Ra(t))<0?0:t):[]},_r.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Ki(e,(t=i-(t=n||t===r?1:Ra(t)))<0?0:t,i):[]},_r.takeRightWhile=function(e,t){return e&&e.length?to(e,as(t,3),!1,!0):[]},_r.takeWhile=function(e,t){return e&&e.length?to(e,as(t,3)):[]},_r.tap=function(e,t){return t(e),e},_r.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new nt(s);return fa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Wc(e,t,{leading:r,maxWait:t,trailing:i})},_r.thru=wc,_r.toArray=Ta,_r.toPairs=Xa,_r.toPairsIn=Qa,_r.toPath=function(e){return na(e)?Qt(e,Vs):ba(e)?[e]:Eo(Js(xa(e)))},_r.toPlainObject=Ca,_r.transform=function(e,t,n){var r=na(e),i=r||sa(e)||Sa(e);if(t=as(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:fa(e)&&ua(o)?yr(St(e)):{}}return(i?Kt:ti)(e,function(e,r,i){return t(n,e,r,i)}),n},_r.unary=function(e){return jc(e,1)},_r.union=pc,_r.unionBy=dc,_r.unionWith=mc,_r.uniq=function(e){return e&&e.length?Zi(e):[]},_r.uniqBy=function(e,t){return e&&e.length?Zi(e,as(t,2)):[]},_r.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?Zi(e,r,t):[]},_r.unset=function(e,t){return null==e||$i(e,t)},_r.unzip=gc,_r.unzipWith=vc,_r.update=function(e,t,n){return null==e?e:eo(e,t,so(n))},_r.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:eo(e,t,so(n),i)},_r.values=Za,_r.valuesIn=function(e){return null==e?[]:bn(e,Ga(e))},_r.without=_c,_r.words=uu,_r.wrap=function(e,t){return Yc(so(t),e)},_r.xor=yc,_r.xorBy=bc,_r.xorWith=Sc,_r.zip=Ec,_r.zipObject=function(e,t){return io(e||[],t||[],Pr)},_r.zipObjectDeep=function(e,t){return io(e||[],t||[],Bi)},_r.zipWith=kc,_r.entries=Xa,_r.entriesIn=Qa,_r.extend=Na,_r.extendWith=Pa,yu(_r,_r),_r.add=Cu,_r.attempt=lu,_r.camelCase=$a,_r.capitalize=eu,_r.ceil=xu,_r.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=Ia(n))==n?n:0),t!==r&&(t=(t=Ia(t))==t?t:0),Hr(Ia(e),t,n)},_r.clone=function(e){return Br(e,f)},_r.cloneDeep=function(e){return Br(e,l|f)},_r.cloneDeepWith=function(e,t){return Br(e,l|f,t="function"==typeof t?t:r)},_r.cloneWith=function(e,t){return Br(e,f,t="function"==typeof t?t:r)},_r.conformsTo=function(e,t){return null==t||Wr(e,t,Wa(t))},_r.deburr=tu,_r.defaultTo=function(e,t){return null==e||e!=e?t:e},_r.divide=Ou,_r.endsWith=function(e,t,n){e=xa(e),t=Qi(t);var i=e.length,o=n=n===r?i:Hr(Ra(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},_r.eq=Zc,_r.escape=function(e){return(e=xa(e))&&ke.test(e)?e.replace(Se,Rn):e},_r.escapeRegExp=function(e){return(e=xa(e))&&Oe.test(e)?e.replace(xe,"\\$&"):e},_r.every=function(e,t,n){var i=na(e)?Jt:Vr;return n&&ws(e,t,n)&&(t=r),i(e,as(t,3))},_r.find=Ic,_r.findIndex=tc,_r.findKey=function(e,t){return sn(e,as(t,3),ti)},_r.findLast=Cc,_r.findLastIndex=nc,_r.findLastKey=function(e,t){return sn(e,as(t,3),ni)},_r.floor=Nu,_r.forEach=xc,_r.forEachRight=Oc,_r.forIn=function(e,t){return null==e?e:$r(e,as(t,3),Ga)},_r.forInRight=function(e,t){return null==e?e:ei(e,as(t,3),Ga)},_r.forOwn=function(e,t){return e&&ti(e,as(t,3))},_r.forOwnRight=function(e,t){return e&&ni(e,as(t,3))},_r.get=Ua,_r.gt=$c,_r.gte=ea,_r.has=function(e,t){return null!=e&&_s(e,t,ai)},_r.hasIn=ja,_r.head=ic,_r.identity=mu,_r.includes=function(e,t,n,r){e=ia(e)?e:Za(e),n=n&&!r?Ra(n):0;var i=e.length;return n<0&&(n=Xn(i+n,0)),ya(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&an(e,t,n)>-1},_r.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Ra(n);return i<0&&(i=Xn(r+i,0)),an(e,t,i)},_r.inRange=function(e,t,n){return t=wa(t),n===r?(n=t,t=0):n=wa(n),li(e=Ia(e),t,n)},_r.invoke=qa,_r.isArguments=ta,_r.isArray=na,_r.isArrayBuffer=ra,_r.isArrayLike=ia,_r.isArrayLikeObject=oa,_r.isBoolean=function(e){return!0===e||!1===e||pa(e)&&si(e)==q},_r.isBuffer=sa,_r.isDate=ca,_r.isElement=function(e){return pa(e)&&1===e.nodeType&&!ga(e)},_r.isEmpty=function(e){if(null==e)return!0;if(ia(e)&&(na(e)||"string"==typeof e||"function"==typeof e.splice||sa(e)||Sa(e)||ta(e)))return!e.length;var t=ms(e);if(t==V||t==ee)return!e.size;if(Os(e))return!bi(e).length;for(var n in e)if(at.call(e,n))return!1;return!0},_r.isEqual=function(e,t){return mi(e,t)},_r.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?mi(e,t,r,n):!!i},_r.isError=aa,_r.isFinite=function(e){return"number"==typeof e&&Jn(e)},_r.isFunction=ua,_r.isInteger=la,_r.isLength=ha,_r.isMap=da,_r.isMatch=function(e,t){return e===t||vi(e,t,ls(t))},_r.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,vi(e,t,ls(t),n)},_r.isNaN=function(e){return ma(e)&&e!=+e},_r.isNative=function(e){if(xs(e))throw new Xe(o);return _i(e)},_r.isNil=function(e){return null==e},_r.isNull=function(e){return null===e},_r.isNumber=ma,_r.isObject=fa,_r.isObjectLike=pa,_r.isPlainObject=ga,_r.isRegExp=va,_r.isSafeInteger=function(e){return la(e)&&e>=-N&&e<=N},_r.isSet=_a,_r.isString=ya,_r.isSymbol=ba,_r.isTypedArray=Sa,_r.isUndefined=function(e){return e===r},_r.isWeakMap=function(e){return pa(e)&&ms(e)==ie},_r.isWeakSet=function(e){return pa(e)&&si(e)==oe},_r.join=function(e,t){return null==e?"":Vn.call(e,t)},_r.kebabCase=nu,_r.last=ac,_r.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=Ra(n))<0?Xn(i+o,0):Qn(o,i-1)),t==t?Un(e,t,o):cn(e,ln,o,!0)},_r.lowerCase=ru,_r.lowerFirst=iu,_r.lt=Ea,_r.lte=ka,_r.max=function(e){return e&&e.length?Yr(e,mu,ci):r},_r.maxBy=function(e,t){return e&&e.length?Yr(e,as(t,2),ci):r},_r.mean=function(e){return hn(e,mu)},_r.meanBy=function(e,t){return hn(e,as(t,2))},_r.min=function(e){return e&&e.length?Yr(e,mu,Ei):r},_r.minBy=function(e,t){return e&&e.length?Yr(e,as(t,2),Ei):r},_r.stubArray=Au,_r.stubFalse=Iu,_r.stubObject=function(){return{}},_r.stubString=function(){return""},_r.stubTrue=function(){return!0},_r.multiply=Pu,_r.nth=function(e,t){return e&&e.length?Ii(e,Ra(t)):r},_r.noConflict=function(){return Ot._===this&&(Ot._=pt),this},_r.noop=bu,_r.now=Uc,_r.pad=function(e,t,n){e=xa(e);var r=(t=Ra(t))?jn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Bo(qn(i),n)+e+Bo(Fn(i),n)},_r.padEnd=function(e,t,n){e=xa(e);var r=(t=Ra(t))?jn(e):0;return t&&r<t?e+Bo(t-r,n):e},_r.padStart=function(e,t,n){e=xa(e);var r=(t=Ra(t))?jn(e):0;return t&&r<t?Bo(t-r,n)+e:e},_r.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),$n(xa(e).replace(Pe,""),t||0)},_r.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ws(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=wa(e),t===r?(t=e,e=0):t=wa(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=er();return Qn(e+o*(t-e+At("1e-"+((o+"").length-1))),t)}return Mi(e,t)},_r.reduce=function(e,t,n){var r=na(e)?$t:dn,i=arguments.length<3;return r(e,as(t,4),n,i,zr)},_r.reduceRight=function(e,t,n){var r=na(e)?en:dn,i=arguments.length<3;return r(e,as(t,4),n,i,Jr)},_r.repeat=function(e,t,n){return t=(n?ws(e,t,n):t===r)?1:Ra(t),Fi(xa(e),t)},_r.replace=function(){var e=arguments,t=xa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},_r.result=function(e,t,n){var i=-1,o=(t=co(t,e)).length;for(o||(o=1,e=r);++i<o;){var s=null==e?r:e[Vs(t[i])];s===r&&(i=o,s=n),e=ua(s)?s.call(e):s}return e},_r.round=Lu,_r.runInContext=e,_r.sample=function(e){return(na(e)?Cr:ji)(e)},_r.size=function(e){if(null==e)return 0;if(ia(e))return ya(e)?jn(e):e.length;var t=ms(e);return t==V||t==ee?e.size:bi(e).length},_r.snakeCase=ou,_r.some=function(e,t,n){var i=na(e)?tn:zi;return n&&ws(e,t,n)&&(t=r),i(e,as(t,3))},_r.sortedIndex=function(e,t){return Ji(e,t)},_r.sortedIndexBy=function(e,t,n){return Vi(e,t,as(n,2))},_r.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Ji(e,t);if(r<n&&Zc(e[r],t))return r}return-1},_r.sortedLastIndex=function(e,t){return Ji(e,t,!0)},_r.sortedLastIndexBy=function(e,t,n){return Vi(e,t,as(n,2),!0)},_r.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Ji(e,t,!0)-1;if(Zc(e[n],t))return n}return-1},_r.startCase=su,_r.startsWith=function(e,t,n){return e=xa(e),n=null==n?0:Hr(Ra(n),0,e.length),t=Qi(t),e.slice(n,n+t.length)==t},_r.subtract=Mu,_r.sum=function(e){return e&&e.length?gn(e,mu):0},_r.sumBy=function(e,t){return e&&e.length?gn(e,as(t,2)):0},_r.template=function(e,t,n){var i=_r.templateSettings;n&&ws(e,t,n)&&(t=r),e=xa(e),t=Pa({},t,i,Xo);var o,s,c=Pa({},t.imports,i.imports,Xo),a=Wa(c),u=bn(c,a),l=0,h=t.interpolate||Ve,f="__p += '",p=et((t.escape||Ve).source+"|"+h.source+"|"+(h===Re?He:Ve).source+"|"+(t.evaluate||Ve).source+"|$","g"),d="//# sourceURL="+(at.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++kt+"]")+"\n";e.replace(p,function(t,n,r,i,c,a){return r||(r=i),f+=e.slice(l,a).replace(Ye,An),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),c&&(s=!0,f+="';\n"+c+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=a+t.length,t}),f+="';\n";var m=at.call(t,"variable")&&t.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(ve,""):f).replace(_e,"$1").replace(ye,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=lu(function(){return Qe(a,d+"return "+f).apply(r,u)});if(g.source=f,aa(g))throw g;return g},_r.times=function(e,t){if((e=Ra(e))<1||e>N)return[];var n=M,r=Qn(e,M);t=as(t),e-=M;for(var i=vn(r,t);++n<e;)t(n);return i},_r.toFinite=wa,_r.toInteger=Ra,_r.toLength=Aa,_r.toLower=function(e){return xa(e).toLowerCase()},_r.toNumber=Ia,_r.toSafeInteger=function(e){return e?Hr(Ra(e),-N,N):0===e?e:0},_r.toString=xa,_r.toUpper=function(e){return xa(e).toUpperCase()},_r.trim=function(e,t,n){if((e=xa(e))&&(n||t===r))return e.replace(Ne,"");if(!e||!(t=Qi(t)))return e;var i=Hn(e),o=Hn(t);return uo(i,En(i,o),kn(i,o)+1).join("")},_r.trimEnd=function(e,t,n){if((e=xa(e))&&(n||t===r))return e.replace(Le,"");if(!e||!(t=Qi(t)))return e;var i=Hn(e);return uo(i,0,kn(i,Hn(t))+1).join("")},_r.trimStart=function(e,t,n){if((e=xa(e))&&(n||t===r))return e.replace(Pe,"");if(!e||!(t=Qi(t)))return e;var i=Hn(e);return uo(i,En(i,Hn(t))).join("")},_r.truncate=function(e,t){var n=w,i=R;if(fa(t)){var o="separator"in t?t.separator:o;n="length"in t?Ra(t.length):n,i="omission"in t?Qi(t.omission):i}var s=(e=xa(e)).length;if(Cn(e)){var c=Hn(e);s=c.length}if(n>=s)return e;var a=n-jn(i);if(a<1)return i;var u=c?uo(c,0,a).join(""):e.slice(0,a);if(o===r)return u+i;if(c&&(a+=u.length-a),va(o)){if(e.slice(a).search(o)){var l,h=u;for(o.global||(o=et(o.source,xa(Be.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;u=u.slice(0,f===r?a:f)}}else if(e.indexOf(Qi(o),a)!=a){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+i},_r.unescape=function(e){return(e=xa(e))&&Ee.test(e)?e.replace(be,Bn):e},_r.uniqueId=function(e){var t=++ut;return xa(e)+t},_r.upperCase=cu,_r.upperFirst=au,_r.each=xc,_r.eachRight=Oc,_r.first=ic,yu(_r,function(){var e={};return ti(_r,function(t,n){at.call(_r.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),_r.VERSION="4.17.15",Kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){_r[e].placeholder=_r}),Kt(["drop","take"],function(e,t){Er.prototype[e]=function(n){n=n===r?1:Xn(Ra(n),0);var i=this.__filtered__&&!t?new Er(this):this.clone();return i.__filtered__?i.__takeCount__=Qn(n,i.__takeCount__):i.__views__.push({size:Qn(n,M),type:e+(i.__dir__<0?"Right":"")}),i},Er.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Kt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==C||3==n;Er.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:as(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Kt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Er.prototype[e]=function(){return this[n](1).value()[0]}}),Kt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Er.prototype[e]=function(){return this.__filtered__?new Er(this):this[n](1)}}),Er.prototype.compact=function(){return this.filter(mu)},Er.prototype.find=function(e){return this.filter(e).head()},Er.prototype.findLast=function(e){return this.reverse().find(e)},Er.prototype.invokeMap=Ui(function(e,t){return"function"==typeof e?new Er(this):this.map(function(n){return pi(n,e,t)})}),Er.prototype.reject=function(e){return this.filter(Jc(as(e)))},Er.prototype.slice=function(e,t){e=Ra(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Er(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=Ra(t))<0?n.dropRight(-t):n.take(t-e)),n)},Er.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Er.prototype.toArray=function(){return this.take(M)},ti(Er.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=_r[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(_r.prototype[t]=function(){var t=this.__wrapped__,c=i?[1]:arguments,a=t instanceof Er,u=c[0],l=a||na(t),h=function(e){var t=o.apply(_r,Zt([e],c));return i&&f?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(a=l=!1);var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,m=a&&!p;if(!s&&l){t=m?t:new Er(this);var g=e.apply(t,c);return g.__actions__.push({func:wc,args:[h],thisArg:r}),new Sr(g,f)}return d&&m?e.apply(this,c):(g=this.thru(h),d?i?g.value()[0]:g.value():g)})}),Kt(["pop","push","shift","sort","splice","unshift"],function(e){var t=rt[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);_r.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(na(i)?i:[],e)}return this[n](function(n){return t.apply(na(n)?n:[],e)})}}),ti(Er.prototype,function(e,t){var n=_r[t];if(n){var r=n.name+"";at.call(ur,r)||(ur[r]=[]),ur[r].push({name:t,func:n})}}),ur[Fo(r,g).name]=[{name:"wrapper",func:r}],Er.prototype.clone=function(){var e=new Er(this.__wrapped__);return e.__actions__=Eo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Eo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Eo(this.__views__),e},Er.prototype.reverse=function(){if(this.__filtered__){var e=new Er(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Er.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=na(e),r=t<0,i=n?e.length:0,o=gs(0,i,this.__views__),s=o.start,c=o.end,a=c-s,u=r?c:s-1,l=this.__iteratees__,h=l.length,f=0,p=Qn(a,this.__takeCount__);if(!n||!r&&i==a&&p==a)return no(e,this.__actions__);var d=[];e:for(;a--&&f<p;){for(var m=-1,g=e[u+=t];++m<h;){var v=l[m],_=v.iteratee,y=v.type,b=_(g);if(y==x)g=b;else if(!b){if(y==C)continue e;break e}}d[f++]=g}return d},_r.prototype.at=Rc,_r.prototype.chain=function(){return Tc(this)},_r.prototype.commit=function(){return new Sr(this.value(),this.__chain__)},_r.prototype.next=function(){this.__values__===r&&(this.__values__=Ta(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},_r.prototype.plant=function(e){for(var t,n=this;n instanceof br;){var i=Qs(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},_r.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Er){var t=e;return this.__actions__.length&&(t=new Er(this)),(t=t.reverse()).__actions__.push({func:wc,args:[fc],thisArg:r}),new Sr(t,this.__chain__)}return this.thru(fc)},_r.prototype.toJSON=_r.prototype.valueOf=_r.prototype.value=function(){return no(this.__wrapped__,this.__actions__)},_r.prototype.first=_r.prototype.head,Pt&&(_r.prototype[Pt]=function(){return this}),_r}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ot._=Kn,define(function(){return Kn})):Pt?((Pt.exports=Kn)._=Kn,Nt._=Kn):Ot._=Kn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],DataSource:[function(e,t,n){"use strict";cc._RF.push(t,"7640ePKc+1ABKpHzghnCzD1","DataSource"),cc.Class({extends:cc.Component,properties:{},start:function(){},loadScore:function(e){},submitScore:function(e,t){}}),cc._RF.pop()},{}],IntroScene:[function(e,t,n){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","IntroScene");var r=e("storage"),i=e("global"),o=(e("common"),e("roomEntry"));cc.Class({extends:cc.Component,properties:{loading:cc.Prefab,inputNameDialog:cc.Prefab,hintLabel:cc.Label},onLoad:function(){cc.debug._resetDebugSetting(cc.debug.DebugMode.INFO),cc.log(cc.sys)},start:function(){r.loadUserInfo(),r.loadGame(),cc.log(r.game),cc.audioEngine.setEffectsVolume(void 0===r.game.effectVolume?1:r.game.effectVolume),cc.audioEngine.setMusicVolume(void 0===r.game.musicVolume?1:r.game.musicVolume),cc.sys.platform===cc.sys.WECHAT_GAME?(this.hintLabel.node.active=!1,this.getWXUserInfo(this.startGame,this)):(this.node.on("touchend",this.onTouchEnded,this),this.node.on(cc.SystemEvent.EventType.KEY_DOWN,this.onTouchEnded,this))},onDestroy:function(){this.node.off("touchend",this.onTouchEnded,this),this.node.off(cc.SystemEvent.EventType.KEY_DOWN,this.onTouchEnded,this)},onKeyDown:function(e){},onTouchBegan:function(e,t){return!0},onTouchMoved:function(e,t){},onTouchEnded:function(e){r.userInfo?(cc.log("Storage.userInfo"+JSON.stringify(r.userInfo)),this.startGame()):this.getUserNickname(function(e){this.startGame()},this)},getWXUserInfo:function(e,t){var n=this,i=wx.getSystemInfoSync();this.wxUserInfoButton=wx.createUserInfoButton({type:"text",text:"\u70b9\u51fb\u5f00\u59cb",style:{left:i.windowWidth/2-200,top:3*i.windowHeight/4-100,width:400,height:200,lineHeight:200,backgroundColor:"#000000",color:"#ffffff",textAlign:"center",fontSize:28,borderRadius:4}}),this.wxUserInfoButton.onTap(function(i){if(console.log(i),i){var o={nickname:i.userInfo.nickName,avatarUrl:i.userInfo.avatarUrl};r.saveUserInfo(o),n.wxUserInfoButton.destroy(),e.call(t,o)}})},getUserNickname:function(e,t){var n=cc.instantiate(this.inputNameDialog);n.getComponent("inputNameDialog").setCallback(function(n){var i={nickname:n};r.saveUserInfo(i),e.call(t,n)},this),this.node.addChild(n)},startGame:function(){r.loadMoney(),i.currentHeroType=r.game.heroType||"normal",i.selectedPerk=r.game.perks||[],r.loadUnlock(),r.loadStatistics(),r.loadRewardTaken(),r.loadAchievement(),r.loadProgress(),r.loadTutorial(),cc.log(r.tutorial);var e=cc.instantiate(this.loading);e.x=e.y=0,this.node.addChild(e),cc.loader.loadResDir("Texture/Perk",cc.SpriteFrame,function(e,t){cc.loader.loadResDir("Texture/Unlock",cc.SpriteFrame,function(e,t){cc.loader.loadResDir("Texture/Skill",cc.SpriteFrame,function(e,t){i.loadRoomEntry(o.normal),cc.director.loadScene("MenuScene")})})})}}),cc._RF.pop()},{common:"common",global:"global",roomEntry:"roomEntry",storage:"storage"}],LabelLocalized:[function(e,t,n){"use strict";cc._RF.push(t,"e4f88adp3hERoJ48DZ2PSAl","LabelLocalized");var r=e("i18n");cc.Class({extends:cc.Label,properties:{textKey:{default:"TEXT_KEY",multiline:!0,tooltip:"Enter i18n key here",notify:function(){this.string=this.localizedString}},localizedString:{override:!0,tooltip:"Here shows the localized string of Text Key",get:function(){return r.t(this.textKey)},set:function(e){this.textKey=e}}},onLoad:function(){this.localizedString&&(this.string=this.localizedString)}}),cc._RF.pop()},{i18n:"i18n"}],LeanCloudDataSource:[function(e,t,n){"use strict";cc._RF.push(t,"10ac8nKDqpNx7A+3uqt7MDL","LeanCloudDataSource");var r=e("DataSource"),i=e("leancloud-storage/dist/av-weapp-min.js");cc.Class({extends:r,properties:{},ctor:function(){i.init({appId:"Eiq6lDsGb7LVEKxRHPCNv1QP-gzGzoHsz",appKey:"n3idGwvxn640x7suIE6Hrzso"})},start:function(){},loadScore:function(e){var t=new i.Query("ScoreBoard");t.descending("score"),t.limit(e.limit||20),t.find().then(function(t){if(e.success){var n=[];t.forEach(function(e){var t=e.toJSON();if(t.detail)try{t.detail=JSON.parse(t.detail)}catch(e){t.detail=null}t.time=new Date(t.createdAt).toTimeString(),n.push(t)},this),e.success.call(e.context,n)}}).catch(function(t){e.error&&e.error.call(e.context,t)})},submitScore:function(e,t){var n=new(i.Object.extend("ScoreBoard"));n.set("nickname",e.nickname),n.set("turn",e.turn),n.set("score",e.score),n.set("avatarUrl",e.avatarUrl),n.set("platform",cc.sys.platform),n.set("detail",JSON.stringify(e.detail)),n.save().then(function(){t.success&&t.success.call(t.context)},function(e){t.error&&t.error.call(t.context,e)})}}),cc._RF.pop()},{DataSource:"DataSource","leancloud-storage/dist/av-weapp-min.js":2}],MenuScene:[function(e,t,n){"use strict";cc._RF.push(t,"c8377cOx65K4a5IU/Skit0l","MenuScene");var r=e("global"),i=e("common"),o=e("storage");e("effect"),e("perkEntry");cc.Class({extends:cc.Component,properties:{loading:cc.Prefab},onLoad:function(){o.loadUnlock(),r.MenuScene=this},start:function(){r.reset()},starGame:function(){r.ModeSelectScene=null,i.loadScene("RoomScene",this.node,this.loading)},loadMovablePrefabs:function(){}}),cc._RF.pop()},{common:"common",effect:"effect",global:"global",perkEntry:"perkEntry",storage:"storage"}],RoomScene:[function(e,t,n){"use strict";cc._RF.push(t,"eb4a2wB1kJGop2H1CRV4s9P","RoomScene");var r=e("Room"),i=(e("skill"),e("common")),o=e("global"),s=e("choiceFactory"),c=e("storage"),a=e("wxAdProvider"),u={38:0,39:1,40:2,37:3};cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label,turnLabel:cc.Label,headLayout:cc.Node,moneyLabel:cc.Label,lifeLabel:cc.Label,hpBar:cc.ProgressBar,levelLabel:cc.Label,expLabel:cc.Label,room:r,skillLayout:cc.Layout,skillSlotFrame:cc.SpriteFrame,skillSlotLayout:cc.Layout,skillPrefab:cc.Prefab,effectLayer:cc.Node,dyingIndicator:cc.Sprite,exitButton:cc.Button,score:{default:"",notify:function(e){e!=this.score&&(this.scoreLabel.string=this.score)},visible:!1},star:{default:0,notify:function(e){e!=this.star&&(c.saveMoney(this.star),this.moneyLabel.string=this.star)},visible:!1},descDialog:cc.Prefab,gameOverDialog:cc.Prefab,dieDialog:cc.Prefab,skillDescDialog:cc.Prefab,heroDescDialog:cc.Prefab,shiftArrowSprite:cc.Sprite,exitDialog:cc.Prefab,loading:cc.Prefab,music:{type:cc.AudioClip,default:null},bossMusic:{type:cc.AudioClip,default:null},stepSound:{type:cc.AudioClip,default:null},tutorial:cc.Prefab},onLoad:function(){o.currentRoomScene=this,o.currentRoom=this.room,o.loading=this.loading,this.skill=[],this.initEvent(),this.initChoicePool(),this.initSkill()},onDestroy:function(){this.node.off("touchstart"),this.node.off("touchmove"),this.node.off("touchend"),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),o.currentRoom=null,o.currentRoomScene=null,cc.audioEngine.stopMusic()},start:function(){this.score=0,this.star=c.star,cc.audioEngine.playMusic(this.music,!0);var e=new a;e.initBanner(),e.showBanner()},gainScore:function(e){o.roomEntry.isTutorial||(this.score=Math.round(this.score+e))},gainStar:function(e){this.star+=e},initEvent:function(){var e=this;this.node.on("touchstart",function(t){if(e.room.isAcceptInput()){var n=t.getLocation();if(e.room.node.getBoundingBoxToWorld().contains(n))return e.prevX=n.x,e.prevY=n.y,!0}}),this.node.on("touchmove",function(t){if(e.room.isAcceptInput()){var n=t.getLocation();if(e.room.node.getBoundingBoxToWorld().contains(n)){var r=n.x,i=n.y;if(null===e.prevX)return e.prevX=n.x,void(e.prevY=n.y);var o=r-e.prevX,s=i-e.prevY;s>50&&Math.abs(o)<Math.abs(s)?(e.shiftArrowSprite.node.opacity=100,e.shiftArrowSprite.node.rotation=0):s<-50&&Math.abs(o)<Math.abs(s)?(e.shiftArrowSprite.node.opacity=100,e.shiftArrowSprite.node.rotation=180):o>50&&Math.abs(s)<Math.abs(o)?(e.shiftArrowSprite.node.opacity=100,e.shiftArrowSprite.node.rotation=90):o<-50&&Math.abs(s)<Math.abs(o)?(e.shiftArrowSprite.node.opacity=100,e.shiftArrowSprite.node.rotation=270):e.shiftArrowSprite.node.opacity=0}}}),this.node.on("touchend",function(t){if(e.shiftArrowSprite.node.opacity=0,e.room.isAcceptInput()){var n=t.getLocation();if(!e.room.node.getBoundingBoxToWorld().contains(n))return;var r=n.x,o=n.y,s=r-e.prevX,c=o-e.prevY;c>50&&Math.abs(s)<Math.abs(c)?e.room.shift(i.DIRECTION_UP):c<-50&&Math.abs(s)<Math.abs(c)?e.room.shift(i.DIRECTION_DOWN):s>50&&Math.abs(c)<Math.abs(s)?e.room.shift(i.DIRECTION_RIGHT):s<-50&&Math.abs(c)<Math.abs(s)?e.room.shift(i.DIRECTION_LEFT):e.room.click(r,o),e.prevX=e.prevY=null}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){if(e.room.isAcceptInput()){var n=t.keyCode;void 0!==u[n]&&e.room.shift(u[n])}}),this.room.node.on("PHASE:turnStart",function(){for(var t in e.skills)e.skills[t].getComponent("skill").onTurnStart()}),this.node.on("boss-generate",function(){cc.audioEngine.playMusic(e.bossMusic,!0),c.tutorial.off||c.tutorial.bossGenerate||e.scheduleOnce(function(){var e=cc.instantiate(o.currentRoomScene.tutorial);o.currentRoomScene.node.addChild(e),e.getComponent("tutorial").setContent({tutorialId:"bossGenerate",text:"boss\u4e0d\u4f1a\u88ab\u4f60\u4e00\u51fb\u6740\u6b7b\n\u5982\u679c\u666e\u901a\u653b\u51fb\u51fb\u4e2d\u5b83\u7684\u5f31\u70b9\uff0c\u5b83\u5c31\u4e0d\u4f1a\u5728\u672c\u56de\u5408\u653b\u51fb\u4f60\u3002",pause:!0})},o.GENERATE_TIME)}),this.node.on("boss-die",function(){cc.audioEngine.playMusic(e.music,!0)})},initRules:function(){},initChoicePool:function(){o.currentChoicePool=[],o.currentChoicePool.push(s.getScore({number:500})),o.basicSkill.forEach(function(e){o.currentChoicePool.push(s.getSkill({name:e,minSkillCount:"coolingSkill"==e?1:0}))},this),o.MANY_SKILL?["normal","cleric","wizard","thief"].forEach(function(e){c.unlocked[e]&&(o.heroBasicSkill[e].forEach(function(e){o.currentChoicePool.push(s.getSkill({name:e,minSkillCount:0}))},this),o.heroUnlockableSkill[e].forEach(function(e){c.unlocked[e]&&o.currentChoicePool.push(s.getSkill({name:e,minSkillCount:0}))},this))},this):(o.heroBasicSkill[o.currentHeroType].forEach(function(e){o.currentChoicePool.push(s.getSkill({name:e,minSkillCount:0}))},this),o.heroUnlockableSkill[o.currentHeroType].forEach(function(e){c.unlocked[e]&&o.currentChoicePool.push(s.getSkill({name:e,minSkillCount:0}))},this))},initSkill:function(){this.skills={};for(var e=c.progress.maxSkill[o.currentHeroType]||2,t=0;t<e;t++){var n=new cc.Node;n.addComponent(cc.Sprite),n.getComponent(cc.Sprite).spriteFrame=this.skillSlotFrame,n.y=0,n.width=120,n.height=140,this.skillSlotLayout.node.addChild(n)}},gainSkill:function(e){var t=cc.instantiate(this.skillPrefab);return t.addComponent(e),t.y=0,t.x=0,this.skills[e]=t,t.getComponent("skill").isPassive?(t.removeComponent(cc.Node),t.removeComponent(cc.Layout),t.getComponent("skill").onGain()):(this.skillLayout.node.addChild(t),t.getComponent("skill").onGain(),this.room.hero.getComponent("hero").getStatus("forbid")&&setTimeout(function(){t.getComponent("skill").forbid=!0},1)),t.getComponent("skill")},getSkill:function(e){return this.skills[e]},activeSkillCount:function(){return this.skillLayout.node.children.length},forEachSkill:function(e,t){for(var n in this.skills)e.call(t,this.skills[n].getComponent("skill"))},forEachActiveSkill:function(e,t){for(var n in this.skills){var r=this.skills[n].getComponent("skill");r.isPassive||e.call(t,r)}},gameOver:function(e){var t=cc.instantiate(this.gameOverDialog);t.getComponent("gameOverDialog").setReason(e),o.currentRoomScene.node.addChild(t)},exitGame:function(){if(o.currentRoom.isAcceptInput()){var e=cc.instantiate(this.exitDialog);this.node.addChild(e)}},dying:function(e){if(e){if(this.dyingIndicator.node.active)return;this.dyingIndicator.node.active=!0,this.dyingIndicator.node.stopAllActions(),this.dyingIndicator.node.opacity=0,this.dyingIndicator.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,55).easing(cc.easeIn(1)),cc.fadeTo(1,0).easing(cc.easeOut(1)))))}else{if(!this.dyingIndicator.node.active)return;this.dyingIndicator.node.stopAllActions(),this.dyingIndicator.node.active=!1}}}),cc._RF.pop()},{Room:"Room",choiceFactory:"choiceFactory",common:"common",global:"global",skill:"skill",storage:"storage",wxAdProvider:"wxAdProvider"}],Room:[function(e,t,n){"use strict";cc._RF.push(t,"a6d5aPzj91M/YZz7JfwFJi+","Room");var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(e("TileSet"),e("tile")),o=e("movable"),s=e("enemy"),c=e("common"),a=e("enemyFactory"),u=e("tutorialEnemyFactory"),l=e("itemFactory"),h=e("global"),f=e("storage"),p=e("roomEntry");cc.Class({extends:cc.Component,properties:{tilePrefabs:[cc.Prefab],movablePrefabs:[cc.Prefab],starPrefab:cc.Prefab,cloudPrefab:cc.Prefab,arrowPrefab:cc.Prefab,stonePrefab:cc.Prefab,fireballPrefab:cc.Prefab,statusPrefabs:[cc.Prefab],turn:{default:1,notify:function(e){h.currentRoomScene.turnLabel.string=this.turn}},_phase:{default:"turnStart",notify:function(e){cc.log("PHASE:"+this._phase),this.node.emit("PHASE:"+this._phase)}}},onLoad:function(){this._acceptInput=0,h.currentRoomScene.turnLabel.string=this.turn,this.initMovablePrefabMap(),this.initTilePrefabMap(),this.initGenEnemyStrategy(),this.initUI(),this.initTiles(),this.initEvents(),this.initMovableMap(),this.initItem(),this.initStatusPrefabMap(),this.initMovable(),this.initTutorial(),this.scheduleOnce(this.turnStart,.1)},initMovablePrefabMap:function(){this.movablePrefabMap={};for(var e=0;e<this.movablePrefabs.length;e++)this.movablePrefabMap[this.movablePrefabs[e].name]=this.movablePrefabs[e]},initMovableMap:function(){this.__movableMap=[];for(var e=0;e<this.width;e++)this.__movableMap[e]||this.__movableMap.push([])},initTilePrefabMap:function(){this.tileMap={};for(var e=0;e<this.tilePrefabs.length;e++)this.tileMap[this.tilePrefabs[e].name]=this.tilePrefabs[e]},initStatusPrefabMap:function(){this.statusMap={};for(var e=0;e<this.statusPrefabs.length;e++)this.statusMap[this.statusPrefabs[e].name]=this.statusPrefabs[e]},initUI:function(){h.roomEntry.hideHead?(h.currentRoomScene.headLayout.active=!1,h.currentRoomScene.moneyLabel.node.active=!1):(h.currentRoomScene.headLayout.active=!0,h.currentRoomScene.moneyLabel.node.active=!0),h.roomEntry.hideSkill?(h.currentRoomScene.skillSlotLayout.node.active=!1,h.currentRoomScene.skillLayout.node.active=!1):(h.currentRoomScene.skillSlotLayout.node.active=!0,h.currentRoomScene.skillLayout.node.active=!0)},initTiles:function(){this._movables=[];var e=h.roomEntry.tileSet;if(e){this.__tiles=[],this.width=e.length,this.height=0;for(var t=0;t<this.width;t++)this.__tiles[t]||this.__tiles.push([]);for(var n=0;n<this.width;n++)if(e[n]){var r=e[n].length;this.height<r&&(this.height=r);for(var o=0;o<r;o++){var s,c=e[n][o];if(c)this.tileMap[c.type]&&(s=cc.instantiate(this.tileMap[c.type]),this.node.addChild(s),s.setPosition(n*s.width-(this.width-1)*h.TILE_WIDTH/2,o*s.height-(this.height-1)*h.TILE_HEIGHT/2),(s=s.getComponent(i)).type=c.type,s.subtype=c.subtype,s.x=n,s.y=o,this.__tiles[n][o]=s,c.status&&c.status.forEach(function(e){s.gainStatus(e.name,e.amount,e.extra)},this))}}var a=Math.max(this.width,this.height),u=(cc.winSize.width-2*h.ROOM_PADDING)/((a-2)*h.TILE_WIDTH);this.node.scaleX=u,this.node.scaleY=u,this.corners=[{x:1,y:1},{x:1,y:this.width-2},{x:this.height-2,y:this.width-2},{x:this.height-2,y:1}]}},click:function(e,t){h.roomEntry.isTutorial},getTile:function(e,t){e instanceof Object&&(t=e.y,e=e.x);var n=this.__tiles;return n[e]?n[e][t]:null},getMovableByPosition:function(e,t){return e instanceof Object&&(t=e.y,e=e.x),this.__movableMap[e]?this.__movableMap[e][t]:(cc.error("__movableMap x:"+e+" y:"+t+" out of bound"),null)},getMovableByTile:function(e){return e?this.getMovableByPosition(e.x,e.y):null},addMovable:function(e,t,n){var r=this;t instanceof Object&&(n=t.y,t=t.x),e.setPosition(t*h.TILE_WIDTH-(this.width-1)*h.TILE_WIDTH/2,n*h.TILE_WIDTH-(this.height-1)*h.TILE_WIDTH/2),this.node.addChild(e),(e=e.getComponent(o)).setPositionInRoom(t,n),e.positions.forEach(function(t){r.__movableMap[t.x]?r.__movableMap[t.x][t.y]=e:cc.error("__movableMap x:"+t.x+" y:"+t.x+" out of bound")}),this._movables.push(e)},removeMovable:function(e){var t=this;e.positions.forEach(function(n){t.__movableMap[n.x][n.y]===e&&delete t.__movableMap[n.x][n.y]});var n=this._movables.indexOf(e);-1!==n?this._movables.splice(n,1):cc.warn("Cant find movable in this._movables"),e.destroy()},foreachMovable:function(e,t){this._movables.forEach(e,t)},filterMovable:function(e,t){return this._movables.filter(e,t)},foreachTile:function(e,t){for(var n=0;n<this.width;n++)for(var r=0;r<this.height;r++){var i=this.getTile(n,r);i&&e.call(t,i)}},filterTile:function(e,t){for(var n=[],r=0;r<this.width;r++)for(var i=0;i<this.height;i++){var o=this.getTile(r,i);o&&e.call(t,o)&&n.push(o)}return n},shift:function(e){var t=this;this.unschedule(this.turnTimeout),this._phase="movePhase";var n=this._realShift(e);this.scheduleOnce(function(){t.disappearBigList=[],t.calculateDisappear(),t.resolveDisappear()},h.STEP_TIME*n+.02)},checkType:function(e,t,n){var r=this;e.type!==t||e.isChecked||(n||(n=[],this.disappearBigList.push(n)),n.push(e),e.isChecked=!0,e.positions.forEach(function(e){c.INCREMENTS.forEach(function(i){var o=e.x+i.x,s=e.y+i.y,c=r.getMovableByPosition(o,s);c&&r.checkType(c,t,n)})}))},calculateDisappear:function(){var e=this;this.disappearBigList=[],this.foreachMovable(function(e){e.isChecked=!1}),this.foreachMovable(function(t){e.checkType(t,t.type,null)})},resolveDisappear:function(){var e=this;this._phase="resolveDisappear",this.delayPhaseTime=0,this.disappearBigList.forEach(function(t){t.length>=h.DISAPPEAR_THRESHOLD&&t.forEach(function(t){e.removeMovable(t)})}),this.scheduleOnce(function(){e.turnEnd()},this.delayPhaseTime)},setAcceptInput:function(e){e?this._acceptInput++:this._acceptInput--},isAcceptInput:function(){return this._acceptInput>0},_realShift:function(e){var t=this;this.setAcceptInput(!1);for(var n=0,r=[],i=0;i<this.width;i++)r[i]||r.push([]);return this._movables.forEach(function(e){(e=e.getComponent(o)).positions.forEach(function(t){r[t.x][t.y]=e})}),this._movables.forEach(function(e){(e=e.getComponent(o))._step=100,e._edgeCalculated=0,e._shiftResult=c.SHIFT_RESULT_NORMAL,e._movedThisRound=!1}),c.traverseMap(r,this.width,this.height,c.REVERSE_DIRECTIONS[e],function(i,s,a){if(!(i=i.getComponent(o))._movedThisRound&&i.isEdgePosition(e,s,a)){var u=0;if(i.isMovable(e)){var l=s,h=a,f=c.INCREMENTS[e];do{l+=f.x,h+=f.y;var p=t.getTile(l,h);if(!p)break;if(!p.isPassable(i))break;var d=r[l][h];if(d){if(d.canBeMergedBy(i,e)){u++,i._shiftResult=c.SHIFT_RESULT_MERGE_AND_DISAPPEAR;break}if(d.canMergeTo(i,e)){u++,i._shiftResult=c.SHIFT_RESULT_MERGE_AND_STAY;break}break}if(u++,p.isCapture(i))break}while(u<i.moveStep)}if(i._step>u&&(i._step=u),i._edgeCalculated++,i.face=e,0===i._step)i._movedThisRound=!0;else if(i._edgeCalculated>=i.getEdgePositionLength(e)){if(i._step>n&&(n=i._step),i._movedThisRound=!0,i.positions.forEach(function(e){r[e.x][e.y]=null}),i._shiftResult!==c.SHIFT_RESULT_MERGE_AND_DISAPPEAR){var m=i._step;i.positions.forEach(function(t){var n=t.x+m*c.INCREMENTS[e].x,o=t.y+m*c.INCREMENTS[e].y;r[n][o]=i})}var g={direction:e,step:i._step,result:i._shiftResult};i.move(g)}}}),n},passCheckCondition:function(){return!1},initEvents:function(){this.node.on("hero-attack-complete",function(){this.passCheckCondition()||this.hero.getComponent("hero").checkLevelUp()||this.node.emit("enemy-attack-start")},this),this.node.on("enemy-attack-start",function(){this.enemyAttack()},this),this.node.on("enemy-attack-complete",function(){this.passCheckCondition()||this.turnEnd()},this)},turnEnd:function(){var e=this;this._phase="turnEnd",this.delayPhaseTime=0,this._movables.forEach(function(e){e.onTurnEnd()},this),this.foreachTile(function(e){e.onTurnEnd()},this),f.saveStatistics(),this.delayPhaseTime?this.scheduleOnce(function(){e.afterTurnEnd()},this.delayPhaseTime):this.afterTurnEnd()},afterTurnEnd:function(){if(h.exit){var e=c.INCREMENTS[h.exitDirection];return this.hero.getComponent("hero").face=h.exitDirection,cc.audioEngine.playEffect(h.currentRoomScene.stepSound,!1),void this.hero.runAction(cc.sequence(cc.moveBy(h.STEP_TIME,h.TILE_WIDTH*e.x,h.TILE_HEIGHT*e.y),cc.callFunc(function(){this.node.removeAllChildren(),h.roomEntry.nextRoom&&h.loadRoomEntry(p[h.roomEntry.nextRoom]),this.initUI(),this.initTiles(),this.initMovableMap(),this.initMovable(),this.initTutorial(),this.scheduleOnce(this.turnStart,.1)},this)))}h.roomEntry.isTutorial||(this.turn++,this.enemyFactory.maintain(this.turn)),this.turnStart()},setDelayPhaseTime:function(e){this.delayPhaseTime=Math.max(this.delayPhaseTime,e)},initHero:function(){var e,t=this;(e=cc.instantiate(this.movablePrefabMap.hero)).getComponent("hero").subtype=h.currentHeroType,this.hero=e,this.addMovable(this.hero,h.roomEntry.initHero.position.x,h.roomEntry.initHero.position.y),h.roomEntry.initHero.skill&&h.roomEntry.initHero.skill.forEach(function(e){var t=1,n=0,i=!1,o=e;"object"===(void 0===e?"undefined":r(e))&&(t=e.level||t,n=e.countDown||n,i=e.forbid||i,o=e.name),h.currentRoomScene.gainSkill(o).initProperties(t,n,i)},this),h.roomEntry.initHero.status&&h.roomEntry.initHero.status.length>0&&setTimeout(function(){h.roomEntry.initHero.status.forEach(function(e){var t=e,n=-1,i=null;"object"===(void 0===e?"undefined":r(e))&&(n=e.duration||n,i=e.extra,t=e.name),this.hero.getComponent("hero").gainStatus(t,n,i)},t)},10)},initMovable:function(){h.roomEntry.initMovable&&h.roomEntry.initMovable.forEach(function(e){e.isEnemy||e.isItem&&this.itemFactory.generateOneItem(e.position,e.type,e.level||1)},this)},initGenEnemyStrategy:function(){h.roomEntry.isTutorial?this.enemyFactory=new u:this.enemyFactory=new a},initItem:function(){this.itemFactory=new l},turnStart:function(){this._phase="turnStart",this._movables.forEach(function(e){e.onTurnStart()},this),this.foreachTile(function(e){e.onTurnStart()},this),this.generateEnemy()},generateEnemy:function(){this._phase="generateEnemy",this.itemFactory.generateItemOnTurnStar(),h.currentRoom.afterGenEnemy()},turnTimeout:function(){this.setAcceptInput(!1),this.unschedule(this.turnTimeout),this.turnEnd()},afterGenEnemy:function(){this._phase="waitUserInput",this.setAcceptInput(!0),this.schedule(this.turnTimeout,h.TURN_TIMEOUT)},heroAttack:function(){this._phase="heroAttack",this.delayPhaseTime=0,this.foreachMovable(function(e){!e.getComponent("hero")&&e.beforeHeroNormalAttack&&e.beforeHeroNormalAttack()},this),this.hero.getComponent("hero").normalAttack()},getDrawPosition:function(e,t){return e instanceof Object&&(t=e.y,e=e.x),{x:e*h.TILE_WIDTH-(this.width-1)*h.TILE_WIDTH/2,y:t*h.TILE_HEIGHT-(this.height-1)*h.TILE_HEIGHT/2}},enemyAttack:function(){this._phase="enemyAttack";var e=!1;this.foreachMovable(function(t){var n=t.getComponent("enemy");n&&(n.canAttack(this.hero.getComponent("hero"))?(e=!0,n.attackHero(this.hero.getComponent("hero"))):n.passAttack())},this),e||(cc.log("PHASE:enemyAttack skipped"),this.node.emit("enemy-attack-complete",this))},checkAllEnemyAttacked:function(){c.all(this._movables,function(e){return!e.getComponent(s)||e.getComponent(s).attackOver},this)&&this.node.emit("enemy-attack-complete",this)},initTutorial:function(){if(!f.tutorial.off){"tutorial1"===h.roomEntry.name?this.node.on("PHASE:waitUserInput",function e(){var t=cc.instantiate(h.currentRoomScene.tutorial);h.currentRoom.node.addChild(t),t.getComponent("tutorial").setContent({tutorialId:"userInput",text:"",finger:!0,fingerDirection:1}),this.node.off("PHASE:waitUserInput",e,this)},this):"tutorial2"===h.roomEntry.name&&(cc.log("tutorial2"),this.node.on("PHASE:waitUserInput",function e(){var t=cc.instantiate(h.currentRoomScene.tutorial);h.currentRoom.node.addChild(t),t.getComponent("tutorial").setContent({tutorialId:"userInput2",text:"",finger:!0,fingerDirection:0}),this.node.off("PHASE:waitUserInput",e,this)},this))}}}),cc._RF.pop()},{TileSet:"TileSet",common:"common",enemy:"enemy",enemyFactory:"enemyFactory",global:"global",itemFactory:"itemFactory",movable:"movable",roomEntry:"roomEntry",storage:"storage",tile:"tile",tutorialEnemyFactory:"tutorialEnemyFactory"}],ScoreBoardScene:[function(e,t,n){"use strict";cc._RF.push(t,"c27d8JFJ4hPXqXSzo9ToB8+","ScoreBoardScene");var r=e("global"),i=e("common"),o=(e("storage"),e("LeanCloudDataSource"));cc.Class({extends:cc.Component,properties:{scoreScroll:cc.ScrollView,loading:cc.Prefab},start:function(){r.dataSource||(r.dataSource=new o),this.scoreList=[],this.fetchData()},fetchData:function(){r.dataSource.loadScore({success:function(e){cc.log(e),this.scoreList=e;for(var t=0;t<this.scoreList.length;t++)this.scoreList[t].itemID=t;this.initScoreBoard()},error:function(e){cc.log("Error!!!"),cc.log(e)},context:this})},initScoreBoard:function(){this.scoreScroll.getComponent("listCtrl").setDataset(this.scoreList),this.scoreScroll.getComponent("listCtrl").initialize()},refresh:function(){this.unlockScroll.getComponent("listCtrl").setDataset(this.scoreList),this.unlockScroll.getComponent("listCtrl").initialize()},back:function(){i.loadScene("MenuScene",this.node,this.loading)}}),cc._RF.pop()},{LeanCloudDataSource:"LeanCloudDataSource",common:"common",global:"global",storage:"storage"}],SettingScene:[function(e,t,n){"use strict";cc._RF.push(t,"25677Huq2VJZYkQCwe+ccmL","SettingScene");e("global");var r=e("storage"),i=e("common");cc.Class({extends:cc.Component,properties:{loading:cc.Prefab},start:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&(wx.showShareMenu({withShareTicket:!0}),cc.loader.loadRes("Texture/Enemy/snake",cc.SpriteFrame,function(e,t){cc.log(e),cc.log(t),cc.log(t.url),wx.onShareAppMessage(function(e){return{title:"\u53ef\u4ee5\u5206\u4eab\u5566\uff0c\u5566\u5566\u5566",imageUrl:t.url,success:function(e){console.log(e)},fail:function(e){console.log(e)}}})}))},wxShare:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&cc.loader.loadRes("Texture/Enemy/golem",cc.SpriteFrame,function(e,t){cc.log(e),cc.log(t),wx.shareAppMessage({title:"\u53ef\u4ee5\u5206\u4eab\u5566\uff0c\u5566\u5566\u5566",imageUrl:"http://media.eshop-switch.com/s/%E7%84%B0%E7%81%AB%E6%88%98%E8%BD%A6/20190214205933.jpg",success:function(e){console.log(e)},fail:function(e){console.log(e)}})})},addStar:function(e,t){cc.log(t),r.saveMoney(r.star+parseInt(t))},clearData:function(){r.clearData("unlocked"),r.clearData("star"),r.clearData("rewardTaken"),r.clearData("progress"),r.clearData("userInfo"),r.clearData("game"),cc.director.loadScene("IntroScene")},clearTutorial:function(){r.clearData("tutorial"),cc.director.loadScene("IntroScene")},clearStatistics:function(){r.clearData("statistics")},back:function(){i.loadScene("MenuScene",this.node,this.loading)}}),cc._RF.pop()},{common:"common",global:"global",storage:"storage"}],TileSet:[function(e,t,n){"use strict";var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"8baf2CkA99PfbSiHHaaycNo","TileSet");var o={type:"floor",subtype:"normal1"},s={type:"wall",subtype:"n"},c={type:"wall",subtype:"s"},a={type:"wall",subtype:"e"},u={type:"wall",subtype:"w"},l={type:"wall",subtype:"ne"},h={type:"wall",subtype:"se"},f={type:"wall",subtype:"nw"},p={type:"wall",subtype:"sw"},d={type:"wall",subtype:"nenw"},m={type:"wall",subtype:"sesw"},g={type:"wall",subtype:"nese"},v={type:"wall",subtype:"nwsw"},_={type:"wall",subtype:"nelong"},y={type:"wall",subtype:"selong"},b={type:"wall",subtype:"nwlong"},S={type:"wall",subtype:"swlong"},E={type:"wall",subtype:"newlong"},k={type:"wall",subtype:"sewlong"},T={type:"wall",subtype:"nselong"},w={type:"wall",subtype:"nswlong"},R={type:"wall",subtype:"nlongse"},A={type:"wall",subtype:"nlongsw"},I={type:"wall",subtype:"slongne"},C={type:"wall",subtype:"elongsw"},x={type:"wall",subtype:"wlongne"},O={type:"wall",subtype:"elongnwsw"},N={type:"wall",subtype:"wlongnese"},P={type:"wall",subtype:"nelongsw"},L={type:"wall",subtype:"nwlongse"},M={type:"wall",subtype:"selongnw"},D={type:"wall",subtype:"swlongne"},F={type:"door",subtype:"os"};i(r={n:a,e:c,s:u,w:s,ne:h,se:p,sw:f,nw:l,nenw:g,nese:m,sesw:v,nwsw:d,nelong:y,selong:S,swlong:b,nwlong:_,newlong:T,nselong:k,sewlong:w,nswlong:E,nlongse:C,elongsw:{type:"wall",subtype:"slongnw"},slongnw:x,wlongne:R,nlongsw:{type:"wall",subtype:"elongnw"},elongnw:I,slongne:x},"wlongne",A),i(r,"nlongsesw",O),i(r,"elongnwsw",{type:"wall",subtype:"slongnenw"}),i(r,"slongnenw",N),i(r,"wlongnese",{type:"wall",subtype:"nlongsesw"}),i(r,"nelongsw",M),i(r,"selongnw",D),i(r,"swlongne",L),i(r,"nwlongse",P);t.exports={tutorial1:[[p,u,f],[c,o,s],[c,o,s],[c,o,s],[c,o,s],[c,o,s],[h,{type:"door",subtype:"oe"},l]],tutorial2:[[p,u,u,u,u,u,f],[c,o,o,o,o,o,{type:"door",subtype:"on"}],[h,a,a,a,a,a,l]],tutorial4:[[p,u,u,u,u,u,f],[F,o,o,o,o,o,s],[F,o,o,o,o,o,s],[h,a,a,a,a,a,l]],tiles6x3:[[p,u,u,u,f],[c,o,o,o,s],[c,o,o,o,s],[c,o,o,o,s],[c,o,o,o,s],[c,o,o,o,s],[c,o,o,o,s],[h,a,a,a,l]],tiles7x3:[[p,u,u,u,f],[c,o,o,o,s],[c,o,o,o,s],[c,o,o,o,s],[c,o,o,o,s],[c,o,o,o,s],[c,o,o,o,s],[c,o,o,o,s],[h,a,a,a,l]],tiles4x4:[[p,u,u,u,u,f],[c,o,o,o,o,s],[c,o,o,o,o,s],[c,o,o,o,o,s],[c,o,o,o,o,s],[h,a,a,a,a,l]],tiles5x5:[[p,u,u,u,u,u,f],[c,o,o,o,o,o,s],[c,o,o,o,o,o,s],[c,o,o,o,o,o,s],[c,o,o,o,o,o,s],[c,o,o,o,o,o,s],[h,a,a,a,a,a,l]],tiles6x6:[[p,u,u,u,u,u,u,f],[c,o,o,o,o,o,o,s],[c,o,o,o,o,o,o,s],[c,o,o,o,o,o,o,s],[c,o,o,o,o,o,o,s],[c,o,o,o,o,o,o,s],[c,o,o,o,o,o,o,s],[h,a,a,a,a,a,a,l]]};(function(e,t){for(var n=[],r=e.length,i=e[0].length,o=0;o<r;o++)for(var s=0;s<i;s++)n[o]=n[o]||[],n[o][s]=e[o][s];t.forEach(function(e){n[e.position.x][e.position.y]=e})})([[p,u,u,u,u,u,u,u,f],[c,o,o,o,o,o,o,o,s],[c,o,o,o,o,o,o,o,s],[c,o,o,o,o,o,o,o,s],[c,o,o,o,o,o,o,o,s],[c,o,o,o,o,o,o,o,s],[h,a,a,a,a,a,a,a,l]],[{type:"wall",subtype:"hole",position:{x:3,y:2}},{type:"wall",subtype:"hole",position:{x:3,y:5}}]);cc._RF.pop()},{}],UnlockScene:[function(e,t,n){"use strict";cc._RF.push(t,"9e979iOeGJD27ykc6ZOu04Y","UnlockScene");var r=e("global"),i=e("common"),o=e("storage"),s=e("effect"),c=e("unlockEntry");cc.Class({extends:cc.Component,properties:{unlockScroll:cc.ScrollView,starPrefab:cc.Prefab,loading:cc.Prefab,moneyLabel:cc.Label,star:{default:0,notify:function(e){this.star!=e&&(o.saveMoney(this.star),this.moneyLabel.string=this.star)},visible:!1}},start:function(){cc.log("Storage.unlocked"),cc.log(o.unlocked),r.UnlockScene=this,this.star=o.star,this.moneyLabel.string=o.star,this.initData(),this.unlockScroll.getComponent("listCtrl").setDataset(this.unlocks),this.unlockScroll.getComponent("listCtrl").initialize()},initData:function(){var e=0;this.unlocks=[],c.unlocks.forEach(function(t){!o.unlocked[t.name]&&this.passPrerequest(t)&&(this.unlocks.push(t),t.itemID=e,t.avaiable=this.star>=t.price),e++},this)},passPrerequest:function(e){return!e.prerequests||e.prerequests&&i.all(e.prerequests,function(e){return o.unlocked[e]},this)},unlock:function(e,t){this.star>=e.price&&s.gainStarInMenu({fromPosition:this.moneyLabel.node.position,fromParentNode:this.node,toPosition:t.node.position,toParentNode:t.node.parent,effectParentNode:this.node,amount:e.price,beforeStepCallback:function(e){this.star-=e,this.moneyLabel.node.stopAllActions(),this.moneyLabel.node.runAction(cc.sequence(cc.scaleTo(r.GET_STAR_TIME/2,.8),cc.scaleTo(r.GET_STAR_TIME/2,1)))},callback:function(){o.unlock(e.name),e.onUnlock&&e.onUnlock(),this.refresh()},context:this,starPrefab:this.starPrefab})},refresh:function(){this.initData(),this.unlockScroll.getComponent("listCtrl").setDataset(this.unlocks),this.unlockScroll.getComponent("listCtrl").initialize()},back:function(){r.UnlockScene=null,i.loadScene("MenuScene",this.node,this.loading)}}),cc._RF.pop()},{common:"common",effect:"effect",global:"global",storage:"storage",unlockEntry:"unlockEntry"}],WXDataSource:[function(e,t,n){"use strict";cc._RF.push(t,"54a3cnPcDlB5pKijAGyj5TT","WXDataSource");var r=e("DataSource");cc.Class({extends:r,properties:{},ctor:function(){},start:function(){},loadScore:function(e){var t=new AV.Query("ScoreBoard");t.descending("score"),t.limit(e.limit||20),t.find().then(function(t){if(e.success){var n=[];t.forEach(function(e){var t=e.toJSON();if(t.detail)try{t.detail=JSON.parse(t.detail)}catch(e){t.detail=null}t.time=new Date(t.createdAt).toTimeString(),n.push(t)},this),e.success.call(e.context,n)}}).catch(function(t){e.error&&e.error.call(e.context,t)})},submitScore:function(e,t){wx.setUserCloudStorage({KVDataList:[{key:"score",value:e.score+""},{key:"turn",value:e.turn+""},{key:"detail",value:JSON.stringify(e.detail)}],success:function(e){console.log(e),wx.getOpenDataContext().postMessage({type:"updateMaxScore"}),t.success&&t.success.call(t.context)},fail:function(e){console.log(e),t.error&&t.error.call(t.context,error)}})}}),cc._RF.pop()},{DataSource:"DataSource"}],achievementEntry:[function(e,t,n){"use strict";cc._RF.push(t,"0761bVf+5VOGIbW0/6ktWsw","achievementEntry");var r=e("global"),i=(e("common"),e("storage")),o=e("i18n"),s=[{name:"die1",title:"\u7b2c\u4e00\u6ef4\u8840",desc:"\u6b7b\u4ea11\u6b21",reward:5,check:function(){return i.statistics.gameTime>=1}},{name:"die9",title:"\u4e5d\u6b7b\u4e00\u751f",desc:"\u6b7b\u4ea19\u6b21",prerequests:["die1"],reward:50,check:function(){return i.statistics.gameTime>=9}},{name:"die100",title:"\u767e\u6298\u4e0d\u6320",desc:"\u6b7b\u4ea1100\u6b21",prerequests:["die100"],reward:500,check:function(){return i.statistics.gameTime>=100}},{name:"survive1hp",title:"\u5343\u94a7\u4e00\u53d1",desc:"\u5728\u56de\u5408\u7ed3\u675f\u65f6\u4ec51hp",reward:5,check:function(){return i.statistics.info.survive1hp>0}},{name:"killByPoison",title:"\u4e00\u4e2a\u82f9\u679c",desc:"\u6b7b\u4e8e\u4e2d\u6bd2",reward:20,check:function(){return i.statistics.gameOver.poison>0}},{name:"allFull",title:"\u602a\u6ee1\u4e3a\u60a3",desc:"\u5728\u56de\u5408\u7ed3\u675f\u65f6\u6240\u6709\u683c\u5b50\u90fd\u6ee1",reward:50,check:function(){return i.statistics.info.allFull>0}},{name:"allClear",title:"\u626b\u8361\u56db\u5408",desc:"\u5728\u56de\u5408\u7ed3\u675f\u65f6\u573a\u4e0a\u6ca1\u6709\u4efb\u4f55\u602a\u7269",prerequests:null,reward:400,check:function(){return i.statistics.info.allClear>0}},{name:"seenEnemy",title:"\u89c1\u591a\u8bc6\u5e7f",desc:"\u89c1\u5230\u8fc710\u79cd\u654c\u4eba",prerequests:null,reward:20,check:function(){var e=0;for(var t in i.progress.seen)e++;return e>=10}},{name:"seenEnemy2",title:"\u89c1\u591a\u8bc6\u5e7fII",desc:"\u89c1\u5230\u8fc720\u79cd\u654c\u4eba",prerequests:["seenEnemy"],reward:40,check:function(){var e=0;for(var t in i.progress.seen)e++;return e>=20}},{name:"seenEnemy3",title:"\u89c1\u591a\u8bc6\u5e7fIII",desc:"\u89c1\u5230\u8fc730\u79cd\u654c\u4eba",prerequests:["seenEnemy2"],reward:100,check:function(){var e=0;for(var t in i.progress.seen)e++;return e>=30}},{name:"kill1starSlime",title:"\u53f2\u83b1\u59c6\u6740\u624b",desc:"\u6740\u6b7b1\u661f\u4ee5\u4e0a\u53f2\u83b1\u59c6",prerequests:null,reward:5,check:function(){return i.statistics.kill.slimeLevel>=r.STAR_THRESHOLD}},{name:"kill2starSlime",title:"\u53f2\u83b1\u59c6\u6740\u624bII",desc:"\u6740\u6b7b2\u661f\u4ee5\u4e0a\u53f2\u83b1\u59c6",prerequests:["kill1starSlime"],reward:10,check:function(){return i.statistics.kill.slimeLevel>=2*r.STAR_THRESHOLD}},{name:"kill3starSlime",title:"\u53f2\u83b1\u59c6\u6740\u624bIII",desc:"\u6740\u6b7b3\u661f\u4ee5\u4e0a\u53f2\u83b1\u59c6",prerequests:["kill2starSlime"],reward:30,check:function(){return i.statistics.kill.slimeLevel>=3*r.STAR_THRESHOLD}},{name:"kill4starSlime",title:"\u53f2\u83b1\u59c6\u6740\u624bIV",desc:"\u6740\u6b7b4\u661f\u4ee5\u4e0a\u53f2\u83b1\u59c6",prerequests:["kill3starSlime"],reward:120,check:function(){return i.statistics.kill.slimeLevel>=4*r.STAR_THRESHOLD}},{name:"kill5starSlime",title:"\u73cd\u7a00\u602a\u7269\u6740\u624b",desc:"\u6740\u6b7b5\u661f\u4ee5\u4e0a\u53f2\u83b1\u59c6",prerequests:["kill4starSlime"],reward:600,check:function(){return i.statistics.kill.slimeLevel>=5*r.STAR_THRESHOLD}},{name:"takeDamage",title:"\u7834\u4f24\u98ce",desc:"\u88ab10\u70b9\u4ee5\u4e0a\u4f24\u5bb3\u6740\u6b7b",reward:5,check:function(){return i.statistics.gameOver.damage>=10}},{name:"takeDamage2",title:"\u554a,\u597d\u75db!",desc:"\u88ab30\u70b9\u4ee5\u4e0a\u4f24\u5bb3\u6740\u6b7b",prerequests:["takeDamage"],reward:10,check:function(){return i.statistics.gameOver.damage>=30}},{name:"takeDamage3",title:"\u7a00\u5df4\u70c2",desc:"\u88ab50\u70b9\u4ee5\u4e0a\u4f24\u5bb3\u6740\u6b7b",prerequests:["takeDamage2"],reward:30,check:function(){return i.statistics.gameOver.damage>=50}},{name:"takeDamage4",title:"\u8f66\u7978\u73b0\u573a",desc:"\u88ab100\u70b9\u4ee5\u4e0a\u4f24\u5bb3\u6740\u6b7b",prerequests:["takeDamage3"],reward:120,check:function(){return i.statistics.gameOver.damage>=100}},{name:"oneTurnKill",title:"\u5927\u5f00\u65e0\u53cc",desc:"\u4e00\u56de\u5408\u5185\u6740\u6b7b8\u4e2a\u4ee5\u4e0a\u654c\u4eba",reward:10,check:function(){return i.statistics.kill.oneTurn>=8}},{name:"oneTurnKill2",title:"\u5927\u5f00\u65e0\u53ccII",desc:"\u4e00\u56de\u5408\u5185\u6740\u6b7b12\u4e2a\u4ee5\u4e0a\u654c\u4eba",prerequests:["oneTurnKill"],reward:20,check:function(){return i.statistics.kill.oneTurn>=12}},{name:"oneTurnKill3",title:"\u5927\u5f00\u65e0\u53ccIII",desc:"\u4e00\u56de\u5408\u5185\u6740\u6b7b16\u4e2a\u4ee5\u4e0a\u654c\u4eba",prerequests:["oneTurnKill2"],reward:40,check:function(){return i.statistics.kill.oneTurn>=16}},{name:"oneTurnKill4",title:"\u5927\u5f00\u65e0\u53ccIII",desc:"\u4e00\u56de\u5408\u5185\u6740\u6b7b20\u4e2a\u4ee5\u4e0a\u654c\u4eba",prerequests:["oneTurnKill3"],reward:80,check:function(){return i.statistics.kill.oneTurn>=20}},{name:"oneTurnKill5",title:"\u5927\u5f00\u65e0\u53ccV",desc:"\u4e00\u56de\u5408\u5185\u6740\u6b7b24\u4e2a\u4ee5\u4e0a\u654c\u4eba",prerequests:["oneTurnKill4"],reward:160,check:function(){return i.statistics.kill.oneTurn>=24}}],c=["","II","III","IV","V"];[{type:"normal",achievementType:"warrior",displayName:"\u6218\u58eb",reward:function(e){return[5,10,30,100,400][e]}},{type:"cleric",achievementType:"cleric",displayName:"\u7267\u5e08",reward:function(e){return[5,10,30,100,400][e]}},{type:"wizard",achievementType:"wizard",displayName:"\u6cd5\u5e08",reward:function(e){return[5,10,30,100,400][e]}},{type:"thief",achievementType:"thief",displayName:"\u76d7\u8d3c",reward:function(e){return[5,10,30,100,400][e]}}].forEach(function(e){for(var t=0;t<5;t++)(function(t){s.push({name:e.achievementType+"Turn"+(t+1),title:e.displayName+"\u8bd5\u70bc"+c[t],desc:"\u575a\u6301"+30*(t+1)+"\u56de\u5408",prerequests:0==t?null:[e.achievementType+"Turn"+t],needUnlocks:"warrior"==e.achievementType?null:[e.achievementType],reward:e.reward(t),check:function(){return i.statistics.gameOver[e.type+"Turn"]>=30*(t+1)}})})(t)}),[{type:"archer",displayName:"\u9ab7\u9ac5\u5f13\u7bad\u624b",reward:function(e){return[5,10,30,120,600][e]}},{type:"ballista",displayName:"\u5f29\u8f66",reward:function(e){return[5,10,30,120,600][e]}},{type:"catapult",displayName:"\u6295\u77f3\u8f66",reward:function(e){return[5,10,30,120,600][e]}},{type:"centaur",displayName:"\u534a\u4eba\u9a6c\u5c04\u624b",reward:function(e){return[5,10,30,120,600][e]}},{type:"chomper",displayName:"\u85e4\u8513\u602a",reward:function(e){return[5,10,30,120,600][e]}},{type:"fireElement",displayName:"\u706b\u5143\u7d20",reward:function(e){return[5,10,30,120,600][e]}},{type:"gargoyle",displayName:"\u77f3\u50cf\u9b3c",reward:function(e){return[5,10,30,120,600][e]}},{type:"ghost",displayName:"\u5e7d\u7075",reward:function(e){return[5,10,30,120,600][e]}},{type:"golem",displayName:"\u9b54\u50cf",reward:function(e){return[5,10,30,120,600][e]}},{type:"killerBee",displayName:"\u6740\u4eba\u8702",reward:function(e){return[5,10,30,120,600][e]}},{type:"kobold",displayName:"\u72d7\u5934\u4eba",reward:function(e){return[5,10,30,120,600][e]}},{type:"medusa",displayName:"\u7f8e\u675c\u838e",reward:function(e){return[5,10,30,120,600][e]}},{type:"mimic",displayName:"\u5b9d\u7bb1\u602a",reward:function(e){return[5,10,30,120,600][e]}},{type:"minotaur",displayName:o.t("enemy/minotaur"),reward:function(e){return[5,10,30,120,600][e]}},{type:"mummy",displayName:o.t("enemy/mummy"),reward:function(e){return[5,10,30,120,600][e]}},{type:"ooze",displayName:"\u8f6f\u6ce5\u602a",reward:function(e){return[5,10,30,120,600][e]}},{type:"orcChief",displayName:"\u517d\u4eba\u914b\u957f",reward:function(e){return[5,10,30,120,600][e]}},{type:"orge",displayName:"\u98df\u4eba\u9b54",reward:function(e){return[5,10,30,120,600][e]}},{type:"ratman",displayName:"\u9f20\u4eba",reward:function(e){return[5,10,30,120,600][e]}},{type:"scorpion",displayName:"\u874e\u5b50",reward:function(e){return[5,10,30,120,600][e]}},{type:"skeleton",displayName:"\u9ab7\u9ac5\u536b\u5175",reward:function(e){return[5,10,30,120,600][e]}},{type:"shaman",displayName:"\u8428\u6ee1",reward:function(e){return[5,10,30,120,600][e]}},{type:"snake",displayName:"\u6bd2\u86c7",reward:function(e){return[5,10,30,120,600][e]}},{type:"summoner",displayName:"\u5524\u4e91\u5e08",reward:function(e){return[5,10,30,120,600][e]}},{type:"treant",displayName:"\u6811\u4eba",reward:function(e){return[5,10,30,120,600][e]}},{type:"troll",displayName:"\u5de8\u9b54",reward:function(e){return[5,10,30,120,600][e]}},{type:"vampire",displayName:"\u5438\u8840\u9b3c",reward:function(e){return[5,10,30,120,600][e]}}].forEach(function(e){for(var t=0;t<5;t++)(function(t){s.push({name:"kill"+(t+1)+"star"+e.type,title:e.displayName+"\u6740\u624b"+c[t],desc:"\u6740\u6b7b"+(t+1)+"\u661f\u4ee5\u4e0a"+e.displayName,prerequests:0==t?null:["kill"+t+"star"+e.type],needSeen:0==t?[e.type]:null,reward:e.reward(t),check:function(){return i.statistics.kill[e.type+"Level"]>=r.STAR_THRESHOLD*(t+1)}})})(t)}),t.exports={achievements:s},cc._RF.pop()},{common:"common",global:"global",i18n:"i18n",storage:"storage"}],achievementScene:[function(e,t,n){"use strict";cc._RF.push(t,"70c64dN+shEtaRHi0opP1Mh","achievementScene");var r=e("global"),i=e("common"),o=e("storage"),s=e("effect"),c=e("achievementEntry");cc.Class({extends:cc.Component,properties:{achievementScroll:cc.ScrollView,loading:cc.Prefab,moneyLabel:cc.Label,starPrefab:cc.Prefab,star:{default:0,notify:function(e){this.star!=e&&(o.saveMoney(this.star),this.moneyLabel.string=this.star)},visible:!1}},passPrerequest:function(e){return!e.prerequests||e.prerequests&&i.all(e.prerequests,function(e){return o.rewardTaken[e]},this)},passUnlock:function(e){return!e.needUnlocks||e.needUnlocks&&i.all(e.needUnlocks,function(e){return o.unlocked[e]},this)},passNeedSeen:function(e){return!e.needSeen||e.needSeen&&i.all(e.needSeen,function(e){return o.progress.seen[e]},this)},start:function(){cc.log("Storage.rewardTaken"),cc.log(o.rewardTaken),cc.log("Storage.statistics"),cc.log(o.statistics),cc.log("Storage.progress"),cc.log(o.progress),this.star=o.star,this.moneyLabel.string=o.star,r.AchievementScene=this,this.initData(),this.achievementScroll.getComponent("listCtrl").setDataset(this.currentAchievements),this.achievementScroll.getComponent("listCtrl").initialize()},initData:function(){var e=0;this.currentAchievements=[],c.achievements.forEach(function(t){!o.rewardTaken[t.name]&&this.passPrerequest(t)&&this.passUnlock(t)&&this.passNeedSeen(t)&&(this.currentAchievements.push(t),t.itemID=e,t.avaiable=t.check()),e++},this)},refresh:function(){this.initData(),this.achievementScroll.getComponent("listCtrl").setDataset(this.currentAchievements),this.achievementScroll.getComponent("listCtrl").refresh()},takeReward:function(e,t){o.takeReward(e.name),s.gainStarInMenu({fromPosition:t.node.position,fromParentNode:t.node.parent,toPosition:this.moneyLabel.node.position,toParentNode:this.node,effectParentNode:this.node,amount:e.reward,stepCallback:function(e){this.star+=e,this.moneyLabel.node.stopAllActions(),this.moneyLabel.node.runAction(cc.sequence(cc.scaleTo(r.GET_STAR_TIME/2,1.3),cc.scaleTo(r.GET_STAR_TIME/2,1)))},callback:function(){this.refresh()},context:this,starPrefab:this.starPrefab})},back:function(){r.AchievementScene=null,i.loadScene("MenuScene",this.node,this.loading)}}),cc._RF.pop()},{achievementEntry:"achievementEntry",common:"common",effect:"effect",global:"global",storage:"storage"}],achievement:[function(e,t,n){"use strict";cc._RF.push(t,"51dc7H7cidNsrptJom7m4Vo","achievement");var r=e("global"),i=(e("common"),e("storage"));e("MenuScene");cc.Class({extends:cc.Component,properties:{achievementTitle:cc.Label,achievementIcon:cc.Sprite,rewardButton:cc.Button,starIcon:cc.Sprite,rewardLabel:cc.Label,descLabel:cc.Label},start:function(){},updateItem:function(e,t){e?(this.itemID=t,this.entry=e,this.rewardLabel.string=this.entry.reward,this.achievementTitle.string=this.entry.title,this.descLabel.string=this.entry.desc,this.entry.avaiable?this.rewardButton.interactable=!0:this.rewardButton.interactable=!1):this.node.runAction(cc.removeSelf())},click:function(){i.rewardTaken[this.entry.name]||(this.rewardButton.interactable=!1,r.AchievementScene.takeReward(this.entry,this.rewardButton))}}),cc._RF.pop()},{MenuScene:"MenuScene",common:"common",global:"global",storage:"storage"}],adProvider:[function(e,t,n){"use strict";cc._RF.push(t,"2a04fxNOP1HsJiHlAyV9389","adProvider"),cc.Class({extends:cc.Component,properties:{},start:function(){},initBanner:function(){},showBanner:function(){},showVideo:function(){},initVideo:function(){}}),cc._RF.pop()},{}],angelSkill:[function(e,t,n){"use strict";cc._RF.push(t,"d7bf6lWhQZKfIWJzBvFtZum","angelSkill");var r=e("skill"),i=e("global"),o=e("common");cc.Class({extends:r,properties:{effect:{get:function(){return this.level+2}},desc:{get:function(){return"\u53ec\u5524\u5929\u4f7f\u4e3a\u4f60\u4f5c\u6218"+this.effect+"\u56de\u5408"}}},ctor:function(){this.skillName="angelSkill",this.icon="Skill/angelSkill",this.displayName="\u53ec\u5524\u5929\u4f7f",this.coolDown=14+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u591a\u6301\u7eed1\u56de\u5408"},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=i.currentRoom.filterTile(function(t){return t.isPassable(e)&&!i.currentRoom.getMovableByTile(t)},this);if(t.length){var n=o.sample(t),r={x:n.x,y:n.y};i.currentRoom.itemFactory.generateOneItem(r,"angel",this.effect)}this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME/2)}}),cc._RF.pop()},{common:"common",global:"global",skill:"skill"}],angel:[function(e,t,n){"use strict";cc._RF.push(t,"fb9fdb/qYpG37vLwbaKpupR","angel");var r=e("item"),i=e("global"),o=e("common");cc.Class({extends:r,properties:{title:{get:function(){return"\u5929\u4f7f"},override:!0},desc:{get:function(){return"\u7531\u82f1\u96c4\u53ec\u5524\u5230\u6218\u573a\u5e2e\u52a9\u6218\u6597\uff0c\u53ef\u60dc\u4e0d\u4f1a\u5438\u5f15\u654c\u4eba\u7684\u706b\u529b"},override:!0}},ctor:function(){this.type="angel",this.exchangeable=!1,this.breakable=!1,this.isMergeToSelfType=!1,this.isAllFaceSame=!1},onLoad:function(){var e=this;this._super(),cc.loader.loadRes("Texture/Item/angel",cc.SpriteAtlas,function(t,n){e.atlas=n,e.setFrame()})},start:function(){this._super(),this.node.setScale(0,2),this.node.y=this.node.y+80,this.node.runAction(cc.spawn(cc.moveBy(i.HERO_ATTACK_TIME/2,0,-80).easing(cc.easeIn(1)),cc.scaleTo(i.HERO_ATTACK_TIME/2,1,1)))},beforeHeroNormalAttack:function(){var e=i.currentRoom.getMovableByPosition(o.getIncrementPosition(this.positions[0],this.face));if(e&&e.getComponent("enemy")){var t=o.INCREMENTS[this.face],n=i.TILE_WIDTH*t.x/2,r=i.TILE_HEIGHT*t.y/2,s={fromPosition:this.positions[0],type:o.ATTACK_TYPE_MELEE};this.node.runAction(cc.sequence(cc.moveBy(i.HERO_ATTACK_TIME/2,n,r),cc.callFunc(function(){e.beHit(i.currentRoom.hero.getComponent("hero"),s)},this),cc.moveBy(i.HERO_ATTACK_TIME/2,-n,-r))),i.currentRoom.setDelayPhaseTime(i.HERO_ATTACK_TIME+.05)}},onTurnEnd:function(){this.level--,this.level<=0&&this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(i.HERO_ATTACK_TIME/2,0,80),cc.scaleTo(i.HERO_ATTACK_TIME/2,0,2)),cc.callFunc(function(){i.currentRoom.removeMovable(this)},this)))},hideLevel:function(e){}}),cc._RF.pop()},{common:"common",global:"global",item:"item"}],angry:[function(e,t,n){"use strict";cc._RF.push(t,"b0c59jSsZRD/Jgu63m3irCJ","angry");var r=e("status");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="angry"},start:function(){}}),cc._RF.pop()},{status:"status"}],archer:[function(e,t,n){"use strict";cc._RF.push(t,"d003aBxuJNGUo8NodfdYImr","archer");var r=e("global"),i=e("enemy"),o=e("effect");cc.Class({extends:i,properties:{title:{get:function(){return"\u9ab7\u9ac5\u5f13\u7bad\u624b"},override:!0},desc:{get:function(){return"\u8fdc\u7a0b\u653b\u51fb\u3002\n\u653b\u51fb\u529b\u5f88\u4f4e\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},attackRage:{get:function(){return 100},visible:!1,override:!0},exp:{get:function(){return 2*(this.level+this.star)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){var e=this.level;return Math.ceil(e/2)},override:!0},attackType:{override:!0,default:r.ATTACK_TYPE_RANGE,visible:!1},isUndead:!0},beforeAttack:function(e){o.projectArrow(this.node.position,e.node.position),this._super(e)},ctor:function(){this.type="archer"}}),cc._RF.pop()},{effect:"effect",enemy:"enemy",global:"global"}],backwardSlashSkill:[function(e,t,n){"use strict";cc._RF.push(t,"573c0Mijh5J24FNSlWOBdMW","backwardSlashSkill");var r=e("skill"),i=e("global"),o=(e("common"),e("enemy"),e("i18n"));cc.Class({extends:r,properties:{},ctor:function(){this.skillName="backwardSlashSkill",this.icon="Skill/backwardSlashSkill",this.displayName=o.t("backwardSlashSkill/name"),this.desc=o.t("backwardSlashSkill/desc"),this.coolDown=9+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return o.t("backwardSlashSkill/levelUp")},onLevelUp:function(e){this.coolDown-=1,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.gainStatus("backwardSlashStatus",1),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",i18n:"i18n",skill:"skill"}],backwardSlashStatus:[function(e,t,n){"use strict";cc._RF.push(t,"aff60HUFwNNqZ2++wkdI3Rb","backwardSlashStatus");var r=e("status"),i=e("global"),o=e("common");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="backwardSlashStatus"},start:function(){},beforeNormalAttack:function(e){var t=i.currentRoom.getMovableByPosition(o.getDecrementPosition(e.positions[0],e.face));t&&t.getComponent("enemy")&&(this.scheduleOnce(function(){var n={fromPosition:e.positions[0],type:o.ATTACK_TYPE_MELEE};t.checkHit(e,n)?t.beHit(e,n):t.dodgeAttack(e,n)},i.HERO_ATTACK_TIME/2),i.currentRoom.setDelayPhaseTime(i.HERO_ATTACK_TIME+.1))}}),cc._RF.pop()},{common:"common",global:"global",status:"status"}],ballista:[function(e,t,n){"use strict";cc._RF.push(t,"e3407MPyCxGsLPYLUjzkREW","ballista");var r=e("global"),i=e("enemy"),o=e("effect");cc.Class({extends:i,properties:{title:{get:function(){return"\u5f29\u8f66"},override:!0},desc:{get:function(){return"\u8fdc\u7a0b\u653b\u51fb\u3002\u4ec5\u5f53\u4e0e\u4f60\u540c\u4e00\u884c\u6216\u540c\u4e00\u5217\u65f6\u624d\u653b\u51fb\u3002\n\u653b\u51fb\u529b\u8f83\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u8f83\u9ad8\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return 2*Math.round(Math.log(e+1)*e)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){var e=this.level;return 3*Math.round(Math.log(e+1)*e)},override:!0},attackType:{override:!0,default:r.ATTACK_TYPE_RANGE,visible:!1}},beforeAttack:function(e){o.projectArrow(this.node.position,e.node.position),this._super(e)},checkRange:function(e){var t=this.positions[0],n=r.currentRoom.hero.getComponent("hero").positions[0];return n.x===t.x||n.y===t.y},ctor:function(){this.type="ballista"}}),cc._RF.pop()},{effect:"effect",enemy:"enemy",global:"global"}],bigWhirlSkill:[function(e,t,n){"use strict";cc._RF.push(t,"4b6b5Iyt2FEBIlXhj3M0yEr","bigWhirlSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="bigWhirlSkill",this.icon="Skill/bigWhirlSkill",this.displayName="\u5927\u56de\u65cb\u65a9",this.desc="\u653b\u51fb\u5468\u56f48\u4e2a\u683c\u5b50\u7684\u6240\u6709\u7684\u654c\u4eba",this.coolDown=26+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c112\u56de\u5408"},onLevelUp:function(e){this.coolDown-=2,this.reduceWait(2)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n={fromPosition:t,type:o.ATTACK_TYPE_SKILL},r={};[{x:t.x-1,y:t.y},{x:t.x+1,y:t.y},{x:t.x,y:t.y-1},{x:t.x,y:t.y+1},{x:t.x-1,y:t.y-1},{x:t.x-1,y:t.y+1},{x:t.x+1,y:t.y-1},{x:t.x+1,y:t.y+1}].forEach(function(t){var o=i.currentRoom.getMovableByPosition(t.x,t.y);if(o&&o.getComponent("enemy")){if(r[o._id])return;r[o._id]=1,o.checkHit(e,n)?o.beHit(e,n):o.dodgeAttack(e,n)}},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME/2)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],blind:[function(e,t,n){"use strict";cc._RF.push(t,"fa609lAWqRB2pIV8P4f2yqa","blind");var r=e("status"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u5931\u660e"}},desc:{get:function(){return"\u770b\u4e0d\u89c1\u602a\u7269\u548c\u9053\u5177\u7684\u7b49\u7ea7"}}},ctor:function(){this.statusName="blind"},start:function(){},onGain:function(){i.currentRoom.foreachMovable(function(e){e.hideLevel(!0)},this)},onLost:function(){i.currentRoom.foreachMovable(function(e){e.hideLevel(!1)},this)}}),cc._RF.pop()},{global:"global",status:"status"}],blinkSkill:[function(e,t,n){"use strict";cc._RF.push(t,"922c7qICc9FYI6k94nEQdSq","blinkSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="blinkSkill",this.icon="Skill/blinkSkill",this.displayName="\u95ea\u73b0",this.desc="\u5c06\u81ea\u5df1\u95ea\u73b0\u5230\u8eab\u540e\u7b2c\u4e00\u4e2a\u7a7a\u683c\uff0c\u9003\u547d\u7684\u7edd\u6280",this.coolDown=8+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){for(var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n=e.face,r=t,s=t;;){r=o.getDecrementPosition(r,n);var c=i.currentRoom.getTile(r);if(!c)break;var a=i.currentRoom.getMovableByPosition(r);if(c.isPassable(e)&&!a){s=r;break}}e.teleport(s,!1),this.scheduleOnce(function(){e.afterUseSkill()},i.TELEPORT_TIME+.01)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],bombSkill:[function(e,t,n){"use strict";cc._RF.push(t,"958b2gghm9Iw5jRl6f3KQwy","bombSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{effect:{get:function(){return this.level}}},ctor:function(){this.skillName="bombSkill",this.icon="Skill/bombSkill",this.displayName="\u70b8\u5f39",this.desc="\u671d\u654c\u4eba\u9635\u4e2d\u4e71\u4e22\u4e00\u9897\u53ea\u5bf9\u654c\u4eba\u6709\u6548\u7684\u70b8\u5f39\n\u623f\u95f4\u6ee1\u4e86\u5c31\u4e22\u4e0d\u4e86\u4e86",this.coolDown=9+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=i.currentRoom.filterTile(function(t){return t.isPassable(e)&&!i.currentRoom.getMovableByTile(t)},this);if(t.length){var n=o.sample(t),r={x:n.x,y:n.y};this.generateBomb(r)}this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME/2)},generateBomb:function(e){i.currentRoom.itemFactory.generateOneItem(e,"bomb",3)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],bomb:[function(e,t,n){"use strict";cc._RF.push(t,"a2b420dSwFBcqAT9K+0vscb","bomb");var r=e("item"),i=e("global"),o=e("common");cc.Class({extends:r,properties:{title:{get:function(){return"\u70b8\u5f39"},override:!0},desc:{get:function(){return"\u5012\u8ba1\u65f6\u7ed3\u675f\u65f6\u5bf9\u56db\u5468\u7684\u654c\u4eba\u9020\u6210\u4f24\u5bb3\n\u653e\u5fc3\uff0c\u4e0d\u4f1a\u4f24\u5230\u82f1\u96c4"},override:!0},score:{get:function(){return this.level*i.SCORE_INFLATION_RATE},override:!0}},ctor:function(){this.type="bomb",this.exchangeable=!1,this.isMergeToSelfType=!1},start:function(){this._super(),this.node.setScale(0),this.node.y=this.node.y+80,this.node.runAction(cc.spawn(cc.moveBy(i.HERO_ATTACK_TIME/2,0,-80).easing(cc.easeIn(1)),cc.scaleTo(i.HERO_ATTACK_TIME/2,1,1)))},onTurnEnd:function(){this.level--,this.level<=0&&(this.explode(),this.node.runAction(cc.sequence(cc.spawn(cc.fadeOut(i.HERO_ATTACK_TIME/2),cc.scaleTo(i.HERO_ATTACK_TIME/2,2.5,2.5)),cc.callFunc(function(){i.currentRoom.removeMovable(this)},this))))},explode:function(){i.currentRoom.setDelayPhaseTime(i.HERO_ATTACK_TIME/2+.05);var e=i.currentRoom.hero.getComponent("hero"),t=this.positions[0],n={fromPosition:t,type:o.ATTACK_TYPE_SKILL};[{x:t.x-1,y:t.y},{x:t.x+1,y:t.y},{x:t.x,y:t.y-1},{x:t.x,y:t.y+1}].forEach(function(t){var r=i.currentRoom.getMovableByPosition(t.x,t.y);r&&r.getComponent("enemy")&&(r.checkHit(e,n)?r.beHit(e,n):r.dodgeAttack(e,n))},this)},hideLevel:function(e){}}),cc._RF.pop()},{common:"common",global:"global",item:"item"}],bossBeholder:[function(e,t,n){"use strict";cc._RF.push(t,"5331fQuAthPl6xpyk6SJhCv","bossBeholder");var r=e("global"),i=e("boss"),o=(e("effect"),e("common"));cc.Class({extends:i,properties:{title:{get:function(){return"\u773c\u9b54"},override:!0},desc:{get:function(){return"\u6bcf\u56de\u5408\u4f7f\u4f60\u5f97\u5230\u4e00\u79cd\u5f02\u5e38\u72b6\u6001\n\u653b\u51fb\u529b"+this.attack+"\u3002\n\u7ecf\u9a8c\u503c\u975e\u5e38\u9ad8\u3002"},override:!0},score:{get:function(){return 1e3*this.level*r.SCORE_INFLATION_RATE},override:!0},exp:{get:function(){return 300*this.level*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 30*this.level},override:!0}},ctor:function(){this.type="bossBeholder"},generate:function(){this._super(),this.giveNegativeStatus()},onTurnStart:function(){this._super(),this.giveNegativeStatus()},giveNegativeStatus:function(){var e=r.currentRoom.hero.getComponent("hero"),t=[];if(r.NEGATIVE_EFFECTS.forEach(function(n){e.getStatus(n)||t.push(n)},this),t.length){var n=o.sample(t),i={frozen:Math.floor(2*Math.random())+1,cursed:-1,dizzy:Math.floor(2*Math.random())+2,forbid:Math.floor(2*Math.random())+1,poison:-1,blind:Math.floor(3*Math.random())+1,stun:1,slowed:Math.floor(3*Math.random())+1}[n];e.gainStatus(n,i)}}}),cc._RF.pop()},{boss:"boss",common:"common",effect:"effect",global:"global"}],bossDeath:[function(e,t,n){"use strict";cc._RF.push(t,"f0c9bBPTWxFdbUpoxpc9YM5","bossDeath");var r=e("global"),i=e("boss");e("effect"),e("common");cc.Class({extends:i,properties:{title:{get:function(){return"\u6b7b\u795e"},override:!0},desc:{get:function(){return"\u5728\u4f60\u811a\u4e0b\u751f\u6210\u9489\u677f\n\u653b\u51fb\u529b"+this.attack+"\u3002\n\u7ecf\u9a8c\u503c\u975e\u5e38\u9ad8\u3002"},override:!0},score:{get:function(){return 1e3*this.level*r.SCORE_INFLATION_RATE},override:!0},exp:{get:function(){return 400*this.level*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 50*this.level},override:!0}},ctor:function(){this.type="bossDeath"},generate:function(){this._super(),this.generateNail()},onTurnStart:function(){this._super(),this.generateNail()},generateNail:function(){var e=r.currentRoom.hero.getComponent("hero"),t=r.currentRoom.getTile(e.positions[0]);t&&t.gainStatus("nail",5)}}),cc._RF.pop()},{boss:"boss",common:"common",effect:"effect",global:"global"}],bossHydra:[function(e,t,n){"use strict";cc._RF.push(t,"bcbf3LRTG5PV4S5gYyLfQnM","bossHydra");var r=e("global"),i=e("boss");e("effect");cc.Class({extends:i,properties:{title:{get:function(){return"\u4e5d\u5934\u86c7"},override:!0},desc:{get:function(){return"\u653b\u51fb\u529b"+this.attack+"\u3002\n\u7ecf\u9a8c\u503c\u975e\u5e38\u9ad8\u3002"},override:!0},score:{get:function(){return 1e3*this.level*r.SCORE_INFLATION_RATE},override:!0},exp:{get:function(){return 200*this.level*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 100*this.level},override:!0}},ctor:function(){this.type="bossHydra"}}),cc._RF.pop()},{boss:"boss",effect:"effect",global:"global"}],boss:[function(e,t,n){"use strict";cc._RF.push(t,"f6cc8FEPdFNi7oc0HoBUrrI","boss");var r=e("global"),i=e("common"),o=e("enemy");e("effect");cc.Class({extends:o,properties:{weakPoint:cc.Sprite,hpList:cc.Layout,life:{default:0,notify:function(e){e!=this.life&&this.setLife(this.life)}}},ctor:function(){this.isBoss=!0,this.relativePositions=[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]},start:function(){this._super(),this.life=this.hpList.node.children.length,this.resetWeakPoint(),this.setLife(this.life),r.currentRoomScene.node.emit("boss-generate"),this.weakPoint.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.8,.8),cc.scaleTo(.5,1,1))))},starAnimation:function(){},resetWeakPoint:function(){this.weakPointRelativePosition=i.sample(this.relativePositions),this.weakPoint.node.x=r.TILE_WIDTH*this.weakPointRelativePosition.x,this.weakPoint.node.y=r.TILE_HEIGHT*this.weakPointRelativePosition.y},setLife:function(e){for(var t=0;t<this.hpList.node.children.length;t++){var n=this.hpList.node.children[t];n.children[0].active=!(t+1>e)}},willDieAfterBeHit:function(e,t){return this.life--,!(this.life>0)||(t.type==i.ATTACK_TYPE_MELEE&&this.checkHitWeakPoint(t.fromPosition)&&this.gainStatus("stun"),!1)},checkHitWeakPoint:function(e){var t=this.weakPointRelativePosition.x+this.positions[0].x,n=this.weakPointRelativePosition.y+this.positions[0].y;return(e.x==t&&1==Math.abs(e.y-n)||e.y==n&&1==Math.abs(e.x-t))&&(this.resetWeakPoint(),!0)},afterDie:function(e){this._super(e),r.currentRoomScene.node.emit("boss-die")}}),cc._RF.pop()},{common:"common",effect:"effect",enemy:"enemy",global:"global"}],calmSkill:[function(e,t,n){"use strict";cc._RF.push(t,"e8a66tfeAlJNZhOo1bzvE4F","calmSkill");var r=e("skill"),i=e("global");e("common");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="calmSkill",this.icon="Skill/calmSkill",this.displayName="\u5b89\u629a",this.desc="\u63a5\u4e0b\u67652\u56de\u5408\u654c\u4eba\u4e0d\u4f1a\u51fa\u73b0",this.coolDown=10+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.gainStatus("calm",3),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",global:"global",skill:"skill"}],calm:[function(e,t,n){"use strict";cc._RF.push(t,"2eff3bsIRJJKLQU3Gi5J8P8","calm");var r=e("status");e("global");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="calm"}}),cc._RF.pop()},{global:"global",status:"status"}],catapult:[function(e,t,n){"use strict";cc._RF.push(t,"14355Yi+E5DXZ3tqbSkejO1","catapult");var r=e("global"),i=e("enemy"),o=e("effect");cc.Class({extends:i,properties:{title:{get:function(){return"\u6295\u77f3\u8f66"},override:!0},desc:{get:function(){return"\u8fdc\u7a0b\u653b\u51fb\uff0c\u8ddd\u79bb\u4f60\u8d8a\u8fdc\u653b\u51fb\u529b\u8d8a\u9ad8\u3002\u8ddd\u79bb1\u81f32\u683c\u5185\u4e0d\u4f1a\u653b\u51fb\u3002\n\u653b\u51fb\u529b\u8f83\u4f4e\u81f3\u5f88\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u5f88\u9ad8\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return(2*Math.round(Math.log(e+1)*e)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return this.level},override:!0},attackType:{override:!0,default:r.ATTACK_TYPE_RANGE,visible:!1}},beforeAttack:function(e){o.projectStone(this.node.position,e.node.position),this._super(e)},checkRange:function(e){var t=this.positions[0],n=r.currentRoom.hero.getComponent("hero").positions[0];return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)>2},hit:function(e){var t=this.positions[0],n=r.currentRoom.hero.getComponent("hero").positions[0],i=Math.max(0,Math.abs(n.x-t.x)+Math.abs(n.y-t.y)-2);return Math.round(this.attack*i)},ctor:function(){this.type="catapult"}}),cc._RF.pop()},{effect:"effect",enemy:"enemy",global:"global"}],centaur:[function(e,t,n){"use strict";cc._RF.push(t,"d1af9agrmlOO4o/h9UgXpFm","centaur");var r=e("global"),i=e("enemy"),o=e("effect");cc.Class({extends:i,properties:{title:{get:function(){return"\u534a\u4eba\u9a6c\u5c04\u624b"},override:!0},desc:{get:function(){return"\u8fdc\u7a0b\u653b\u51fb\u3002\n\u5f88\u61d2\u60f0\uff0c\u653b\u51fb\u6216\u5408\u5e76\u540e\u672c\u8f6e\u4e0d\u4f1a\u653b\u51fb\u3002\n\u653b\u51fb\u529b\u5f88\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u5f88\u9ad8\u3002"},override:!0},attackRage:{get:function(){return 100},visible:!1,override:!0},exp:{get:function(){var e=this.level+this.star;return(Math.round(Math.log(e+2)*e)+2)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return Math.round(Math.log(this.level+1)*this.level)+1},override:!0},attackType:{override:!0,default:r.ATTACK_TYPE_RANGE,visible:!1},isUndead:!0},beforeAttack:function(e){o.projectArrow(this.node.position,e.node.position),this._super(e)},ctor:function(){this.type="centaur"},afterAttack:function(e){this.gainStatus("stun",2),this._super(e)},afterBeMerged:function(e){this._super(e),this.gainStatus("stun",1)}}),cc._RF.pop()},{effect:"effect",enemy:"enemy",global:"global"}],chargeSkill:[function(e,t,n){"use strict";cc._RF.push(t,"86d5707VVVOJrqeVj1jfFVH","chargeSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="chargeSkill",this.icon="Skill/chargeSkill",this.displayName="\u51b2\u950b",this.desc="\u5411\u524d\u51b2\u6740\u76f4\u5230\u65e0\u6cd5\u524d\u8fdb",this.coolDown=13+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown-=1,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=o.INCREMENTS[e.face],n=i.TILE_WIDTH*t.x/2,r=i.TILE_HEIGHT*t.y/2;do{e.node.runAction(cc.sequence(cc.moveBy(i.HERO_ATTACK_TIME/2,n,r),cc.callFunc(function(){this.hitOrMiss(enemy)},this)))}while(!finished);e.afterUseSkill()},forward:function(){var e=i.currentRoom.hero.getComponent("hero"),t=o.getIncrementPosition(heroPosition,e.face),n=i.currentRoom.getTile(t);if(n&&n.isPassable(e)){var r=i.currentRoom.getMovableByPosition(t);r&&r.getComponent("enemy")}var s=o.INCREMENTS[e.face],c=i.TILE_WIDTH*s.x/2,a=i.TILE_HEIGHT*s.y/2;heroPosition,o.ATTACK_TYPE_SKILL;e.node.runAction(cc.sequence(cc.moveBy(i.HERO_ATTACK_TIME/2,c,a),cc.callFunc(function(){this.hitOrMiss(r)},this)))}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],choiceFactory:[function(e,t,n){"use strict";cc._RF.push(t,"38e09p1U/1J6K3uN+M3MA+O","choiceFactory");var r=e("global"),i=e("storage");function o(e){return function(){var t=r.currentRoomScene.getSkill(e.name).getComponent("skill");return{name:"\u5347\u7ea7\u6280\u80fd\uff1a"+t.displayName+" \u5230"+(t.level+1)+"\u7ea7",icon:"Texture/"+t.icon,desc:t.levelUpDesc(t.level+1),onChosen:function(){t.levelUp()},validate:function(){return t&&t.level<t.maxLevel+r.MAX_LEVEL_ADJUST}}}}t.exports={getSkill:function(e){var t=new cc.Node;return t.addComponent(e.name),{name:"\u6280\u80fd\uff1a"+(t=t.getComponent("skill")).displayName,icon:"Texture/"+t.icon,desc:t.desc,validate:function(){if(t.isPassive)return!r.currentRoomScene.getSkill(e.name);var n=r.currentRoomScene.activeSkillCount(),o=i.progress.maxSkill[r.currentHeroType]||2;return!r.currentRoomScene.getSkill(e.name)&&n<o&&n>=e.minSkillCount},onChosen:function(){r.currentRoomScene.gainSkill(e.name,e.level),r.currentChoicePool.push(o({name:e.name}))}}},levelUpSkill:o,getScore:function(e){return{name:"",icon:"Texture/icon-score",desc:function(){return"\u52a0"+e.number*(r.currentRoom.hero.getComponent("hero").level-1)+"\u5206"},onChosen:function(){r.currentRoomScene.gainScore(e.number*(r.currentRoom.hero.getComponent("hero").level-1))}}}},cc._RF.pop()},{global:"global",storage:"storage"}],choice:[function(e,t,n){"use strict";cc._RF.push(t,"f41e010E/BByIQVGK0cC3n9","choice"),cc.Class({extends:cc.Component,properties:{choiceIconSprite:cc.Sprite,choiceNameLabel:cc.Label,choiceDescLabel:cc.Label},start:function(){var e=this;cc.loader.loadRes(this.choice.icon,cc.SpriteFrame,function(t,n){e.choiceIconSprite.spriteFrame=n}),this.choiceNameLabel.string=this.choice.name,"function"==typeof this.choice.desc?this.choiceDescLabel.string=this.choice.desc():this.choiceDescLabel.string=this.choice.desc,this.node.on("touchend",this.choose,this)},choose:function(){this.node.off("touchend",this.choose,this),this.choice.onChosen(),this.dialog.onOk()}}),cc._RF.pop()},{}],chomper:[function(e,t,n){"use strict";cc._RF.push(t,"1c489wVgqlMO4Z8wZcp2Sy9","chomper");var r=e("global"),i=e("common"),o=e("enemy");cc.Class({extends:o,properties:{title:{get:function(){return"\u85e4\u8513\u602a"},override:!0},desc:{get:function(){return"\u5408\u5e76\u65f6\u5728\u573a\u4e0a\u751f\u6210\u85e4\u8513\u3002\n\u653b\u51fb\u529b\u4e00\u822c\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return Math.round(1.5*e*r.EXP_INFLATION_RATE)},override:!0},attack:{get:function(){return 2*(2*this.level-1)},override:!0}},ctor:function(){this.type="chomper"},beforeMove:function(){this._super(),this.mergeCount=0},afterBeMerged:function(e){this._super(e),e.getComponent("chomper")&&this.mergeCount++},resolveMerge:function(){for(var e=0;e<this.mergeCount;e++){var t=r.currentRoom.filterTile(function(e){return e.getComponent("tile").isPassable(this)&&!r.currentRoom.getMovableByTile(e)},this),n=i.sample(t);r.currentRoom.enemyFactory.generateOneEnemy(n.x,n.y,"vines",1)}this.mergeCount&&(r.currentRoom.setDelayPhaseTime(r.GENERATE_TIME),this.mergeCount=0)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],cloud:[function(e,t,n){"use strict";cc._RF.push(t,"6988djpKQxHGKvwg94giqT6","cloud");var r=e("status"),i=e("global");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="cloud"},onGain:function(e){this.cloudSprite=cc.instantiate(i.currentRoom.cloudPrefab);var t=i.currentRoom.node.convertToWorldSpaceAR({x:e.node.x,y:e.node.y}),n=i.currentRoomScene.effectLayer.convertToNodeSpaceAR(t);this.cloudSprite.x=n.x,this.cloudSprite.y=n.y,i.currentRoomScene.effectLayer.addChild(this.cloudSprite),this.cloudSprite.setScale(0),this.cloudSprite.runAction(cc.spawn(cc.scaleTo(.2,1,1),cc.fadeIn(.2)))},onLost:function(e){this.cloudSprite.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,0,0),cc.fadeOut(.2)),cc.removeSelf()))}}),cc._RF.pop()},{global:"global",status:"status"}],common:[function(e,t,n){"use strict";cc._RF.push(t,"82b4eo8IbRAFq7FMzj8353/","common");var r=[0,1,2,3],i=[2,3,0,1],o=[{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:0}],s=[{x:0,y:-1},{x:-1,y:0},{x:0,y:1},{x:1,y:0}],c=function(e,t,n){return[{start:{x:0,y:0},step:function(e,r){return++e>=t&&(e=0,++r>=n)?null:{x:e,y:r}}},{start:{x:0,y:0},step:function(e,r){return++r>=n&&(r=0,++e>=t)?null:{x:e,y:r}}},{start:{x:0,y:n-1},step:function(e,n){return++e>=t&&(e=0,--n<0)?null:{x:e,y:n}}},{start:{x:t-1,y:0},step:function(e,t){return++t>=n&&(t=0,--e<0)?null:{x:e,y:t}}}][e]},a=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};t.exports={DIRECTION_UP:0,DIRECTION_RIGHT:1,DIRECTION_DOWN:2,DIRECTION_LEFT:3,DIRECTIONS:r,REVERSE_DIRECTIONS:i,INCREMENTS:o,DECREMENTS:s,DIAGNAL_INCREMENTS:[{x:1,y:1},{x:1,y:-1},{x:-1,y:-1},{x:-1,y:1}],ALL_INCREMENTS:[{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:0},{x:1,y:1},{x:1,y:-1},{x:-1,y:-1},{x:-1,y:1}],getIncrementPosition:function(e,t,n){e instanceof Object&&(n=t,t=e.y,e=e.x);var r=o[n];return{x:e+r.x,y:t+r.y}},getDecrementPosition:function(e,t,n){e instanceof Object&&(n=t,t=e.y,e=e.x);var r=s[n];return{x:e+r.x,y:t+r.y}},traverseMap:function(e,t,n,r,i){for(var o=c(r,t,n),s=o.start.x,a=o.start.y;;){var u=e[s][a];u&&i(u,s,a);var l=o.step(s,a);if(!l)return;s=l.x,a=l.y}},contains:function(e,t){for(var n=0;n<e.length;n++)if(t==e[n])return!0;return!1},random:a,sample:function(e,t){if(null==t)return e[a(e.length-1)];var n=e.slice(),r=n.length;t=Math.max(Math.min(t,r),0);for(var i=r-1,o=0;o<t;o++){var s=a(o,i),c=n[o];n[o]=n[s],n[s]=c}return n.slice(0,t)},max:function(e,t,n){var r=null,i=null;return e.forEach(function(e){var o=t.call(n,e);(null===r||r<o)&&(r=o,i=e)}),i},min:function(e,t,n){var r=null,i=null;return e.forEach(function(e){var o=t.call(n,e);(null===r||r>o)&&(r=o,i=e)}),i},any:function(e,t,n){for(var r=0;r<e.length;r++)if(t.call(n,e[r]))return!0;return!1},all:function(e,t,n){for(var r=0;r<e.length;r++)if(!t.call(n,e[r]))return!1;return!0},getPointDistance:function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},distance:function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},loadScene:function(e,t,n,r){var i=cc.instantiate(n);i.x=i.y=0,t.addChild(i),cc.director.loadScene(e,r)},ATTACK_TYPE_MELEE:1,ATTACK_TYPE_RANGE:2,ATTACK_TYPE_SKILL:3,SHIFT_RESULT_NORMAL:1,SHIFT_RESULT_MERGE_AND_DISAPPEAR:2,SHIFT_RESULT_MERGE_AND_STAY:3},cc._RF.pop()},{}],constitutionSkill:[function(e,t,n){"use strict";cc._RF.push(t,"5849fNebK1BaodDz+ELJ7Wl","constitutionSkill");var r=e("skill"),i=e("global");cc.Class({extends:r,properties:{desc:{get:function(){return"\u589e\u52a0\u751f\u547d\u4e0a\u9650"+Math.round(this.level*i.CONSTITUTION_EFFECT)}}},ctor:function(){this.skillName="constitutionSkill",this.icon="Skill/constitutionSkill",this.displayName="\u4f53\u8d28\uff08\u88ab\u52a8\uff09",this.isPassive=!0,this.maxLevel=100},levelUpDesc:function(e){return"\u589e\u52a0\u751f\u547d\u4e0a\u9650"+Math.round(i.CONSTITUTION_EFFECT)},onLevelUp:function(e){i.currentRoom.hero.getComponent("hero").constitution++},onGain:function(){i.currentRoom.hero.getComponent("hero").constitution++}}),cc._RF.pop()},{global:"global",skill:"skill"}],coolingSkill:[function(e,t,n){"use strict";cc._RF.push(t,"f0b867HF2lDRJexdVm0rHIg","coolingSkill");var r=e("skill"),i=e("global");e("common");cc.Class({extends:r,properties:{effect:{get:function(){return this.effectOfLevel(this.level)}},desc:{get:function(){return"\u6240\u6709\u5176\u4ed6\u6280\u80fd\u51b7\u5374"+this.effect+"\u56de\u5408"}}},ctor:function(){this.skillName="coolingSkill",this.icon="Skill/coolingSkill",this.displayName="\u51b7\u9759",this.coolDown=20+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u591a\u51b7\u53741"},effectOfLevel:function(e){return e+4},onLevelUp:function(e){},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");i.currentRoomScene.forEachSkill(function(e){e.getComponent("skill").reduceWait(this.effect)},this),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",global:"global",skill:"skill"}],crossSlashSkill:[function(e,t,n){"use strict";cc._RF.push(t,"315baSiDcJAOLGzITGNWuoG","crossSlashSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="crossSlashSkill",this.icon="Skill/crossSlashSkill",this.displayName="\u5341\u5b57\u65a9",this.desc="\u653b\u51fb\u6240\u5728\u884c\u548c\u6240\u5728\u5217\u6240\u6709\u7684\u654c\u4eba",this.coolDown=25+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c112\u56de\u5408"},onLevelUp:function(e){this.coolDown-=2,this.reduceWait(2)},onUsed:function(){for(var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n={fromPosition:t,type:o.ATTACK_TYPE_SKILL},r={},s=0;s<i.currentRoom.width;s++){if((c=i.currentRoom.getMovableByPosition(s,t.y))&&c.getComponent("enemy")){if(r[c._id])continue;r[c._id]=1,c.checkHit(e,n)?c.beHit(e,n):c.dodgeAttack(e,n)}}for(s=0;s<i.currentRoom.height;s++){var c;if((c=i.currentRoom.getMovableByPosition(t.x,s))&&c.getComponent("enemy")){if(r[c._id])continue;r[c._id]=1,c.checkHit(e,n)?c.beHit(e,n):c.dodgeAttack(e,n)}}this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME/2)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],cursed:[function(e,t,n){"use strict";cc._RF.push(t,"b273a9mALJA1I/x/bX2hki5","cursed");var r=e("status");e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u88ab\u8bc5\u5492"}},desc:{get:function(){return"\u4e0b\u4e00\u6b21\u6062\u590d\u751f\u547d\u91cf\u51cf\u534a"}}},ctor:function(){this.statusName="cursed"}}),cc._RF.pop()},{global:"global",status:"status"}],descDialog:[function(e,t,n){"use strict";cc._RF.push(t,"a6dcaC4mppFtLslepl7WTx4","descDialog");var r=e("global");cc.Class({extends:cc.Component,properties:{icon:cc.Node,titleLabel:cc.Label,descLabel:cc.Label},start:function(){r.currentRoom.setAcceptInput(!1)},setMovable:function(e){var t=r.currentRoom.movablePrefabMap[e.type]||r.currentRoom.movablePrefabMap[e.type+e.subtype],n=cc.instantiate(t);n.getComponent("movable").subtype=e.subtype,n.x=0,n.y=0,n.removeComponent(e.type),n.getComponent("boss")&&(n.x=-r.TILE_WIDTH/4,n.y=-r.TILE_HEIGHT/4,n.setScale(.5)),this.icon.addChild(n),this.titleLabel.string=e.title,this.descLabel.string=e.desc},closeDialog:function(){this.node.runAction(cc.sequence(cc.fadeOut(r.DIALOG_EXIT_TIME),cc.removeSelf())),r.currentRoom.setAcceptInput(!0)}}),cc._RF.pop()},{global:"global"}],dexteritySkill:[function(e,t,n){"use strict";cc._RF.push(t,"63edetMyztFB5I5sWvgoE++","dexteritySkill");var r=e("skill"),i=e("global");cc.Class({extends:r,properties:{desc:{get:function(){return Math.round(100*this.level*i.DEXTERITY_EFFECT)+"%\u7684\u6982\u7387\u95ea\u8eb2\u654c\u4eba\u7684\u653b\u51fb"}}},ctor:function(){this.skillName="dexteritySkill",this.icon="Skill/dexteritySkill",this.displayName="\u654f\u6377\uff08\u88ab\u52a8\uff09",this.isPassive=!0,this.maxLevel=5},levelUpDesc:function(e){return"\u589e\u52a0\u95ea\u8eb2\u6982\u7387"+Math.round(100*i.DEXTERITY_EFFECT)+"%"},onLevelUp:function(e){i.currentRoom.hero.getComponent("hero").dexterity++},onGain:function(){i.currentRoom.hero.getComponent("hero").dexterity++}}),cc._RF.pop()},{global:"global",skill:"skill"}],dispelSkill:[function(e,t,n){"use strict";cc._RF.push(t,"1343eBMiItMVpBMXi75YAMJ","dispelSkill");var r=e("skill"),i=e("global");e("common");cc.Class({extends:r,properties:{effect:{get:function(){return this.effectOfLevel(this.level)}},desc:{get:function(){return"\u795b\u9664\u6240\u6709\u5f02\u5e38\u6548\u679c\uff0c\u4e14\u4fdd\u62a4"+this.effect+"\u56de\u5408\u4e0d\u4f1a\u83b7\u5f97\u5f02\u5e38\u6548\u679c"}}},ctor:function(){this.skillName="dispelSkill",this.icon="Skill/dispelSkill",this.displayName="\u9a71\u6563",this.coolDown=5+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u591a\u4fdd\u63011\u56de\u5408\uff0c\u4f46\u51b7\u5374\u65f6\u95f4\u4e5f\u589e\u52a01\u56de\u5408"},effectOfLevel:function(e){return e},onLevelUp:function(e){this.coolDown++},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");i.NEGATIVE_EFFECTS.forEach(function(t){e.lostStatus(t)},this),e.gainStatus("prevent",this.effect),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",global:"global",skill:"skill"}],dizzy:[function(e,t,n){"use strict";cc._RF.push(t,"f632fIyikxMWbsNt6WpB/Cn","dizzy");var r=e("status");cc.Class({extends:r,properties:{title:{get:function(){return"\u7729\u6655"}},desc:{get:function(){return"\u884c\u52a8\u4e0e\u64cd\u4f5c\u76f8\u53cd"}}},ctor:function(){this.statusName="dizzy"},start:function(){}}),cc._RF.pop()},{status:"status"}],door:[function(e,t,n){"use strict";cc._RF.push(t,"11ac6XRDAJLu5ckl5pXjAdt","door");var r=e("tile"),i=e("common"),o=e("global");cc.Class({extends:r,properties:{exit:cc.Sprite},ctor:function(){this.type="door",this._isPassable=!1,this._isCapture=!1,this._canGenEnemy=!1},open:function(){this.subtype="o"+this.subtype.substr(1,1),this.exit.node.active=!0,this.setFrame()},close:function(){this.subtype="c"+this.subtype.substr(1,1),this.exit.node.active=!1,this.setFrame()},isOpen:function(){return"o"===this.subtype.substr(0,1)},start:function(){this._super();var e=this.subtype.substr(1,1),t={s:i.DIRECTION_DOWN,n:i.DIRECTION_UP,w:i.DIRECTION_LEFT,e:i.DIRECTION_RIGHT};this.direction=t[e],this.floorPosition=i.getDecrementPosition(this.position,this.direction),this.isOpen()?this.exit.node.active=!0:this.exit.node.active=!1,this.exit.node.rotation=90*this.direction,this.exit.node.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,10*-i.DECREMENTS[this.direction].x,30*-i.DECREMENTS[this.direction].y),cc.moveBy(.5,10*i.DECREMENTS[this.direction].x,30*i.DECREMENTS[this.direction].y))))},onTurnEnd:function(){if(this.isOpen()){var e=o.currentRoom.hero.getComponent("hero").positions[0];this.floorPosition.x===e.x&&this.floorPosition.y===e.y&&(o.exit=!0,o.exitDirection=this.direction)}}}),cc._RF.pop()},{common:"common",global:"global",tile:"tile"}],effect:[function(e,t,n){"use strict";cc._RF.push(t,"21938QcmYtKIZtQj3l69Lbu","effect");var r=e("global"),i=new cc.NodePool,o=new cc.NodePool,s=new cc.NodePool,c=new cc.NodePool,a=function(e){return e/Math.PI/2*360};t.exports={getLabelEffectPosition:function(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);return{x:50/i*n+e.x,y:50/i*r+e.y}},labelEffect:function(e,t,n,o){var s=i.get();s||(s=new cc.Node).addComponent(cc.Label),s.getComponent(cc.Label).string=e,s.opacity=255,o=o||{x:40*Math.random()-20,y:40*Math.random()-20},s.x=o.x+n.x,s.y=o.y+n.y,s.color=t,r.currentRoom.node.addChild(s),s.runAction(cc.sequence(cc.moveBy(.4+.2*Math.random(),0,60+20*Math.random()),cc.fadeOut(.2),cc.callFunc(function(){s.removeFromParent(!0),i.put(s)},this)))},projectArrow:function(e,t){var n=0;if(e.x==t.x)if(e.y>t.y)n=90;else{if(!(e.y<t.y))return void cc.log("x==x y==y");n=-90}else e.y==t.y?e.x>t.x?n=180:e.x<t.x&&(n=0):n=a(Math.atan((t.y-e.y)/(t.x-e.x)));var i=o.get();i||(i=cc.instantiate(r.currentRoom.arrowPrefab)),i.x=e.x,i.y=e.y,i.rotation=-n,r.currentRoom.node.addChild(i),i.runAction(cc.sequence(cc.moveTo(r.ENEMY_ATTACK_TIME/2,t.x,t.y),cc.callFunc(function(){i.removeFromParent(!0),o.put(i)},this)))},projectStone:function(e,t){var n=s.get();n||(n=cc.instantiate(r.currentRoom.stonePrefab)),n.x=e.x,n.y=e.y,r.currentRoom.node.addChild(n),n.rotation=360*Math.random(),n.runAction(cc.sequence(cc.spawn(cc.moveTo(r.ENEMY_ATTACK_TIME/2,t.x,t.y),cc.rotateBy(r.ENEMY_ATTACK_TIME/2,360)),cc.callFunc(function(){n.removeFromParent(!0),s.put(n)},this)))},projectFireball:function(e,t,n){var i=0;if(e.x==t.x)if(e.y>t.y)i=90;else{if(!(e.y<t.y))return void cc.log("x==x y==y");i=-90}else e.y==t.y?e.x>t.x?i=180:e.x<t.x&&(i=0):i=a(Math.atan((t.y-e.y)/(t.x-e.x)));var o=cc.instantiate(r.currentRoom.fireballPrefab);o.x=e.x,o.y=e.y,o.rotation=i,r.currentRoom.node.addChild(o),o.runAction(cc.sequence(cc.moveTo(r.ENEMY_ATTACK_TIME/2,t.x,t.y),cc.removeSelf()))},gainStarInRoom:function(e,t){t=t||1;var n=c.get();n||(n=cc.instantiate(r.currentRoom.starPrefab)).setScale(2);var i=r.currentRoom.node.convertToWorldSpaceAR({x:e.x,y:e.y}),o=r.currentRoomScene.node.convertToNodeSpaceAR(i);n.position=o,r.currentRoomScene.node.addChild(n);var s=r.currentRoomScene.moneyLabel.node.position;n.runAction(cc.sequence(cc.moveTo(r.GET_STAR_TIME,s.x,s.y).easing(cc.easeQuadraticActionIn()),cc.callFunc(function(){r.currentRoomScene.gainStar(t),r.currentRoomScene.moneyLabel.node.stopAllActions(),r.currentRoomScene.moneyLabel.node.runAction(cc.sequence(cc.scaleTo(r.GET_STAR_TIME/2,1.3),cc.scaleTo(r.GET_STAR_TIME/2,1)))},this),cc.callFunc(function(){this.removeFromParent(!0),c.put(this)},n)))},useStarInRoom:function(e,t,n){for(var i=Math.min(n,5),o=0;o<i;o++){var s=c.get();s||(s=cc.instantiate(r.currentRoom.starPrefab)).setScale(2);var a=r.currentRoomScene.moneyLabel.node.position;s.position=a;var u=t.convertToWorldSpaceAR({x:e.x,y:e.y}),l=r.currentRoomScene.node.convertToNodeSpaceAR(u);r.currentRoomScene.node.addChild(s),r.currentRoomScene.moneyLabel.node.stopAllActions(),r.currentRoomScene.moneyLabel.node.runAction(cc.sequence(cc.scaleTo(r.GET_STAR_TIME/2,.8),cc.scaleTo(r.GET_STAR_TIME/2,1))),s.runAction(cc.sequence(cc.delayTime(.1*o),cc.moveTo(r.GET_STAR_TIME,l.x,l.y).easing(cc.easeQuadraticActionIn()),cc.callFunc(function(){this.removeFromParent(!0),c.put(this)},s)))}},gainStarInMenu:function(e){for(var t=e.fromPosition,n=e.fromParentNode,i=e.toPosition,o=e.toParentNode,s=e.effectParentNode,a=e.amount,u=e.beforeStepCallback,l=e.stepCallback,h=e.callback,f=e.context,p=e.starPrefab,d=Math.min(a,5),m=a,g=0;g<d;g++){var v=Math.round(m/(d-g));m-=v;var _=c.get();_||(_=cc.instantiate(p)).setScale(2);var y=n.convertToWorldSpaceAR(t),b=s.convertToNodeSpaceAR(y);_.position=b,s.addChild(_);var S=s.convertToNodeSpaceAR(o.convertToWorldSpaceAR(i));_.runAction(cc.sequence(cc.delayTime(.1*g),cc.callFunc(function(){u&&u.call(f,v)}),cc.moveTo(r.GET_STAR_TIME,S.x,S.y).easing(cc.easeQuadraticActionIn()),cc.callFunc(function(){l&&l.call(f,v)}),g==d-1?cc.callFunc(h,f):cc.delayTime(.01),cc.callFunc(function(){this.removeFromParent(!0),c.put(this)},_)))}}},cc._RF.pop()},{global:"global"}],eightArrowSkill:[function(e,t,n){"use strict";cc._RF.push(t,"3ca6dNoeoBENJRZRXqpvECz","eightArrowSkill");var r=e("skill"),i=e("global"),o=e("common"),s=e("effect");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="eightArrowSkill",this.icon="Skill/eightArrowSkill",this.displayName="\u516b\u65b9\u7bad",this.desc="\u671d\u5468\u56f4\u516b\u4e2a\u65b9\u5411\u5c04\u7bad\uff0c\u6740\u6b7b\u7b2c\u4e00\u4e2a\u654c\u4eba\u3002\u649e\u5230\u5899\u5c31\u6ca1\u7528\u4e86\u3002",this.coolDown=27+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c112\u56de\u5408"},onLevelUp:function(e){this.coolDown-=2,this.reduceWait(2)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n=[];[0,1,2,3,4,5,6,7].forEach(function(r){for(var c=null,a=t,u=null;;){var l=o.ALL_INCREMENTS[r];a={x:a.x+l.x,y:a.y+l.y};var h=i.currentRoom.getTile(a);if(!h||0==h.isPassable(e)){u=a;break}if((c=i.currentRoom.getMovableByPosition(a))&&c.getComponent("enemy")){u=c.getComponent("enemy").positions[0],n.push(c);break}}s.projectArrow(e.node.position,i.currentRoom.getDrawPosition(u))},this);var r={fromPosition:t,type:o.ATTACK_TYPE_SKILL};n.forEach(function(t){t.checkHit(e,r)?t.beHit(e,r):t.dodgeAttack(e,r)},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME)}}),cc._RF.pop()},{common:"common",effect:"effect",enemy:"enemy",global:"global",skill:"skill"}],enemyFactory:[function(e,t,n){"use strict";cc._RF.push(t,"7579bzvyZJL9aJcA9FEzVOm","enemyFactory");var r=e("global"),i=e("storage"),o=e("common"),s=e("boss"),c=cc.Class({extends:cc.Component,statics:{checkTileForBoss:function(e,t){for(var n=new s,i=0;i<n.relativePositions.length;i++){var o=n.relativePositions[i],c=e.x+o.x,a=e.y+o.y,u=r.currentRoom.getTile(c,a);if(!u||!u.canGenEnemy())return!1;if(t&&r.currentRoom.getMovableByTile(u))return!1}return!0}},properties:{},ctor:function(){this.enemyPool=[],r.initEnemyPool.forEach(function(e){this.enemyPool.push(e)},this),this.waitingEnemyPool=[],r.enemyList.forEach(function(e){this.waitingEnemyPool.push({type:e})},this),this.lastBossAppearTurn=0,this.bossAppearTime=0,this.enemyLevelPool=[1],this.enemyMaxLevel=1,this.enemyNumber=2,this.bossList=r.bossPool},generateEnemy:function(){if(this.lastBossAppearTurn+r.BOSS_APPEAR_PER_TURN<r.currentRoom.turn&&this.generateBoss())return this.lastBossAppearTurn=r.currentRoom.turn,this.bossAppearTime++,void setTimeout(function(){r.currentRoom.afterGenEnemy()},1.2*r.GENERATE_TIME*1e3);var e=r.currentRoom.filterTile(function(e){return e.canGenEnemy()&&!r.currentRoom.getMovableByTile(e)},this),t=this.generateEnemyNumber();r.currentRoom.hero.getComponent("hero").getStatus("calm")&&(t=0);var n=[];(n=o.sample(e,t)).length?(n.forEach(function(e){this.generateOneEnemy(e.x,e.y,this.generateOneEnemyType(),this.generateOneEnemyLevel())},this),setTimeout(function(){r.currentRoom.afterGenEnemy()},1.2*r.GENERATE_TIME*1e3)):r.currentRoom.afterGenEnemy()},generateBoss:function(){if(r.currentRoom.filterMovable(function(e){return e.isBoss},this).length)return null;var e=null,t=r.currentRoom.filterTile(function(e){return c.checkTileForBoss(e,!0)},this),n=o.sample(t);return n&&(e=this.generateOneEnemy(n.x,n.y,o.sample(this.bossList),this.bossAppearTime+1)),e},generateOneEnemy:function(e,t,n,o){var s="string"==typeof n?n:n.type,c="string"==typeof n?n:n.subtype,a=r.currentRoom.movablePrefabMap[s];a||(a=r.currentRoom.movablePrefabMap[s+c]);var u=null;return a?((u=cc.instantiate(a)).getComponent("enemy").subtype=c,u.getComponent("enemy").level=o,r.currentRoom.addMovable(u,e,t),u.getComponent("movable").generate(),i.progress.seen[s]||(i.progress.seen[s]=1,i.saveProgress(),u.getComponent("movable").showDescDialog())):cc.error("enemy type:"+s+" not registered"),u},generateEnemyNumber:function(){return this.enemyNumber},generateOneEnemyType:function(){return o.sample(this.enemyPool)},generateOneEnemyLevel:function(){return o.sample(this.enemyLevelPool)},maintain:function(e){if((r.currentRoom.turn+16)%r.ENEMY_POOL_CHANGE_PER_TURN==0){var t,n=[],i=r.currentRoomScene.activeSkillCount();if(this.waitingEnemyPool.forEach(function(e){var t=e.type;if(!(i<=0)||"gargoyle"!==t&&"kobold"!==t){for(var r=0;r<this.enemyPool.length;r++)if(this.enemyPool[r].type===t)return;n.push(e)}},this),n.length<=0)return void cc.warn("this.waitingEnemyPool is too small");t=o.sample(n),r.MAX_ENEMY_TYPE_IN_FIELD>this.enemyPool.length?this.enemyPool.unshift(t):(this.enemyPool.pop(),this.enemyPool.unshift(t)),cc.log(this.enemyPool)}if(r.currentRoom.turn%r.ENEMY_LEVEL_POOL_CHANGE_PER_TURN==0){this.enemyMaxLevel++;var s=Math.max(1,this.enemyMaxLevel-r.MAX_ENEMY_LEVEL_DIFF);this.enemyLevelPool=[];for(var c=s;c<=this.enemyMaxLevel;c++)for(var a=0;a<c-s+1;a++)this.enemyLevelPool.push(this.enemyMaxLevel-c+s);cc.log("this.enemyLevelPool"+this.enemyLevelPool)}r.currentRoom.turn%r.ENEMY_NUNBER_CHANGE_PER_TURN==0&&(this.enemyNumber=Math.min(this.enemyNumber+1,r.MAX_GEN_ENEMY_NUMBER))}});cc._RF.pop()},{boss:"boss",common:"common",global:"global",storage:"storage"}],enemy:[function(e,t,n){"use strict";cc._RF.push(t,"cc654v7DCRLEZgRhqr9JEzQ","enemy");var r=e("movable"),i=e("global"),o=e("common"),s=e("storage"),c=e("effect");cc.Class({extends:r,properties:{attackRage:{get:function(){return 1},visible:!1},exp:{get:function(){return 1},visible:!1},attack:{get:function(){return 1},visible:!1},score:{get:function(){return(this.level+1)*this.level*i.SCORE_INFLATION_RATE}},attackType:{default:o.ATTACK_TYPE_MELEE,visible:!1},dexterity:{default:0,visible:!1}},ctor:function(){this.isAllFaceSame=!0,this.isMergeToSelfType=!0},onLoad:function(){this._super()},setFrame:function(){this.face===o.DIRECTION_RIGHT||this.face===o.DIRECTION_DOWN?this.mainSprite.node.scaleX<0&&(this.mainSprite.node.stopAllActions(),this.starAnimation()):this.mainSprite.node.scaleX>0&&(this.mainSprite.node.stopAllActions(),this.starAnimation())},start:function(){if(this._super(),this.attackOver=!0,this.starList=cc.find("levelIcon/starList",this.node),this.starList){this.starList=this.starList.getComponent(cc.Layout),this.star=this.starOfLevel(this.level);for(var e=0;e<this.star;e++){var t=cc.instantiate(i.currentRoom.starPrefab);this.starList.node.addChild(t)}}this.starAnimation()},starAnimation:function(){this.mainSprite.node.anchorY=0,this.mainSprite.node.y=-i.TILE_HEIGHT/2+20;var e=1;this.face!==o.DIRECTION_LEFT&&this.face!==o.DIRECTION_UP||(e=-1),this.mainSprite.node.setScale(.9*e,1.1),this.mainSprite.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.4,1.1*e,.9).easing(cc.easeIn(1)),cc.scaleTo(.4,.9*e,1.1).easing(cc.easeOut(1)))))},starOfLevel:function(e){return Math.min(i.MAX_STAR,Math.floor(this.level/i.STAR_THRESHOLD))},beforeBeAttacked:function(e){},checkHit:function(e,t){return t.type!==o.ATTACK_TYPE_MELEE||Math.random()>this.dexterity*i.ENEMY_DEXTERITY_EFFECT},dodgeAttack:function(e,t){c.labelEffect("Miss",cc.Color.BLUE,e.node)},onLevelUp:function(e){if(this.starList){for(var t=this.starOfLevel(this.level),n=this.star;n<t;n++){var r=cc.instantiate(i.currentRoom.starPrefab);this.starList.node.addChild(r)}this.star=t}this._super()},getClosestPoint:function(e){return o.min(this.positions,function(t){return o.getPointDistance(t,e)},this)},beforeBeHit:function(e,t){return t},beHit:function(e,t){if(this.alreadyDie)return t;var n=(t=this.beforeBeHit(e,t)).fromPosition,r=this.getClosestPoint(n),o=i.TILE_WIDTH*Math.max(-1,Math.min(1,n.x-r.x))/4,s=i.TILE_HEIGHT*Math.max(-1,Math.min(1,n.y-r.y))/4;return t.enemyDie=this.willDieAfterBeHit(e,t),t.enemyDie?(this.alreadyDie=!0,t.dropItemPosition=this.willDropItem(),this.node.runAction(cc.sequence(cc.moveBy(i.HERO_ATTACK_TIME/2,-o,-s).easing(cc.easeCubicActionOut()),cc.callFunc(function(){this.afterBeAttacked(e),this.die(e)},this))),this.node.runAction(cc.fadeOut(i.HERO_ATTACK_TIME/2).easing(cc.easeCubicActionIn())),t):(this.node.runAction(cc.sequence(cc.moveBy(i.HERO_ATTACK_TIME/2,-o,-s).easing(cc.easeCubicActionOut()),cc.callFunc(function(){this.afterBeAttacked(e)},this),cc.moveBy(i.HERO_ATTACK_TIME/2,o,s).easing(cc.easeCubicActionIn()))),t)},willDieAfterBeHit:function(e,t){return!0},afterBeHit:function(e){this.afterBeAttacked(e),this.die(e)},afterBeAttacked:function(e){},beforeDie:function(e){this.__dead=!0},die:function(e){this.beforeDie(e),this.afterDie(e)},willDropItem:function(){return i.roomEntry.isTutorial?(this.dropItemPosition=null,null):(this.checkDropItem()||i.currentRoom.hero.getComponent("hero").getStatus("treasure")?this.dropItemPosition=o.sample(this.positions):this.dropItemPosition=null,this.dropItemPosition)},afterDie:function(e){var t=e.adjustExp(this.exp,this);e.gainExp(t),i.currentRoomScene.gainScore(this.score),s.recordKill(this.type,this.level,i.currentRoom.turn);var n=this.level;i.currentRoom.removeMovable(this),this.dropItemPosition&&i.currentRoom.itemFactory.generateOneRandomItem(this.dropItemPosition,n);for(var r=i.currentRoom.getDrawPosition(this.positions[0].x,this.positions[0].y),o=(e=i.currentRoom.hero.getComponent("hero"),i.currentRoom.getDrawPosition(e.positions[0].x,e.positions[0].y),0);o<this.star;o++)c.gainStarInRoom({x:Math.random()*i.TILE_WIDTH+r.x-i.TILE_WIDTH/2,y:Math.random()*i.TILE_HEIGHT+r.y-i.TILE_HEIGHT/2})},checkDropItem:function(){return Math.random()<this.getDropRate()},getDropRate:function(){return Math.min(.4,(this.level+1)*i.ENEMY_LUCK_EFFECT+i.currentRoom.hero.getComponent("hero").luck*i.LUCK_EFFECT)},canAttack:function(e){return!(!this.checkRange(e)||this.getStatus("stun"))},checkRange:function(e){var t=e.positions[0],n=this.attackRage;return o.any(this.positions,function(e){return o.getPointDistance(e,t)<=n},this)},passAttack:function(){},beforeAttack:function(e){},hit:function(e){return this.attack},beforeDamageHero:function(e,t){},damageHero:function(e,t){return this.beforeDamageHero(e),t.damage=t.originDamage,t},beBlocked:function(e,t){},miss:function(e){},hitOrMiss:function(e){if(e.checkHit(this)){var t={originAttackPoint:this.hit(e)};return t.attackPoint=this.getStatus("angry")?2*t.originAttackPoint:t.originAttackPoint,(t=e.beHit(this,t)).originDamage>0?(t=this.damageHero(e,t),e.takeDamage(this,t)):(this.beBlocked(e,t),e.blocked(this,t)),this.afterHitHero(e,t),!0}return this.miss(e),e.dodgeAttack(this),!1},afterAttack:function(e){this.attackOver=!0,i.currentRoom.checkAllEnemyAttacked()},afterHitHero:function(e){},attackHero:function(e){this.attackOver=!1,e.beforeBeAttacked(this),this.beforeAttack(e);var t=e.positions[0],n=this.getClosestPoint(t),r=i.TILE_WIDTH*(t.x-n.x),s=i.TILE_HEIGHT*(t.y-n.y),c=r*r+s*s;r=r/Math.sqrt(c)*i.TILE_WIDTH/2,s=s/Math.sqrt(c)*i.TILE_HEIGHT/2,r>0?this.face=o.DIRECTION_RIGHT:r<0&&(this.face=o.DIRECTION_LEFT),this.node.runAction(cc.sequence(cc.moveBy(i.ENEMY_ATTACK_TIME/2,r,s),cc.callFunc(function(){this.hitOrMiss(e)},this),cc.moveBy(i.ENEMY_ATTACK_TIME/2,-r,-s),cc.callFunc(function(){this.afterAttack(e)},this)))}}),cc._RF.pop()},{common:"common",effect:"effect",global:"global",movable:"movable",storage:"storage"}],en:[function(e,t,n){"use strict";cc._RF.push(t,"920c5VLzJxKjYCAoIUwUHym","en"),t.exports={"ModeSelectScene/choose_hero":"Choose a hero","ModeSelectScene/choose_perks":"Choose perks","ModeSelectScene/score_adjust":"Score adjustment","ModeSelectScene/start_game":"Start Game",warriorSkillSlot3:"Warrior's 3rd skill slot",warriorSkillSlot4:"Warrior's 4th skill slot",warriorSkillSlot5:"Warrior's 5th skill slot","backwardSlashSkill/name":"Backward Slash","backwardSlashSkill/desc":"In this turn, hero will do physical attack to the emeny at his back after movement","backwardSlashSkill/levelUp":"Cool down need 1 less turn","wisdomSkill/name":"Wisdom","wisdomSkill/desc":"In this turn, hero will get %{effect}% more EXP","wisdomSkill/levelUp":"Hero will get %{effect}% more EXP, but cool down need 1 more turn","enemy/mummy":"zombie","enemy/minotaur":"\u98de\u9f99"},cc._RF.pop()},{}],exchangeSkill:[function(e,t,n){"use strict";cc._RF.push(t,"829e2bQCWhFQ5S3g6tcxfAe","exchangeSkill");var r=e("skill"),i=e("global");e("common"),e("enemy");cc.Class({extends:r,properties:{effect:{get:function(){return this.level}}},ctor:function(){this.skillName="exchangeSkill",this.icon="Skill/exchangeSkill",this.displayName="\u5b89\u88c5\u70b8\u5f39",this.desc="\u5c06\u6240\u6709\u9053\u5177\u53d8\u4e3a\u70b8\u5f39",this.coolDown=7+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");i.currentRoom.filterMovable(function(e){return e.getComponent("item")&&e.getComponent("item").exchangeable},this).forEach(function(e){var t=e.positions[0];i.currentRoom.removeMovable(e),i.currentRoom.itemFactory.generateOneItem(t,"bomb",3)},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME/2)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],exitDialog:[function(e,t,n){"use strict";cc._RF.push(t,"f659bsERlZI/Ywzf5AjgvUI","exitDialog");var r=e("global"),i=e("common"),o=e("storage");cc.Class({extends:cc.Component,properties:{effectSlider:cc.Slider,musicSlider:cc.Slider,soundToggle:cc.Toggle,soundTitle:cc.Label,musicTitle:cc.Label,allSoundTitle:cc.Label},start:function(){r.currentRoom.setAcceptInput(!1),cc.sys.platform===cc.sys.WECHAT_GAME?(this.effectSlider.node.active=this.musicSlider.node.active=this.soundTitle.node.active=this.musicTitle.node.active=!1,this.soundToggle.isChecked=cc.audioEngine.getMusicVolume()>0):(this.soundToggle.node.active=!1,this.effectSlider.progress=cc.audioEngine.getEffectsVolume(),this.musicSlider.progress=cc.audioEngine.getMusicVolume())},cancel:function(){this.node.runAction(cc.sequence(cc.fadeOut(r.DIALOG_EXIT_TIME),cc.removeSelf())),r.currentRoom.setAcceptInput(!0)},exitGame:function(){this.node.runAction(cc.sequence(cc.fadeOut(r.DIALOG_EXIT_TIME),cc.callFunc(function(){i.loadScene("MenuScene",r.currentRoomScene.node,r.loading)},this))),r.currentRoom.setAcceptInput(!0)},restartGame:function(){this.node.runAction(cc.sequence(cc.fadeOut(r.DIALOG_EXIT_TIME),cc.callFunc(function(){i.loadScene("RoomScene",r.currentRoomScene.node,r.loading)},this)))},toggleSound:function(){this.soundToggle.isChecked?(o.game.effectVolume=1,o.game.musicVolume=1,cc.audioEngine.setEffectsVolume(1),cc.audioEngine.setMusicVolume(1)):(o.game.effectVolume=0,o.game.musicVolume=0,cc.audioEngine.setEffectsVolume(0),cc.audioEngine.setMusicVolume(0)),o.saveGame()},adjustEffect:function(){o.game.effectVolume=this.effectSlider.progress,cc.audioEngine.setEffectsVolume(this.effectSlider.progress),o.saveGame()},adjustMusic:function(){o.game.musicVolume=this.musicSlider.progress,cc.audioEngine.setMusicVolume(this.musicSlider.progress),o.saveGame()}}),cc._RF.pop()},{common:"common",global:"global",storage:"storage"}],fireElement:[function(e,t,n){"use strict";cc._RF.push(t,"02e98/4A45G/YlKvSgZohV2","fireElement");var r=e("global"),i=(e("common"),e("enemy"));cc.Class({extends:i,properties:{title:{get:function(){return"\u706b\u5143\u7d20"},override:!0},desc:{get:function(){return"\u653b\u51fb\u547d\u4e2d\u65f6\u6709\u53ef\u80fd\u4f7f\u82f1\u96c4\u5931\u660e\uff08\u770b\u4e0d\u89c1\u602a\u7269\u548c\u9053\u5177\u7684\u7b49\u7ea7\uff09\n\u602a\u7269\u7b49\u7ea7\u8d8a\u9ad8\u6982\u7387\u8d8a\u9ad8\uff0c\u65f6\u95f4\u8d8a\u957f\n\u653b\u51fb\u529b\u4e00\u822c\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return(Math.round(Math.log(e+1.5)*e)+1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*Math.round(Math.log(this.level+1)*this.level)+1},override:!0}},ctor:function(){this.type="fireElement"},afterHitHero:function(e){this.checkEffect(e,2),this._super(e)},getEffectRate:function(e){return Math.min(.6,5*this.level/100+.05)},checkEffect:function(e,t){this.getEffectRate(e)>Math.random()&&(t+=Math.min(2,Math.floor(this.level/12)),e.gainStatus("blind",t))}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],fireballSkill:[function(e,t,n){"use strict";cc._RF.push(t,"1ef480qcuVDlI883EA0EDdg","fireballSkill");var r=e("skill"),i=e("global"),o=e("common"),s=e("effect");cc.Class({extends:r,properties:{effect:{get:function(){return 5+this.level}}},ctor:function(){this.skillName="fireballSkill",this.icon="Skill/fireballSkill",this.displayName="\u706b\u7403\u672f",this.desc="\u8d85\u9762\u524d\u91ca\u653e1\u4e2a\u706b\u7403\uff0c\u649e\u5230\u7b2c\u4e00\u4e2a\u4e1c\u897f\u7206\u70b8\uff0c\u8fde\u9053\u5177\u4e5f\u80fd\u6467\u6bc1",this.maxLevel=3,this.coolDown=6+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u7206\u70b8\u8303\u56f4\u52a0\u5927\uff0c\u4f46\u51b7\u5374\u65f6\u95f4\u589e\u52a03\u56de\u5408"},onLevelUp:function(e){this.coolDown+=3},onUsed:function(){for(var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n=o.getIncrementPosition(t,e.face);;){var r=i.currentRoom.getTile(n);if(!r||0==r.isPassable(e))break;if(i.currentRoom.getMovableByPosition(n))break;n=o.getIncrementPosition(n,e.face)}var c=[n];this.level>=2&&(c.push({x:n.x-1,y:n.y}),c.push({x:n.x+1,y:n.y}),c.push({x:n.x,y:n.y-1}),c.push({x:n.x,y:n.y+1})),this.level>=3&&(c.push({x:n.x-1,y:n.y-1}),c.push({x:n.x+1,y:n.y-1}),c.push({x:n.x-1,y:n.y+1}),c.push({x:n.x+1,y:n.y+1})),this.level>=4&&(c.push({x:n.x-2,y:n.y}),c.push({x:n.x+2,y:n.y}),c.push({x:n.x,y:n.y-2}),c.push({x:n.x,y:n.y+2}));var a={fromPosition:n,type:o.ATTACK_TYPE_SKILL},u={};s.projectFireball(i.currentRoom.getDrawPosition(t),i.currentRoom.getDrawPosition(n)),c.forEach(function(t){var n=i.currentRoom.getMovableByPosition(t);if(n)if(n.getComponent("enemy")){if(u[n._id])return;u[n._id]=1,n.checkHit(e,a)?n.beHit(e,a):n.dodgeAttack(e,a)}else n.getComponent("item")&&n.crash(a)},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME)}}),cc._RF.pop()},{common:"common",effect:"effect",global:"global",skill:"skill"}],floor:[function(e,t,n){"use strict";cc._RF.push(t,"136e7dDjdVJ6JFNQpxujVWi","floor");var r=e("tile");cc.Class({extends:r,properties:{},ctor:function(){this.type="floor",this._isPassable=!0,this._isCapture=!1,this._canGenEnemy=!0},start:function(){var e=Math.floor(11.9*Math.random());this.subtype="normal"+e,this._super()}}),cc._RF.pop()},{tile:"tile"}],forbid:[function(e,t,n){"use strict";cc._RF.push(t,"8db95YwYnFPzouq/M71hhds","forbid");var r=e("status"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u5c01\u9b54"}},desc:{get:function(){return"\u65e0\u6cd5\u4f7f\u7528\u6280\u80fd"}}},ctor:function(){this.statusName="forbid"},start:function(){},onGain:function(){i.currentRoomScene.forEachActiveSkill(function(e){e.isPassive||(e.getComponent("skill").forbid=!0)},this)},onLost:function(){i.currentRoomScene.forEachActiveSkill(function(e){e.isPassive||(e.getComponent("skill").forbid=!1)},this)}}),cc._RF.pop()},{global:"global",status:"status"}],forwardSlashSkill:[function(e,t,n){"use strict";cc._RF.push(t,"1a31dKrFn9L5Iqfea4oWqO0","forwardSlashSkill");var r=e("skill"),i=e("global");e("common"),e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="forwardSlashSkill",this.icon="Skill/forwardSlashSkill",this.displayName="\u987a\u52bf\u5288",this.desc="\u672c\u8f6e\u4f1a\u5bf9\u8eab\u524d\u4e24\u683c\u7684\u654c\u4eba\u8fdb\u884c\u666e\u901a\u653b\u51fb",this.coolDown=8+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown-=1,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.gainStatus("forwardSlashStatus",1),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],forwardSlashStatus:[function(e,t,n){"use strict";cc._RF.push(t,"6d934mymeZBnZ4Q86+Qct8O","forwardSlashStatus");var r=e("status"),i=e("global"),o=e("common");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="forwardSlashStatus"},start:function(){},beforeNormalAttack:function(e){this.scheduleOnce(function(){var t=o.getIncrementPosition(e.positions[0],e.face),n=i.currentRoom.getMovableByPosition(o.getIncrementPosition(t,e.face));if(n&&n.getComponent("enemy")){var r={fromPosition:t,type:o.ATTACK_TYPE_MELEE};n.checkHit(e,r)?n.beHit(e,r):n.dodgeAttack(e,r)}},i.HERO_ATTACK_TIME/2)}}),cc._RF.pop()},{common:"common",global:"global",status:"status"}],fourArrowSkill:[function(e,t,n){"use strict";cc._RF.push(t,"17e5c5v5aJFk6jXHVPvVpvZ","fourArrowSkill");var r=e("skill"),i=e("global"),o=e("common"),s=e("effect");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="fourArrowSkill",this.icon="Skill/fourArrowSkill",this.displayName="\u56db\u65b9\u7bad",this.desc="\u671d\u56db\u4e2a\u65b9\u5411\u5c04\u7bad\uff0c\u6740\u6b7b\u7b2c\u4e00\u4e2a\u654c\u4eba\u3002\u649e\u5230\u5899\u5c31\u6ca1\u7528\u4e86\u3002",this.coolDown=11+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n=[];o.DIRECTIONS.forEach(function(r){for(var c=null,a=t,u=null;;){a=o.getIncrementPosition(a,r);var l=i.currentRoom.getTile(a);if(!l||0==l.isPassable(e)){u=a;break}if((c=i.currentRoom.getMovableByPosition(a))&&c.getComponent("enemy")){u=c.getComponent("enemy").positions[0],n.push(c);break}}s.projectArrow(e.node.position,i.currentRoom.getDrawPosition(u))},this);var r={fromPosition:t,type:o.ATTACK_TYPE_SKILL};n.forEach(function(t){t.checkHit(e,r)?t.beHit(e,r):t.dodgeAttack(e,r)},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME)}}),cc._RF.pop()},{common:"common",effect:"effect",enemy:"enemy",global:"global",skill:"skill"}],fourDiagnalArrowSkill:[function(e,t,n){"use strict";cc._RF.push(t,"7f3b3b5p8BEXoi2hzq/0j8x","fourDiagnalArrowSkill");var r=e("skill"),i=e("global"),o=e("common"),s=e("effect");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="fourDiagnalArrowSkill",this.icon="Skill/fourDiagnalArrowSkill",this.displayName="\u659c\u56db\u65b9\u7bad",this.desc="\u671d\u56db\u4e2a\u659c\u65b9\u5411\u5c04\u7bad\uff0c\u6740\u6b7b\u7b2c\u4e00\u4e2a\u654c\u4eba\u3002\u649e\u5230\u5899\u5c31\u6ca1\u7528\u4e86\u3002",this.coolDown=13+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown-=1,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n=[];[0,1,2,3].forEach(function(r){for(var c=null,a=t,u=null;;){var l=o.DIAGNAL_INCREMENTS[r];a={x:a.x+l.x,y:a.y+l.y};var h=i.currentRoom.getTile(a);if(!h||0==h.isPassable(e)){u=a;break}if((c=i.currentRoom.getMovableByPosition(a))&&c.getComponent("enemy")){u=c.getComponent("enemy").positions[0],n.push(c);break}}s.projectArrow(e.node.position,i.currentRoom.getDrawPosition(u))},this);var r={fromPosition:t,type:o.ATTACK_TYPE_SKILL};n.forEach(function(t){t.checkHit(e,r)?t.beHit(e,r):t.dodgeAttack(e,r)},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME)}}),cc._RF.pop()},{common:"common",effect:"effect",enemy:"enemy",global:"global",skill:"skill"}],frozen:[function(e,t,n){"use strict";cc._RF.push(t,"f95bfHDumZB0LzBoLgDDVsy","frozen");var r=e("status");cc.Class({extends:r,properties:{title:{get:function(){return"\u51bb\u7ed3"}},desc:{get:function(){return"\u65e0\u6cd5\u79fb\u52a8"}}},ctor:function(){this.statusName="frozen"},start:function(){}}),cc._RF.pop()},{status:"status"}],gameOverDialog:[function(e,t,n){"use strict";cc._RF.push(t,"247e49nM+ZP26G7vrWzRbIo","gameOverDialog");var r=e("global"),i=e("common"),o=e("storage"),s=e("LeanCloudDataSource"),c=e("effect");cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label,skillPerkList:cc.Layout,submitButton:cc.Button,inputNameDialog:cc.Prefab,doubleReward:cc.Button,rewardLabel:cc.Label},start:function(){this.submitScore(),this.rewardTaken=0,this.doubleRewardTaken=!1,this.checkAd(),this.getReward()},submitScore:function(e,t){r.dataSource||(r.dataSource=new s),this.scoreEntry.nickname=o.userInfo.nickname,this.scoreEntry.avatarUrl=o.userInfo.avatarUrl,r.dataSource.submitScore(this.scoreEntry,{success:function(){e&&e.call(t)},error:function(e){},context:this})},loadIcon:function(e,t){cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.spriteFrame=n,e.node.width=50,e.node.height=50})},getReward:function(){var e=r.currentRoom.turn,t=1;t+=Math.ceil(Math.max(0,e)/10),t+=Math.ceil(r.currentRoom.hero.getComponent("hero").level/2);for(var n=Math.ceil(t/10),i=this,o=0;o<10&&!(t<=0);o++)(t-=n)<0&&(n+=t),function(e,t){i.scheduleOnce(function(){i.rewardTaken+=e,i.rewardLabel.string=i.rewardTaken,c.gainStarInRoom(i.rewardLabel.node.position,e)},t)}(n,.1*o)},checkAd:function(){this.adPrepared=!0,this.adPrepared&&!this.doubleRewardTaken?this.doubleReward.node.active=!0:this.doubleReward.node.active=!1},takeDoubleReward:function(){this.playAd({success:function(){this.doubleRewardTaken=!0,this.checkAd(),this.getReward()},context:this})},playAd:function(e){e.success.call(e.context)},setReason:function(e){cc.log("setReason"),this.scoreEntry={detail:{}},o.userInfo&&(this.scoreEntry.nickname=o.userInfo.nickname,this.scoreEntry.avatarUrl=o.userInfo.avatarUrl),o.recordGameOver(e,r.currentRoom,r.currentRoom.hero.getComponent("hero")),this.scoreLabel.string="",this.scoreLabel.string+="\u5206\u6570\uff1a"+r.currentRoomScene.score+"\n",this.scoreLabel.string+="\u7ecf\u8fc7"+r.currentRoom.turn+"\u56de\u5408\n",this.scoreLabel.string+="\u5347\u5230Lv"+r.currentRoom.hero.getComponent("hero").level+"\n",this.scoreLabel.string+="\u53d7\u5230"+e.damage+"\u4f24\u5bb3",this.scoreLabel.string+="\u6b7b\u4e8e","poison"===e.type?this.scoreLabel.string+="\u4e2d\u6bd2":"nail"===e.type?this.scoreLabel.string+="\u9677\u9631":"enemy"===e.type&&(e.enemy.isBoss?this.scoreLabel.string+=e.enemy.title:this.scoreLabel.string+="LV"+e.enemy.level+e.enemy.title);var t=new cc.Node;t.addComponent(cc.Sprite),this.loadIcon(t.getComponent(cc.Sprite),"Texture/Unlock/unlock-"+r.currentRoom.hero.getComponent("hero").subtype),t.y=0,this.skillPerkList.node.addChild(t),this.scoreEntry.detail.skills=[],r.currentRoomScene.forEachActiveSkill(function(e){var t=new cc.Node;t.addComponent(cc.Sprite),this.loadIcon(t.getComponent(cc.Sprite),"Texture/Skill/"+e.skillName),this.scoreEntry.detail.skills.push(e.skillName),t.y=0,this.skillPerkList.node.addChild(t)},this),this.scoreEntry.detail.perks=[],r.selectedPerk.forEach(function(e){var t=new cc.Node;t.addComponent(cc.Sprite),this.loadIcon(t.getComponent(cc.Sprite),"Texture/Perk/"+e),this.scoreEntry.detail.perks.push(e),t.y=0,this.skillPerkList.node.addChild(t)},this),o.recordLastGame(r.currentRoom,r.currentRoom.hero.getComponent("hero"),this.scoreEntry.detail.perks),r.currentRoom.node.active=!1,r.currentRoomScene.effectLayer.active=!1,r.currentRoomScene.exitButton.node.active=!1,this.scoreEntry.score=r.currentRoomScene.score,this.scoreEntry.turn=r.currentRoom.turn,this.scoreEntry.detail.level=r.currentRoom.hero.getComponent("hero").level,this.scoreEntry.detail.type=r.currentRoom.hero.getComponent("hero").subtype,this.scoreEntry.detail.killedBy={type:e.type,damage:e.damage},"enemy"===e.type&&(this.scoreEntry.detail.killedBy.enemy=e.enemy.type,this.scoreEntry.detail.killedBy.level=e.enemy.level)},toScoreBoard:function(){r.currentRoom.destroy(),r.currentRoom=null,i.loadScene("LeaderBoardScene",r.currentRoomScene.node,r.loading,function(){}),r.currentRoomScene=null},home:function(){r.currentRoom.destroy(),r.currentRoom=null,i.loadScene("MenuScene",r.currentRoomScene.node,r.loading),r.currentRoomScene=null},restart:function(){this.node.runAction(cc.sequence(cc.fadeOut(r.DIALOG_EXIT_TIME),cc.callFunc(function(){i.loadScene("RoomScene",r.currentRoomScene.node,r.loading)},this)))},onDestroy:function(){this.wxUserInfoButton&&this.wxUserInfoButton.destroy()}}),cc._RF.pop()},{LeanCloudDataSource:"LeanCloudDataSource",common:"common",effect:"effect",global:"global",storage:"storage"}],gargoyle:[function(e,t,n){"use strict";cc._RF.push(t,"0adda2rRLdNGb1oi+4Jto50","gargoyle");var r=e("global"),i=e("enemy");cc.Class({extends:i,properties:{title:{get:function(){return"\u77f3\u50cf\u9b3c"},override:!0},desc:{get:function(){return"\u51fb\u4e2d\u9020\u6210\u5c01\u9b54\u6548\u679c\uff08\u4f7f\u4f60\u65e0\u6cd5\u4f7f\u7528\u6280\u80fd\uff09\uff08\u7b49\u7ea7\u8d8a\u9ad8\u6301\u7eed\u65f6\u95f4\u8d8a\u957f\uff09\u3002\n\u653b\u51fb\u529b\u8f83\u4f4e\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){return 3*(this.level+this.star)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level},override:!0}},ctor:function(){this.type="gargoyle"},afterHitHero:function(e){e.gainStatus("forbid",Math.min(8,Math.round(this.level/3))+2),this._super(e)}}),cc._RF.pop()},{enemy:"enemy",global:"global"}],gem:[function(e,t,n){"use strict";cc._RF.push(t,"fffcbcEhvlHEbt81Kcw4Iww","gem");var r=e("item"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u5b9d\u77f3"},override:!0},desc:{get:function(){return""},override:!0},score:{get:function(){return this.level*i.SCORE_INFLATION_RATE},override:!0}},ctor:function(){this.type="gem",this.breakable=!0,this.isMergeToSelfType=!1}}),cc._RF.pop()},{global:"global",item:"item"}],ghost:[function(e,t,n){"use strict";cc._RF.push(t,"0ead9nH1TNMN7/9x2og1Gqr","ghost");var r=e("global"),i=e("enemy");cc.Class({extends:i,properties:{title:{get:function(){return"\u5e7d\u7075"},override:!0},desc:{get:function(){return"\u4e00\u5b9a\u6982\u7387\u8eb2\u8fc7\u8fd1\u666e\u901a\u653b\u51fb\uff08\u7b49\u7ea7\u8d8a\u9ad8\u6982\u7387\u8d8a\u9ad8\uff09\u3002\n\u653b\u51fb\u529b\u5f88\u4f4e\u3002\n\u7ecf\u9a8c\u503c\u8f83\u4f4e\u3002"},override:!0},exp:{get:function(){return(this.level+this.star)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*Math.round(this.level/2)},override:!0},dexterity:{get:function(){return Math.min(83,this.level*(this.level+1)/2+5)},override:!0},isUndead:!0},ctor:function(){this.type="ghost"}}),cc._RF.pop()},{enemy:"enemy",global:"global"}],global:[function(e,t,n){"use strict";cc._RF.push(t,"984efKWPWtEyJ40FhND7bh5","global"),t.exports={currentRoom:null,currentRoomScene:null,STEP_TIME:.13,GENERATE_TIME:.25,HERO_ATTACK_TIME:.3,ENEMY_ATTACK_TIME:.3,DIALOG_EXIT_TIME:.4,CHOICE_SELECT_TIME:.2,GET_STAR_TIME:.3,LOSE_STATUS_TIME:.2,TELEPORT_TIME:.3,TILE_WIDTH:120,TILE_HEIGHT:120,ROOM_PADDING:20,ORIGIN_DISAPPEAR_THRESHOLD:3,ORIGIN_GEM_PER_TURN:3,ORIGIN_BASE_HP:15,ORIGIN_HP_PER_LEVEL:10,ORIGIN_SCORE_INFLATION_RATE:20,ORIGIN_EXP_INFLATION_RATE:10,ORIGIN_MONEY_INFLATION_RATE:1,ORIGIN_STAR_THRESHOLD:6,ORIGIN_MAX_LEVEL_ADJUST:0,MAX_STAR:5,ORIGIN_CONSTITUTION_EFFECT:10,ORIGIN_POTION_EFFECT:10,ORIGIN_ENEMY_EXP_ADJUST:0,ORIGIN_CHOICE_NUMBER:3,ORIGIN_SKILL_WAIT_ADJUST:0,ORIGIN_ENEMY_LUCK_EFFECT:.005,ORIGIN_LUCK_EFFECT:.01,ORIGIN_ENEMY_DEXTERITY_EFFECT:.01,ORIGIN_DEXTERITY_EFFECT:.05,ORIGIN_RECOVERY:0,ORIGIN_WISDOM_EFFECT:.05,ORIGIN_NEGATIVE_EFFECT_TIME_ADJUST:0,ORIGIN_ITEM_LEVEL_ADJUST:0,NEGATIVE_EFFECTS:["frozen","cursed","dizzy","forbid","poison","blind","stun","slowed"],ENEMY_POOL_CHANGE_PER_TURN:29,ENEMY_LEVEL_POOL_CHANGE_PER_TURN:53,ENEMY_NUNBER_CHANGE_PER_TURN:301,BOSS_APPEAR_PER_TURN:91,ORIGIN_MAX_ENEMY_TYPE_IN_FIELD:3,MAX_GEN_ENEMY_NUMBER:4,MAX_ENEMY_LEVEL_DIFF:2,HERO_TOMB_THRESHOLD:50,MAX_PERK:4,PERK_SCORE_ADJUST:.05,REWARD_THRESHOLD:50,currentHeroType:"normal",selectedPerk:[],currentSkillPool:[],movablePrefabs:{},ORIGIN_TURN_TIMEOUT:4,basicSkill:["coolingSkill","constitutionSkill","dexteritySkill","luckSkill"],heroBasicSkill:{normal:["forwardSlashSkill","horizontalSlashSkill","verticalSlashSkill"],wizard:["missileSkill","spiderWebSkill","iceWallSkill"],cleric:["healSkill","dispelSkill","shieldSkill","calmSkill"],thief:["fourArrowSkill","fourDiagnalArrowSkill","bombSkill"]},heroUnlockableSkill:{normal:["backwardSlashSkill","whirlSkill","bigWhirlSkill","crossSlashSkill"],wizard:["teleportSkill","meteorShowerSkill","lighteningSkill","fireballSkill","tornadoSkill"],cleric:["turnUndeadSkill","resurrectionSkill","wisdomSkill","angelSkill"],thief:["eightArrowSkill","smokingBombSkill","treasureSkill","exchangeSkill","blinkSkill"]},initEnemyPool:[{type:"slime",subtype:"R"},{type:"slime",subtype:"G"},{type:"slime",subtype:"Y"}],initItemPool:["gemR","gemG","gemY","gemB","gemW","gemP","gemO","gemBr","gemBl","gemI"],enemyList:["archer","ballista","catapult","centaur","chomper","fireElement","gargoyle","ghost","golem","killerBee","kobold","medusa","mimic","minotaur","mummy","ooze","orcChief","orge","ratman","scorpion","skeleton","shaman","snake","summoner","treant","troll","vampire"],bossPool:["bossBeholder","bossHydra","bossDeath"],loadRoomEntry:function(e){this.exit=!1,this.roomEntry=e},reset:function(){this.ITEM_POOL=this.initItemPool,this.BASE_HP=this.ORIGIN_BASE_HP,this.INIT_HP=null,this.HP_PER_LEVEL=this.ORIGIN_HP_PER_LEVEL,this.SCORE_INFLATION_RATE=this.ORIGIN_SCORE_INFLATION_RATE,this.EXP_INFLATION_RATE=this.ORIGIN_EXP_INFLATION_RATE,this.MONEY_INFLATION_RATE=this.ORIGIN_MONEY_INFLATION_RATE,this.STAR_THRESHOLD=this.ORIGIN_STAR_THRESHOLD,this.CONSTITUTION_EFFECT=this.ORIGIN_CONSTITUTION_EFFECT,this.POTION_EFFECT=this.ORIGIN_POTION_EFFECT,this.ENEMY_EXP_ADJUST=this.ORIGIN_ENEMY_EXP_ADJUST,this.CHOICE_NUMBER=this.ORIGIN_CHOICE_NUMBER,this.SKILL_WAIT_ADJUST=this.ORIGIN_SKILL_WAIT_ADJUST,this.ENEMY_LUCK_EFFECT=this.ORIGIN_ENEMY_LUCK_EFFECT,this.LUCK_EFFECT=this.ORIGIN_LUCK_EFFECT,this.ENEMY_DEXTERITY_EFFECT=this.ORIGIN_ENEMY_DEXTERITY_EFFECT,this.DEXTERITY_EFFECT=this.ORIGIN_DEXTERITY_EFFECT,this.RECOVERY=this.ORIGIN_RECOVERY,this.WISDOM_EFFECT=this.ORIGIN_WISDOM_EFFECT,this.NEGATIVE_EFFECT_TIME_ADJUST=this.ORIGIN_NEGATIVE_EFFECT_TIME_ADJUST,this.ITEM_LEVEL_ADJUST=this.ORIGIN_ITEM_LEVEL_ADJUST,this.MAX_LEVEL_ADJUST=this.ORIGIN_MAX_LEVEL_ADJUST,this.MAX_ENEMY_TYPE_IN_FIELD=this.ORIGIN_MAX_ENEMY_TYPE_IN_FIELD,this.FORWARD_AFTER_KILL=!1,this.MANY_SKILL=this.LESS_EXP_BELOW_6=!1,this.MORE_EXP_ABOVE_12=0,this.DISAPPEAR_THRESHOLD=this.ORIGIN_DISAPPEAR_THRESHOLD,this.GEM_PER_TURN=this.ORIGIN_GEM_PER_TURN,this.TURN_TIMEOUT=this.ORIGIN_TURN_TIMEOUT}},cc._RF.pop()},{}],golem:[function(e,t,n){"use strict";cc._RF.push(t,"93037UwePxCK5BEQON7+2As","golem");var r=e("global"),i=e("enemy"),o=e("common");cc.Class({extends:i,properties:{title:{get:function(){return"\u9b54\u50cf"},override:!0},desc:{get:function(){return"\u4f60\u7684\u6280\u80fd\u653b\u51fb\u5bf9\u4ed6\u65e0\u6548\uff0c\u4e14\u4f1a\u8ba9\u4ed6\u5347\u7ea7\u3002\n\u653b\u51fb\u529b\u5f88\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u5f88\u9ad8\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return Math.round(Math.log(e+1)*e+1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*Math.round(Math.log(this.level+1)*this.level+1)},override:!0}},ctor:function(){this.type="golem"},beHit:function(e,t){return t.type===o.ATTACK_TYPE_SKILL?(this.level++,this._super(e,t),!1):this._super(e,t)},willDieAfterBeHit:function(e,t){return t.type!==o.ATTACK_TYPE_SKILL}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],healSkill:[function(e,t,n){"use strict";cc._RF.push(t,"c41eeQmITtJJJieQhlwLkp5","healSkill");var r=e("skill"),i=e("global");cc.Class({extends:r,properties:{effect:{get:function(){return this.effectOfLevel(this.level)}},desc:{get:function(){return"\u6cbb\u7597"+this.effect+"\u751f\u547d"}}},ctor:function(){this.skillName="healSkill",this.icon="Skill/healSkill",this.displayName="\u6cbb\u7597",this.coolDown=6+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u591a\u6cbb\u7597"+(this.effectOfLevel(e)-this.effectOfLevel(e-1))+"\u751f\u547d,\u4f46\u51b7\u5374\u65f6\u95f4\u591a2\u56de\u5408"},effectOfLevel:function(e){return 5*e+5},onLevelUp:function(e){this.coolDown+=2},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.gainHp(this.effect),e.afterUseSkill()}}),cc._RF.pop()},{global:"global",skill:"skill"}],heroDescDialog:[function(e,t,n){"use strict";cc._RF.push(t,"c2ec6iKqo5HyqFEMBrSkgEk","heroDescDialog");var r=e("global");cc.Class({extends:cc.Component,properties:{icon:cc.Sprite,titleLabel:cc.Label,descLabel:cc.Label},start:function(){var e=this;r.currentRoom.setAcceptInput(!1);var t=r.currentHeroType;cc.loader.loadRes("Texture/Unlock/unlock-"+t,cc.SpriteFrame,function(t,n){e.icon.spriteFrame=n}),this.titleLabel.string={normal:"\u6218\u58eb",cleric:"\u7267\u5e08",wizard:"\u6cd5\u5e08",thief:"\u76d7\u8d3c"}[t];var n="",i=!1;r.currentRoomScene.forEachSkill(function(e){e.isPassive&&(i=!0,n+="Lv"+e.level+" "+e.displayName+":"+e.desc+"\n")},this),i||(n+="\u65e0\u88ab\u52a8\u6280\u80fd\n");var o=!1;r.currentRoom.hero.getComponent("movable").forEachStatus(function(e){e.desc&&(o=!0,n+=e.title,-1!==e.duration&&(n+="("+e.duration+"\u56de\u5408)"),n+=" :"+e.desc,n+="\n")},this),o||(n+="\u65e0\u5f02\u5e38\u72b6\u6001"),this.descLabel.string=n},closeDialog:function(){this.node.runAction(cc.sequence(cc.fadeOut(r.DIALOG_EXIT_TIME),cc.removeSelf())),r.currentRoom.setAcceptInput(!0)}}),cc._RF.pop()},{global:"global"}],heroOption:[function(e,t,n){"use strict";cc._RF.push(t,"747d2f1R2lESp6u/3+kfEFZ","heroOption");var r=e("storage");e("global");cc.Class({extends:cc.Component,properties:{heroType:"",lockIcon:cc.Sprite,scene:cc.Sprite},start:function(){var e=this;this.validate(),this.node.on("touchend",function(t){r.unlocked[e.heroType]&&e.scene.getComponent("modeSelectScene").selectHeroType(e.heroType)})},validate:function(){this.lockIcon.node.active=!r.unlocked[this.heroType]}}),cc._RF.pop()},{global:"global",storage:"storage"}],hero:[function(e,t,n){"use strict";var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"d9d30Yzvx9BWoe+LR1OKG6E","hero");var o=e("movable"),s=e("global"),c=e("common"),a=e("enemy"),u=e("storage"),l=e("effect");cc.Class({extends:o,properties:(r={levelUpDialog:cc.Prefab,maxHp:{get:function(){return Math.round(s.BASE_HP+(this.level-1)*s.HP_PER_LEVEL+this.constitution*s.CONSTITUTION_EFFECT)}},hp:{default:0,notify:function(e){e!==this.hp&&s.currentRoomScene&&(s.currentRoomScene.lifeLabel.string=this.hp,s.currentRoomScene.hpBar.progress=this.hp/this.maxHp,this.hp<=this.maxHp/5&&0!==this.hp?s.currentRoomScene.dying(!0):s.currentRoomScene.dying(!1))}},exp:{default:0,notify:function(e){e!==this.exp&&s.currentRoomScene&&(s.currentRoomScene.expLabel.string=this.exp+"/"+this.maxExp)}},extraExp:0,level:{override:!0,default:1,visible:!1,notify:function(e){e!==this.level&&(this.exp=0,this.gainHp(this.maxHp-this.hp),s.currentRoomScene&&(s.currentRoomScene.levelLabel.string=this.level),s.currentRoomScene&&(s.currentRoomScene.lifeLabel.string=this.hp,s.currentRoomScene.hpBar.progress=this.hp/this.maxHp),s.currentRoomScene&&(s.currentRoomScene.expLabel.string=this.exp+"/"+this.maxExp))}},maxExp:{get:function(){var e=this.level;return Math.round((Math.log10(e)*e*16.61+10)*s.EXP_INFLATION_RATE)}}},i(r,"extraExp",0),i(r,"choiceNumber",{get:function(){return s.CHOICE_NUMBER}}),i(r,"luck",0),i(r,"constitution",{default:0,notify:function(e){e!==this.constitution&&this.gainHp(Math.round(s.CONSTITUTION_EFFECT*(this.constitution-e)))}}),i(r,"dexterity",0),i(r,"dodge",0),i(r,"wisdom",0),i(r,"defend",0),r),ctor:function(){this.isAllFaceSame=!1,this.type="hero",this.subtype="normal",this.isMergeToSelfType=!1,this.accept=["potion","poisonPotion","tomb","manaPotion"],this.dead=!1},onLoad:function(){var e=this;this._super(),cc.loader.loadRes("Texture/Hero/hero-"+this.subtype,cc.SpriteAtlas,function(t,n){e.atlas=n,e.setFrame()})},start:function(){s.INIT_HP?this.hp=s.INIT_HP:this.hp=s.BASE_HP,s.currentRoomScene&&(s.currentRoomScene.lifeLabel.string=this.hp,s.currentRoomScene.hpBar.progress=this.hp/this.maxHp),this._super()},beforeNormalAttack:function(){this.forEachStatus(function(e){e.beforeNormalAttack&&e.beforeNormalAttack(this)},this)},normalAttack:function(){var e=this;this.beforeNormalAttack();var t=s.currentRoom.getMovableByPosition(c.getIncrementPosition(this.positions[0],this.face));if(t instanceof a&&this.canAttack(t)){t.beforeBeAttacked(this);var n=c.INCREMENTS[this.face],r=s.TILE_WIDTH*n.x/2,i=s.TILE_HEIGHT*n.y/2;this.node.runAction(cc.sequence(cc.moveBy(s.HERO_ATTACK_TIME/2,r,i),cc.callFunc(function(){this.hitOrMiss(t)},this)))}else cc.log("PHASE:heroAttack skipped"),s.currentRoom.scheduleOnce(function(){s.currentRoom.node.emit("hero-attack-complete",e)},s.currentRoom.delayPhaseTime)},canAttack:function(e){return!this.getStatus("stun")},hitOrMiss:function(e){var t={fromPosition:this.positions[0],type:c.ATTACK_TYPE_MELEE};if(e.checkHit(this,t)){this.beforeHit(e);var n=e.beHit(this,t);if(n.enemyDie){var r=c.getIncrementPosition(this.positions[0],this.face),i=!n.dropItemPosition||n.dropItemPosition.x!==r.x||n.dropItemPosition.y!==r.y;s.FORWARD_AFTER_KILL&&this.isMovable(this.face)&&i?this.forward(function(){this.afterHit(e)},this):this.backward(function(){this.afterHit(e)},this)}else this.backward(function(){this.afterHit(e)},this);return!0}return this.miss(e),e.dodgeAttack(this,t),!1},forward:function(e,t){var n=c.getIncrementPosition(this.positions[0],this.face),r=s.currentRoom.getDrawPosition(n);this.node.runAction(cc.sequence(cc.moveTo(s.HERO_ATTACK_TIME/2+.1,r.x,r.y),cc.callFunc(function(){this.__removeOldMapping(),this.setNewPosition(n)},this),cc.callFunc(e,t)))},backward:function(e,t){var n=s.currentRoom.getDrawPosition(this.positions[0]);this.node.runAction(cc.sequence(cc.moveTo(s.HERO_ATTACK_TIME/2+.1,n.x,n.y),cc.callFunc(e,t)))},beforeHit:function(e){},afterHit:function(e){s.currentRoom.node.emit("hero-attack-complete",this)},miss:function(e){var t=s.currentRoom.getDrawPosition(this.positions[0]);this.node.runAction(cc.sequence(cc.moveTo(s.HERO_ATTACK_TIME/2+.1,t.x,t.y),cc.callFunc(function(){s.currentRoom.node.emit("hero-attack-complete",this)},this)))},adjustExp:function(e,t){var n=0;return t&&(s.LESS_EXP_BELOW_6&&t.level<=6?n=-.4:s.MORE_EXP_ABOVE_12&&t.level>=12&&(n=.1*s.MORE_EXP_ABOVE_12)),Math.round((1+this.wisdom*s.WISDOM_EFFECT+n)*e)+s.ENEMY_EXP_ADJUST},gainExp:function(e){s.roomEntry.isTutorial||(e+this.exp<=this.maxExp?this.exp+=e:(this.extraExp=e-(this.maxExp-this.exp),this.exp=this.maxExp))},gainHp:function(e){var t=Math.min(this.maxHp,this.hp+e)-this.hp;this.getStatus("cursed")&&(t=Math.round(t/2),this.lostStatus("cursed")),l.labelEffect("+"+t,cc.Color.RED,this.node),this.hp+=t,this.lostStatus("poison")},checkLevelUp:function(){if(this.exp>=this.maxExp){this.exp=0,this.level++;var e=cc.instantiate(this.levelUpDialog);return e.getComponent("levelUpDialog").initChoicePool(s.currentChoicePool,this.choiceNumber,function(){this.afterLevelupDialog()},this),s.currentRoomScene.node.addChild(e),!0}return!1},afterLevelupDialog:function(){this.gainExp(this.extraExp),this.checkLevelUp()||("heroAttack"==s.currentRoom._phase?s.currentRoom.node.emit("enemy-attack-start"):"turnEnd"==s.currentRoom._phase?s.currentRoom.afterTurnEnd():s.currentRoom.setAcceptInput(!0))},afterUseSkill:function(){this.checkLevelUp()||s.currentRoom.setAcceptInput(!0),u.saveStatistics()},beforeBeAttacked:function(e){},checkHit:function(e){return Math.random()>this.dexterity*s.DEXTERITY_EFFECT},beforeBeHit:function(e,t){return t.originDamage=Math.max(0,t.attackPoint-this.defend),t},beHit:function(e,t){return this.beforeBeHit(e,t)},afterBeHit:function(e,t){this.afterBeAttacked(e)},blocked:function(e,t){var n=l.getLabelEffectPosition(this.positions[0],e.positions[0]);l.labelEffect("Block",cc.Color.BLUE,this.node,n)},beforeDodgeAttack:function(e){},dodgeAttack:function(e){this.beforeDodgeAttack(e);var t=l.getLabelEffectPosition(this.positions[0],e.positions[0]);l.labelEffect("Miss",cc.Color.BLUE,this.node,t)},afterDodgeAttack:function(e){this.afterBeAttacked(e)},beforeTakeDamage:function(e,t){},takeDamage:function(e,t){this.beforeTakeDamage(e,t),this.loseHp(t.damage,{type:"enemy",enemy:e})},loseHp:function(e,t){if("enemy"==t.type){var n=l.getLabelEffectPosition(this.positions[0],t.enemy.positions[0]);l.labelEffect("-"+e,cc.Color.RED,this.node,n)}else"poison"==t.type?l.labelEffect("-"+e,cc.Color.GREEN,this.node,{x:0,y:0}):l.labelEffect("-"+e,cc.Color.RED,this.node,{x:0,y:0});s.roomEntry.isTutorial||(this.hp=Math.max(0,this.hp-e),this.dead||0!=this.hp||(this.dead=!0,t.damage=e,this.deadReason=t))},checkDead:function(){if(this.dead){var e=this.getStatus("resurrection");return e?(this.gainHp(Math.round(this.maxHp*e.effect)),this.dead=!1,this.deadReason=null,!1):(s.currentRoomScene.gameOver(this.deadReason),!0)}return!1},afterTakeDamage:function(e,t){},afterBeMerged:function(e){},showDescDialog:function(){var e=cc.instantiate(s.currentRoomScene.heroDescDialog);return s.currentRoomScene.node.addChild(e),e},mergeTo:function(e){e.node.runAction(cc.sequence(cc.fadeOut(s.STEP_TIME/2-.01),cc.callFunc(function(){e.afterMergeTo(this)},this)))},gainStatus:function(e,t,n){if(c.contains(s.NEGATIVE_EFFECTS,e)){if(this.getStatus("prevent"))return;-1!==t&&(t+=s.NEGATIVE_EFFECT_TIME_ADJUST)}this._super(e,t,n)},getDisturb:function(e){this.getStatus("prevent")||s.currentRoomScene.forEachActiveSkill(function(t){t.disturb(e)})},onTurnEnd:function(){1===this.hp&&u.recordInfo("survive1hp");var e=!1,t=!1;s.currentRoom.foreachTile(function(n){var r=s.currentRoom.getMovableByTile(n);r?r.getComponent("enemy")&&(e=!0):t=!0},this),e||u.recordInfo("allClear"),t||u.recordInfo("allFull"),this._super()}}),cc._RF.pop()},{common:"common",effect:"effect",enemy:"enemy",global:"global",movable:"movable",storage:"storage"}],hlog2:[function(e,t,n){"use strict";cc._RF.push(t,"d4fc2G6yv9FJI/WVy8LamwA","hlog2");var r=e("item"),i=(e("global"),e("common"));cc.Class({extends:r,properties:{title:{get:function(){return"\u6eda\u6728"},override:!0},desc:{get:function(){return"\u53ea\u80fd\u4e0a\u4e0b\u6eda\u52a8"},override:!0}},ctor:function(){this.type="hlog2",this.relativePositions=[{x:0,y:0},{x:1,y:0}],this.breakable=!1,this.exchangeable=!1},isMovable:function(e){return this._super(e)&&(e==i.DIRECTION_UP||e==i.DIRECTION_DOWN)}}),cc._RF.pop()},{common:"common",global:"global",item:"item"}],hlog3:[function(e,t,n){"use strict";cc._RF.push(t,"7ccf5hSu9ZMPqp4xi2UZzYX","hlog3");var r=e("hlog2");cc.Class({extends:r,properties:{},ctor:function(){this.type="hlog3",this.relativePositions=[{x:0,y:0},{x:1,y:0},{x:2,y:0}],this.breakable=!1,this.exchangeable=!1}}),cc._RF.pop()},{hlog2:"hlog2"}],hlog4:[function(e,t,n){"use strict";cc._RF.push(t,"8191eaiDGZJv7iwDLWuQqf4","hlog4");var r=e("hlog2");cc.Class({extends:r,properties:{},ctor:function(){this.type="hlog4",this.relativePositions=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:3,y:0}],this.breakable=!1,this.exchangeable=!1}}),cc._RF.pop()},{hlog2:"hlog2"}],hlog5:[function(e,t,n){"use strict";cc._RF.push(t,"77395tlzadGJ5jVokP2atoC","hlog5");var r=e("hlog2");cc.Class({extends:r,properties:{},ctor:function(){this.type="hlog5",this.relativePositions=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:3,y:0},{x:4,y:0}],this.breakable=!1,this.exchangeable=!1}}),cc._RF.pop()},{hlog2:"hlog2"}],horizontalSlashSkill:[function(e,t,n){"use strict";cc._RF.push(t,"60b79leMu5K4LpcShXPWqe4","horizontalSlashSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="horizontalSlashSkill",this.icon="Skill/horizontalSlashSkill",this.displayName="\u6a2a\u65a9",this.desc="\u653b\u51fb\u6240\u5728\u884c\u6240\u6709\u7684\u654c\u4eba",this.coolDown=12+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown-=1,this.reduceWait(1)},onUsed:function(){for(var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n={fromPosition:t,type:o.ATTACK_TYPE_SKILL},r={},s=0;s<i.currentRoom.width;s++){var c=i.currentRoom.getMovableByPosition(s,t.y);if(c&&c.getComponent("enemy")){if(r[c._id])continue;r[c._id]=1,c.checkHit(e,n)?c.beHit(e,n):c.dodgeAttack(e,n)}}this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME/2)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],i18n:[function(e,t,n){"use strict";cc._RF.push(t,"93789C/shtIL6entYsZPjee","i18n");var r=e("polyglot"),i=void 0;if("zh"===cc.sys.language){var o=cc.sys.languageCode.toLowerCase();o=o.replace("-","_"),i=e("zh"===o||"zh_cn"===o||"zh_hans"===o||"zh_chs"===o?"zh":"zh_tw")}else i=e("en");var s=new r({phrases:i,allowMissing:!0});t.exports={init:function(t){lang=t,i=e("zh"===t?"zh":"en"),s.replace(i)},t:function(e,t){return s.t(e,t)}},cc._RF.pop()},{en:"en",polyglot:"polyglot",zh:"zh",zh_tw:"zh_tw"}],iceWallSkill:[function(e,t,n){"use strict";cc._RF.push(t,"95c6eW6TJhBiadqDyCRaMtF","iceWallSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{effect:{get:function(){return this.level}},desc:{get:function(){return"\u5728\u8eab\u540e\u4ea7\u751f\u4e00\u9762\u51b0\u5899\uff0c\u6301\u7eed"+this.effect+"\u56de\u5408\u3002\u5982\u679c\u4f4d\u7f6e\u4e0a\u6709\u654c\u4eba\uff0c\u5c06\u5176\u6740\u6b7b"}}},ctor:function(){this.skillName="iceWallSkill",this.icon="Skill/iceWallSkill",this.displayName="\u51b0\u5899",this.coolDown=10+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b0\u5899\u6301\u7eed\u65f6\u95f4\u53d8\u957f1\u56de\u5408"},onLevelUp:function(e){},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n=o.getDecrementPosition(t,e.face),r=i.currentRoom.getTile(n);if(r&&r.isPassable(e)){var s=i.currentRoom.getMovableByPosition(n);if(s&&s.getComponent("enemy")){var c={fromPosition:{x:n.x,y:n.y-1},type:o.ATTACK_TYPE_SKILL};s.willDieAfterBeHit(e,c)&&(s.beHit(e,c),this.generateWall(n))}else this.generateWall(n)}this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME/2)},generateWall:function(e){i.currentRoom.itemFactory.generateOneItem(e,"iceWall",this.effect)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],iceWall:[function(e,t,n){"use strict";cc._RF.push(t,"7f2e1LkZk9APqRNPAjyvvlt","iceWall");var r=e("item"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u51b0\u5899"},override:!0},desc:{get:function(){return"\u6280\u80fd\u7b49\u7ea7\u8d8a\u9ad8\u6301\u7eed\u65f6\u95f4\u8d8a\u957f"},override:!0},score:{get:function(){return this.level*i.SCORE_INFLATION_RATE},override:!0}},ctor:function(){this.type="iceWall",this._isMovable=!1,this.exchangeable=!1,this.breakable=!0},start:function(){this._super(),this.node.y=this.node.y-80,this.node.runAction(cc.spawn(cc.moveBy(i.HERO_ATTACK_TIME/2,0,80).easing(cc.easeIn(1)),cc.fadeIn(i.HERO_ATTACK_TIME/2)))},onTurnEnd:function(){this.level--,this.level<=0&&this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(i.HERO_ATTACK_TIME/2,0,-60),cc.scaleTo(i.HERO_ATTACK_TIME/2,0,0)),cc.callFunc(function(){i.currentRoom.removeMovable(this)},this)))},hideLevel:function(e){}}),cc._RF.pop()},{global:"global",item:"item"}],inputNameDialog:[function(e,t,n){"use strict";cc._RF.push(t,"967bfIg+yRG5KoMhxalQa7J","inputNameDialog");var r=e("global");e("storage");cc.Class({extends:cc.Component,properties:{inputName:cc.EditBox},setCallback:function(e,t){this.callback=e,this.context=t},submitName:function(){this.inputName.string&&""!==this.inputName.string.trim()&&this.callback&&(this.node.runAction(cc.sequence(cc.fadeOut(r.DIALOG_EXIT_TIME),cc.removeSelf())),this.callback.call(this.context,this.inputName.string))}}),cc._RF.pop()},{global:"global",storage:"storage"}],itemFactory:[function(e,t,n){"use strict";cc._RF.push(t,"05561WWUMBA+orpCmEFVkG0","itemFactory");var r=e("global"),i=(e("storage"),e("common"));cc.Class({extends:cc.Component,properties:{},ctor:function(){this.itemPool=r.ITEM_POOL,this.heroTombGenerated=!1},generateOneItemType:function(){return i.sample(this.itemPool)},generateOneItemLevel:function(e){return Math.min(6,Math.ceil(e/r.STAR_THRESHOLD))},generateOneRandomItem:function(e,t){if(this.itemPool.length){var n=this.generateOneItemLevel(t)+r.ITEM_LEVEL_ADJUST;if(r.currentRoom.hero.getComponent("hero").getStatus("treasure")&&(n=Math.min(1,n)),n<=0)return;var i=this.generateOneItemType();this.generateOneItem(e,i,n)}},generateOneItem:function(e,t,n){if(r.currentRoom.movablePrefabMap[t]){var i=cc.instantiate(r.currentRoom.movablePrefabMap[t]);i.getComponent("item").level=n,i.getComponent("item").type=t,r.currentRoom.addMovable(i,e.x,e.y),i.getComponent("movable").generate()}else cc.error("item type:"+t+" not registered")},generateItemOnTurnStar:function(){var e=r.currentRoom.filterTile(function(e){return e.canGenEnemy()&&!r.currentRoom.getMovableByTile(e)},this),t=r.GEM_PER_TURN;cc.log(r);var n=[];(n=i.sample(e,t)).length&&n.forEach(function(e){this.generateOneItem({x:e.x,y:e.y},this.generateOneItemType(),1)},this)}}),cc._RF.pop()},{common:"common",global:"global",storage:"storage"}],item:[function(e,t,n){"use strict";cc._RF.push(t,"587b3yCQCxMWKBltdGZtAyF","item");var r=e("movable"),i=e("global");e("common");cc.Class({extends:r,properties:{score:{get:function(){return(this.level+1)*this.level*i.SCORE_INFLATION_RATE}}},ctor:function(){this.isAllFaceSame=!0,this.isMergeToSelfType=!0,this.accept=[],this.exchangeable=!0,this.breakable=!1},onLoad:function(){this._super()},start:function(){this._super()},afterMergeTo:function(e){e.getComponent("hero")&&(this.onTaken(e),i.currentRoomScene.gainScore(this.score)),this._super(e)},crash:function(e){if(this.breakable){var t=e.fromPosition,n=this.positions[0],r=i.TILE_WIDTH*Math.max(-1,Math.min(1,t.x-n.x))/4,o=i.TILE_HEIGHT*Math.max(-1,Math.min(1,t.y-n.y))/4;this.node.runAction(cc.sequence(cc.moveBy(i.HERO_ATTACK_TIME/2,-r,-o).easing(cc.easeCubicActionOut()),cc.callFunc(function(){i.currentRoomScene.gainScore(this.score),i.currentRoom.removeMovable(this)},this)))}}}),cc._RF.pop()},{common:"common",global:"global",movable:"movable"}],killerBee:[function(e,t,n){"use strict";cc._RF.push(t,"813ff290b9HxZLNv8Jwm74k","killerBee");var r=e("global"),i=(e("common"),e("enemy"));cc.Class({extends:i,properties:{title:{get:function(){return"\u6740\u4eba\u8702"},override:!0},desc:{get:function(){return"\u573a\u4e0a\u7684\u5176\u4ed6\u6740\u4eba\u8702\u8d8a\u591a\uff0c\u653b\u51fb\u529b\u5c31\u8d8a\u9ad8\u3002\n\u653b\u51fb\u529b\u8f83\u4f4e\u81f3\u5f88\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u8f83\u9ad8\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return Math.round(Math.log(e+1)*e)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level},override:!0}},ctor:function(){this.type="killerBee"},hit:function(e){var t=0;return r.currentRoom.foreachMovable(function(e){e.getComponent("killerBee")&&t++},this),this.attack*Math.round(t/2)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],kobold:[function(e,t,n){"use strict";cc._RF.push(t,"b1f02EOuMpA762K7KO5IolJ","kobold");var r=e("global"),i=(e("common"),e("enemy"));cc.Class({extends:i,properties:{title:{get:function(){return"\u72d7\u5934\u4eba"},override:!0},desc:{get:function(){return"\u653b\u51fb\u65f6\u6709\u4e00\u5b9a\u6982\u7387\u4f7f\u4f60\u7684\u6280\u80fd\u7b49\u5f85\u65f6\u95f4\u5ef6\u957f\uff08\u7b49\u7ea7\u8d8a\u9ad8\u6982\u7387\u8d8a\u9ad8\uff0c\u6548\u679c\u8d8a\u660e\u663e\uff09\u3002\n\u653b\u51fb\u529b\u4e00\u822c\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return Math.round(e*r.EXP_INFLATION_RATE*2.5)},override:!0},attack:{get:function(){return 4*this.level-1},override:!0}},ctor:function(){this.type="kobold"},afterHitHero:function(e){this.checkSpecialEffect(e),this._super(e)},getDisturbEffect:function(e){return Math.floor(this.level/6)+1},checkSpecialEffect:function(e){this.getSpecialEffectRate(e)>Math.random()&&e.getDisturb(this.getDisturbEffect(e))},getSpecialEffectRate:function(e){return this.level/20+.3}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],levelUpDialog:[function(e,t,n){"use strict";cc._RF.push(t,"24a2adDS/pISKDEHQoQnfcr","levelUpDialog");var r=e("global"),i=e("common"),o=e("effect");cc.Class({extends:cc.Component,properties:{okButton:cc.Button,refreshButton:cc.Button,choiceList:cc.Layout,title:cc.Label,choicePrefab:cc.Prefab,priceLabel:cc.Label,price:{default:1,notify:function(e){e!=this.price&&(this.priceLabel.string="-"+this.price,this.refreshButton.interactable=r.currentRoomScene.star>=this.price)}}},start:function(){this.title.string="\u606d\u559c\u4f60\u5347\u5230\u7b2c"+r.currentRoom.hero.getComponent("hero").level+"\u7ea7",this.priceLabel.string="-"+this.price,this.refreshButton.interactable=r.currentRoomScene.star>=this.price,this.currentChoice=null},initChoicePool:function(e,t,n,r){this.currentChoice=null,this.callback=n,this.context=r,this.choiceNumber=t,this.pool=e,this.generateList()},onOk:function(){this.node.runAction(cc.sequence(cc.fadeOut(r.DIALOG_EXIT_TIME),cc.removeSelf(),cc.callFunc(function(){this.callback&&this.callback.call(this.context)},this)))},onRefresh:function(){r.currentRoomScene.star>=this.price&&(r.currentRoomScene.star-=this.price,o.useStarInRoom(this.refreshButton.node.position,this.node,this.price),this.price=2*this.price,this.generateList())},generateList:function(){this.choiceList.node.removeAllChildren();var e=this.pool.filter(function(e){return"function"==typeof e&&(e=e()),!e.validate||e.validate()},this);i.sample(e,this.choiceNumber).forEach(function(e){"function"==typeof e&&(e=e());var t=cc.instantiate(this.choicePrefab);t.x=0,t.getComponent("choice").dialog=this,t.getComponent("choice").choice=e,this.choiceList.node.addChild(t)},this)}}),cc._RF.pop()},{common:"common",effect:"effect",global:"global"}],lighteningSkill:[function(e,t,n){"use strict";cc._RF.push(t,"a9aeeEup2FKHIj38pAhvNyC","lighteningSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{effect:{get:function(){return 5+this.level}}},ctor:function(){this.skillName="lighteningSkill",this.icon="Skill/lighteningSkill",this.displayName="\u95ea\u7535\u94fe",this.desc="\u6d88\u706d\u4e0e\u4f60\u56db\u5468\u7684\u67d0\u4e00\u4e2a\u654c\u4eba\u76f8\u540c\u7c7b\u578b\u7684\u6240\u6709\u654c\u4eba",this.coolDown=26+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n=[];[{x:t.x-1,y:t.y},{x:t.x+1,y:t.y},{x:t.x,y:t.y-1},{x:t.x,y:t.y+1}].forEach(function(e){var t=i.currentRoom.getMovableByPosition(e.x,e.y);t&&t.getComponent("enemy")&&n.push(t.getComponent("enemy"))});var r=o.sample(n),s={fromPosition:t,type:o.ATTACK_TYPE_SKILL};i.currentRoom.foreachMovable(function(t){t.type==r.type&&t.subtype==r.subtype&&(t.checkHit(e,s)?t.beHit(e,s):t.dodgeAttack(e,s))},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],listCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"d24c4PBSedM3oNkHkVlj50n","listCtrl"),cc.Class({extends:cc.Component,properties:{itemTemplate:{default:null,type:cc.Prefab},scrollView:{default:null,type:cc.ScrollView},itemCompnentName:"",spawnCount:0,spacing:0,bufferZone:0},onLoad:function(){this.content=this.scrollView.content,this.items=[],this.updateTimer=0,this.updateInterval=.2,this.lastContentPosY=0},initialize:function(){this.content.removeAllChildren(!0),this.items=[],this.content.height=this.totalCount*(this.itemTemplate.data.height+this.spacing)+this.spacing;for(var e=0;e<this.spawnCount;++e)if(this.data[e]){var t=cc.instantiate(this.itemTemplate);this.content.addChild(t),t.setPosition(0,-t.height*(.5+e)-this.spacing*(e+1)),t.getComponent(this.itemCompnentName).updateItem(this.data[e],e),this.items.push(t)}},getPositionInView:function(e){var t=e.parent.convertToWorldSpaceAR(e.position);return this.scrollView.node.convertToNodeSpaceAR(t)},refresh:function(){for(var e=this.items,t=0;t<e.length;++t){var n=e[t].getComponent(this.itemCompnentName);n.updateItem(this.data[n.itemID],n.itemID)}},update:function(e){if(this.updateTimer+=e,!(this.updateTimer<this.updateInterval)){this.updateTimer=0;for(var t=this.items,n=this.bufferZone,r=this.scrollView.content.y<this.lastContentPosY,i=(this.itemTemplate.data.height+this.spacing)*t.length,o=0;o<t.length;++o){var s=this.getPositionInView(t[o]);if(r){if(s.y<-n&&t[o].y+i<0){t[o].y=t[o].y+i;var c=t[o].getComponent(this.itemCompnentName),a=c.itemID-t.length;c.updateItem(this.data[a],a)}}else if(s.y>n&&t[o].y-i>-this.content.height){t[o].y=t[o].y-i;var u=t[o].getComponent(this.itemCompnentName),l=u.itemID+t.length;u.updateItem(this.data[l],l)}}this.lastContentPosY=this.scrollView.content.y}},scrollEvent:function(e,t){},setDataset:function(e){this.data=e,this.totalCount=this.data.length},getItemAtBottom:function(){for(var e=this.items[0],t=1;t<this.items.length;++t)e.y>this.items[t].y&&(e=this.items[t]);return e}}),cc._RF.pop()},{}],loading:[function(e,t,n){"use strict";cc._RF.push(t,"01db68WGBNCUac2H7ujnU0R","loading"),cc.Class({extends:cc.Component,properties:{iconSprite:cc.Sprite},start:function(){this.iconSprite.node.runAction(cc.repeatForever(cc.scaleTo(.3,1.15,.85),cc.scaleTo(.3,.85,1.15))),this.node.x=this.node.y=0,this.node.on("touchend",function(){},this)},onDestroy:function(){this.node.off("touchend")}}),cc._RF.pop()},{}],luckSkill:[function(e,t,n){"use strict";cc._RF.push(t,"ab482CX3/JJq4chvWZkibzm","luckSkill");var r=e("skill"),i=e("global");cc.Class({extends:r,properties:{desc:{get:function(){return Math.round(100*(5+3*(this.level-1))*i.LUCK_EFFECT)+"%\u7684\u9053\u5177\u6389\u843d\u6982\u7387"}}},ctor:function(){this.skillName="luckSkill",this.icon="Skill/luckSkill",this.displayName="\u5e78\u8fd0\uff08\u88ab\u52a8\uff09",this.isPassive=!0,this.maxLevel=5},levelUpDesc:function(e){return"\u589e\u52a0"+3*Math.round(100*i.LUCK_EFFECT)+"%\u7684\u9053\u5177\u6389\u843d\u6982\u7387"},onLevelUp:function(e){i.currentRoom.hero.getComponent("hero").luck+=3},onGain:function(){i.currentRoom.hero.getComponent("hero").luck+=5}}),cc._RF.pop()},{global:"global",skill:"skill"}],manaPotion:[function(e,t,n){"use strict";cc._RF.push(t,"b34fbHeqEBPEoQUKx4RlxH6","manaPotion");var r=e("item"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u9b54\u6cd5\u836f"},override:!0},desc:{get:function(){return"\u51b7\u5374\u6280\u80fd\n\u7b49\u7ea7\u8d8a\u9ad8\u6548\u679c\u8d8a\u597d\u3002"},override:!0},score:{get:function(){return this.level*i.SCORE_INFLATION_RATE},override:!0},effect:{get:function(){return this.level}}},ctor:function(){this.type="manaPotion",this.breakable=!0},onTaken:function(){i.currentRoomScene.forEachActiveSkill(function(e){e.isPassive||e.getComponent("skill").reduceWait(this.effect)},this)}}),cc._RF.pop()},{global:"global",item:"item"}],medusa:[function(e,t,n){"use strict";cc._RF.push(t,"4441b+s/h9Md5O7SC6HklsR","medusa");var r=e("global"),i=e("common"),o=e("enemy");cc.Class({extends:o,properties:{title:{get:function(){return"\u7f8e\u675c\u838e"},override:!0},desc:{get:function(){return"\u5408\u5e76\u6216\u653b\u51fb\u65f6\u6709\u53ef\u80fd\u51bb\u7ed3\u5468\u56f4\u89d2\u8272\uff08\u7b49\u7ea7\u8d8a\u9ad8\u6982\u7387\u8d8a\u9ad8\uff0c\u65f6\u95f4\u8d8a\u957f\uff09\u3002\n\u653b\u51fb\u529b\u4e00\u822c\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return(Math.round(2.5*e)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level*2-1},override:!0}},ctor:function(){this.type="medusa"},afterBeMerged:function(e){this._super(e);var t=this.positions[0];i.INCREMENTS.forEach(function(e){var n=r.currentRoom.getMovableByPosition(t.x+e.x,t.y+e.y);n&&this.checkEffect(n,1)},this)},afterHitHero:function(e){this.checkEffect(e,2),this._super(e)},getEffectRate:function(e){return Math.min(.7,5*this.level/200+.1)},checkEffect:function(e,t){e.getComponent("item")||this.getEffectRate(e)>Math.random()&&(t+=Math.min(2,Math.floor(this.level/12)),e.gainStatus("frozen",t))}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],meteorShowerSkill:[function(e,t,n){"use strict";cc._RF.push(t,"757e9bO3o5OvI1ZzXt3m5LX","meteorShowerSkill");var r=e("skill"),i=e("global"),o=e("common"),s=e("effect");cc.Class({extends:r,properties:{effect:{get:function(){return 6+2*this.level}},desc:{get:function(){return"\u5929\u964d"+this.effect+"\u4e2a\u9668\u77f3\u968f\u673a\u653b\u51fb\uff0c\u53ef\u80fd\u4f1a\u6253\u7a7a"}}},ctor:function(){this.skillName="meteorShowerSkill",this.icon="Skill/meteorShowerSkill",this.displayName="\u9668\u77f3\u96e8",this.coolDown=18+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u591a\u53ec\u55242\u4e2a\u9668\u77f3\uff0c\u4f46\u51b7\u5374\u65f6\u95f4\u589e\u52a02\u56de\u5408"},onLevelUp:function(e){this.coolDown+=2},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.positions[0];o.sample(i.currentRoom.filterTile(function(t){return t.isPassable(e)},this),this.effect).forEach(function(t){var n=i.currentRoom.getMovableByTile(t),r=i.currentRoom.getDrawPosition(t.position);i.currentRoomScene.scheduleOnce(function(){if(s.projectFireball({x:r.x,y:r.y+80},r),n&&n.getComponent("enemy")){var t={fromPosition:{x:n.positions[0].x,y:n.positions[0].y+1},type:o.ATTACK_TYPE_SKILL};n.checkHit(e,t)?n.beHit(e,t):n.dodgeAttack(e,t)}},Math.random()*i.HERO_ATTACK_TIME)},this),this.scheduleOnce(function(){e.afterUseSkill()},2*i.HERO_ATTACK_TIME)}}),cc._RF.pop()},{common:"common",effect:"effect",global:"global",skill:"skill"}],mimic:[function(e,t,n){"use strict";cc._RF.push(t,"ef20ekodwpAqYPv9NB9Njb0","mimic");var r=e("global"),i=e("enemy");cc.Class({extends:i,properties:{title:{get:function(){return"\u5b9d\u7bb1\u602a"},override:!0},desc:{get:function(){return"\u6b7b\u4ea1\u540e\u5fc5\u7136\u7559\u4e0b\u9053\u5177\u3002\n\u653b\u51fb\u529b\u8f83\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){return(2*(this.level+this.star)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*Math.round(Math.log(this.level+1)*this.level)*2},override:!0}},getDropRate:function(){return 1},ctor:function(){this.type="mimic"}}),cc._RF.pop()},{enemy:"enemy",global:"global"}],minotaur:[function(e,t,n){"use strict";cc._RF.push(t,"715c92j5bZI/4KSZrT6Ecaw","minotaur");var r=e("global"),i=e("enemy");e("i18n");cc.Class({extends:i,properties:{title:{get:function(){return"\u98de\u9f99"},override:!0},desc:{get:function(){return"\u653b\u51fb\u529b\u8d85\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u8d85\u9ad8\u3002"},override:!0},exp:{get:function(){return(this.level*this.level+this.star+1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return this.level*this.level+4},override:!0}},ctor:function(){this.type="minotaur"}}),cc._RF.pop()},{enemy:"enemy",global:"global",i18n:"i18n"}],missileSkill:[function(e,t,n){"use strict";cc._RF.push(t,"7f7e3A0LxhPeI4aPwFDS/iL","missileSkill");var r=e("skill"),i=e("global"),o=e("common"),s=e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="missileSkill",this.icon="Skill/missileSkill",this.displayName="\u9b54\u5bfc\u5f39",this.desc="\u968f\u673a\u653b\u51fb2\u4e2a\u654c\u4eba",this.coolDown=13+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t={fromPosition:e.positions[0],type:o.ATTACK_TYPE_SKILL};o.sample(i.currentRoom.filterMovable(function(e){return e instanceof s},this),2).forEach(function(n){n.checkHit(e,t)?n.beHit(e,t):n.dodgeAttack(e,t)},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],modeSelectScene:[function(e,t,n){"use strict";cc._RF.push(t,"b9528NgYddKgY5p/u7eF5ST","modeSelectScene");var r=e("lodash"),i=e("global"),o=(e("storage"),e("common")),s=(e("perkEntry"),e("roomEntry"));cc.Class({extends:cc.Component,properties:{gemTypeSelect:cc.ToggleContainer,generateSelect:cc.ToggleContainer,thresholdSelect:cc.ToggleContainer,mapSelect:cc.ToggleContainer,timeoutSelect:cc.ToggleContainer,loading:cc.Prefab},start:function(){i.ModeSelectScene=this,this.gemType=4,this.generateGem=2,this.threshold=2,this.map="5x5",this.timeout=4},selectGemType:function(e,t){this.gemType=t},selectGenerate:function(e,t){this.generateGem=t},selectThreshold:function(e,t){this.threshold=t},selectMap:function(e,t){this.map=t},selectTimeout:function(e,t){this.timeout=t},starGame:function(){i.ModeSelectScene=null,i.reset(),i.ITEM_POOL=(0,r.cloneDeep)(i.initItemPool),cc.log(i.ITEM_POOL),i.ITEM_POOL.splice(this.gemType,10),i.GEM_PER_TURN=this.generateGem,i.DISAPPEAR_THRESHOLD=this.threshold,i.TURN_TIMEOUT=this.timeout,i.loadRoomEntry(s[this.map]),o.loadScene("RoomScene",this.node,this.loading)}}),cc._RF.pop()},{common:"common",global:"global",lodash:3,perkEntry:"perkEntry",roomEntry:"roomEntry",storage:"storage"}],movable:[function(e,t,n){"use strict";cc._RF.push(t,"c9ed0nBr65OW7+S74mBnUsH","movable");var r=e("common"),i=e("global");cc.Class({extends:cc.Component,properties:{atlas:cc.SpriteAtlas,mainSprite:cc.Sprite,title:{default:"",visible:!1},desc:{default:"",visible:!1},level:{default:1,visible:!1,notify:function(e){this.levelLabel&&(this.levelLabel.string=this.level)}},moveStep:{get:function(){return this.getStatus("slowed")?1:100}},face:{default:r.DIRECTION_DOWN,notify:function(e){e!=this.face&&this.setFrame()}}},ctor:function(){this.accept=[],this.isAllFaceSame=!0,this.type="",this.subtype=null,this.isMergeToSelfType=!0,this.level=1,this._isMovable=!0,this.animateStatus="stand",this.relativePositions=[{x:0,y:0}],this.status={}},onLoad:function(){},start:function(){this.currentFrameNumber=0,this.levelIcon=cc.find("levelIcon",this.node),this.levelLabel=cc.find("levelIcon/levelLabel",this.node),this.levelLabel&&(this.levelLabel=this.levelLabel.getComponent(cc.Label),this.levelLabel.string=this.level),this.statusList=cc.find("statusList",this.node),this.statusList=this.statusList&&this.statusList.getComponent(cc.Layout),this.status={},this.setFrame()},onDestroy:function(){this.node.destroy()},hideLevel:function(e){this.levelIcon&&(this.levelIcon.active=!e)},isMovable:function(e){return this._isMovable&&!this.getStatus("frozen")},setPositionInRoom:function(e,t){var n=this;this.positions=[],this.relativePositions.forEach(function(r){n.positions.push({x:e+r.x,y:t+r.y})}),this.calculateEdgePositions()},calculateEdgePositions:function(){var e=this;this.edgePositions=[[],[],[],[]],this.positions.forEach(function(e){(void 0===this.edgePositions[r.DIRECTION_UP][e.x]||this.edgePositions[r.DIRECTION_UP][e.x].y<e.y)&&(this.edgePositions[r.DIRECTION_UP][e.x]=e),(void 0===this.edgePositions[r.DIRECTION_DOWN][e.x]||this.edgePositions[r.DIRECTION_DOWN][e.x].y>e.y)&&(this.edgePositions[r.DIRECTION_DOWN][e.x]=e),(void 0===this.edgePositions[r.DIRECTION_RIGHT][e.y]||this.edgePositions[r.DIRECTION_RIGHT][e.y].x<e.x)&&(this.edgePositions[r.DIRECTION_RIGHT][e.y]=e),(void 0===this.edgePositions[r.DIRECTION_LEFT][e.y]||this.edgePositions[r.DIRECTION_LEFT][e.y].x>e.x)&&(this.edgePositions[r.DIRECTION_LEFT][e.y]=e)},this),this.edgePositionLength=[],r.DIRECTIONS.forEach(function(t){e.edgePositionLength[t]=e.edgePositions[t].filter(function(e){return e}).length})},setFrame:function(){if(this.atlas){var e=this.atlas.getSpriteFrame(this.getFrameName());this.mainSprite.spriteFrame=e}},getFrameName:function(){return this.isAllFaceSame?this.type+this.subtype?"-"+this.subtype:"":this.type+(this.subtype?"-"+this.subtype:"")+this.face+this.animateStatus+this.currentFrameNumber},isEdgePosition:function(e,t,n){t instanceof Object&&(n=t.y,t=t.x);for(var r=0;r<this.edgePositions[e].length;r++){var i=this.edgePositions[e][r];if(i&&i.x===t&&i.y===n)return!0}return!1},getEdgePositionLength:function(e){return this.edgePositionLength[e]},canBeMergedBy:function(e,t){return!(!this.isMergeToSelfType||e.type!==this.type||e.subtype!==this.subtype)||!!r.contains(this.accept,e.type)},canMergeTo:function(e,t){return r.contains(e.accept,this.type)},beforeMove:function(e){},move:function(e){this.beforeMove(e),this.__removeOldMapping(),this._moveSprite(e)},__removeOldMapping:function(){this.positions.forEach(function(e){i.currentRoom.__movableMap[e.x][e.y]=null})},setNewPosition:function(e){var t=this.positions[0],n=e.x-t.x,r=e.y-t.y;this.positions.forEach(function(e){e.x+=n,e.y+=r,i.currentRoom.__movableMap[e.x][e.y]=this},this),this.calculateEdgePositions()},_moveSprite:function(e){var t=r.INCREMENTS[e.direction];this.node.runAction(cc.sequence(cc.moveBy(i.STEP_TIME*e.step,t.x*e.step*i.TILE_WIDTH,t.y*e.step*i.TILE_HEIGHT),cc.callFunc(function(){this.afterMove(e)},this)))},afterMove:function(e){var t=e.direction,n=e.step,o=this.positions[0].x+n*r.INCREMENTS[t].x,s=this.positions[0].y+n*r.INCREMENTS[t].y;if(e.result===r.SHIFT_RESULT_MERGE_AND_DISAPPEAR){var c=i.currentRoom.getMovableByPosition(o,s);this.mergeTo(c)}else if(e.result===r.SHIFT_RESULT_MERGE_AND_STAY){(c=i.currentRoom.getMovableByPosition(o,s)).mergeTo(this)}e.result!==r.SHIFT_RESULT_MERGE_AND_DISAPPEAR&&(this.positions.forEach(function(e){e.x+=n*r.INCREMENTS[t].x,e.y+=n*r.INCREMENTS[t].y,i.currentRoom.__movableMap[e.x][e.y]=this},this),this.calculateEdgePositions())},beforeMergeTo:function(e){},mergeTo:function(e){this.beforeMergeTo(e),this.node.runAction(cc.fadeOut(i.STEP_TIME/2)),e.beforeBeMerged(this),e.node.runAction(cc.sequence(cc.callFunc(function(){this.afterMergeTo(e)},this),cc.scaleTo((i.STEP_TIME-.01)/2,1.4),cc.scaleTo((i.STEP_TIME-.01)/2,1))),e.beMerged(this)},afterMergeTo:function(e){e.afterBeMerged(this),i.currentRoom.removeMovable(this)},beforeBeMerged:function(e){},beMerged:function(e){},afterBeMerged:function(e){for(var t in e.status){var n=e.status[t];this.gainStatus(n.getComponent("status").statusName,n.duration,n.extra)}this.beforeLevelUp(this.level),this.level+=e.level,this.onLevelUp(this.level)},beforeLevelUp:function(e){},levelUp:function(e){},onLevelUp:function(e){},onTurnStart:function(){this.forEachStatus(function(e){e.onTurnStart&&e.onTurnStart(this)},this)},onTurnEnd:function(){this.forEachStatus(function(e){e.onTurnEnd&&e.onTurnEnd(this)},this)},generate:function(){this.node.setScale(.1),this.node.runAction(cc.sequence(cc.callFunc(function(){},this),cc.scaleTo(i.GENERATE_TIME,1,1)))},gainStatus:function(e,t,n){if(cc.log("gainStatus "+e+" turn:"+t),this.statusList){if(t=t||1,this.getStatus(e))return this.getStatus(e).setDuration(t),void(n&&this.getStatus(e).setExtra(n));var r,o=i.currentRoom.statusMap[e];o?r=cc.instantiate(o):(o=i.currentRoom.statusMap.noIconStatus,(r=cc.instantiate(o)).addComponent(e),r.name=e),this.statusList.node.addChild(r),r.setScale(.1),r.runAction(cc.sequence(cc.scaleTo(i.LOSE_STATUS_TIME,1.5),cc.scaleTo(i.LOSE_STATUS_TIME,1)));var s=r.getComponent("status");s.duration=t,n&&s.setExtra(n),s.onGain&&s.onGain(this),this.status[e]=s}},lostStatus:function(e){if(this.statusList){delete this.status[e];var t=cc.find(e,this.statusList.node);t&&(t.getComponent("status").onLost&&t.getComponent("status").onLost(this),t.runAction(cc.sequence(cc.fadeOut(i.LOSE_STATUS_TIME),cc.removeSelf())))}},setStatus:function(e){e.forEach(function(e){this.gainStatus(e.status,e.last)},this)},getStatus:function(e){return this.status?this.status[e]:null},forEachStatusNode:function(e,t){this.statusList&&this.statusList.node.children.forEach(function(n){e.call(t,n)},this)},forEachStatus:function(e,t){for(var n in this.status)e.call(t,this.status[n])},showDescDialog:function(){var e=cc.instantiate(i.currentRoomScene.descDialog);return e.getComponent("descDialog").setMovable(this),i.currentRoomScene.node.addChild(e),e},teleport:function(e,t){if(t)this.__changePositionAtTurnStart=i.currentRoom.turn,this.__newPositionAtTurnStart=e;else{var n=i.currentRoom.getDrawPosition(e);this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(i.TELEPORT_TIME/2,0,40),cc.scaleTo(i.TELEPORT_TIME/2,.4,2),cc.fadeOut(i.TELEPORT_TIME/2)),cc.moveTo(.001,n.x,n.y+40),cc.spawn(cc.moveBy(i.TELEPORT_TIME/2,0,-40),cc.scaleTo(i.TELEPORT_TIME/2,1,1),cc.fadeIn(i.TELEPORT_TIME/2)),cc.callFunc(function(){this.__removeOldMapping(),this.setNewPosition(e)},this)))}},beltTo:function(e){this.__changePositionAtTurnStart=i.currentRoom.turn,this.__newPositionAtTurnStart=e},afterBeltTo:function(e){},afterTurnStartStep1:function(){this.__changePositionAtTurnStart===i.currentRoom.turn&&this.__removeOldMapping()},afterTurnStartStep2:function(){this.__changePositionAtTurnStart===i.currentRoom.turn&&this.setNewPosition(this.__newPositionAtTurnStart)},afterTurnStartStep3:function(){}}),cc._RF.pop()},{common:"common",global:"global"}],mummy:[function(e,t,n){"use strict";cc._RF.push(t,"b4cb2rfEdtOtr72s0LdXAU2","mummy");var r=e("global"),i=(e("common"),e("enemy")),o=e("i18n");cc.Class({extends:i,properties:{title:{get:function(){return o.t("enemy/mummy")},override:!0},desc:{get:function(){return"\u51fb\u4e2d\u65f6\u6709\u4e00\u5b9a\u6982\u7387\u4f7f\u4f60\u88ab\u8bc5\u5492\uff08\u4e0b\u4e00\u6b21\u6062\u590d\u751f\u547d\u91cf\u51cf\u534a\uff09\uff08\u7b49\u7ea7\u8d8a\u9ad8\u6982\u7387\u8d8a\u9ad8\uff09\u3002\n\u653b\u51fb\u529b\u8f83\u4f4e\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){return(2*(this.level+this.star)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level+1},override:!0},isUndead:!0},ctor:function(){this.type="mummy"},afterHitHero:function(e){this.checkSpecialEffect(e),this._super(e)},checkSpecialEffect:function(e){this.getSpecialEffectRate(e)>Math.random()&&e.gainStatus("cursed",-1)},getSpecialEffectRate:function(e){return this.level/10}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",i18n:"i18n"}],nail:[function(e,t,n){"use strict";cc._RF.push(t,"f255d2NiGhEe6T7wq2aKrkm","nail");var r=e("status"),i=e("global"),o=e("common");cc.Class({extends:r,properties:{effect:{get:function(){return 10},visible:!1}},ctor:function(){this.statusName="nail"},onGain:function(e){var t=this;cc.loader.loadRes("Prefab/nail",cc.Prefab,function(n,r){t.nailSprite=cc.instantiate(r),t.nailSprite.x=t.nailSprite.y=0,e.effectLayer&&(e.effectLayer.addChild(t.nailSprite),t.attackSprite=cc.find("attackSprite",t.nailSprite),t.hideNail())})},showNail:function(){this.attackSprite.opacity=255},hideNail:function(){this.attackSprite.opacity=0},onLost:function(e){this.nailSprite.destroy()},onTurnEnd:function(e){var t=this;this.showNail();var n=i.currentRoom.hero.getComponent("hero"),r=i.currentRoom.getMovableByTile(e);if(r)if(r.getComponent("enemy")&&!r.getComponent("boss")){var s={fromPosition:{x:e.x,y:e.y-1},type:o.ATTACK_TYPE_ENV};r.beHit(n,s)}else r.getComponent("hero")&&n.loseHp(this.effect,{type:"nail",amount:this.effect});i.currentRoom.scheduleOnce(function(){t.hideNail()},i.HERO_ATTACK_TIME),i.currentRoom.setDelayPhaseTime(i.HERO_ATTACK_TIME+.05),this._super(e)}}),cc._RF.pop()},{common:"common",global:"global",status:"status"}],ooze:[function(e,t,n){"use strict";cc._RF.push(t,"2d2b345SXVLbYcaNjT63OBC","ooze");var r=e("global"),i=e("common"),o=e("enemy");cc.Class({extends:o,properties:{title:{get:function(){return"\u8f6f\u6ce5\u602a"},override:!0},desc:{get:function(){return"\u53f2\u83b1\u59c6\u7684\u4eb2\u621a\n\u5408\u5e76\u6216\u653b\u51fb\u65f6\u6709\u53ef\u80fd\u4f7f\u5468\u56f4\u89d2\u8272\u51cf\u901f\uff08\u7b49\u7ea7\u8d8a\u9ad8\u6982\u7387\u8d8a\u9ad8\uff0c\u65f6\u95f4\u8d8a\u957f\uff09\u3002\n\u653b\u51fb\u529b\u4e00\u822c\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return(Math.round(2.5*e)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level*2-1},override:!0}},ctor:function(){this.type="ooze"},afterBeMerged:function(e){this._super(e);var t=this.positions[0];i.INCREMENTS.forEach(function(e){var n=r.currentRoom.getMovableByPosition(t.x+e.x,t.y+e.y);n&&this.checkEffect(n,2)},this)},afterHitHero:function(e){this.checkEffect(e,2),this._super(e)},getEffectRate:function(e){return Math.min(.7,5*this.level/200+.1)},checkEffect:function(e,t){e.getComponent("item")||this.getEffectRate(e)>Math.random()&&(t+=Math.min(2,Math.floor(this.level/12)),e.gainStatus("slowed",t))}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],orcChief:[function(e,t,n){"use strict";cc._RF.push(t,"c1a62ZwDqtDUrqPga/ZcWCt","orcChief");var r=e("global"),i=e("common"),o=e("enemy");cc.Class({extends:o,properties:{title:{get:function(){return"\u517d\u4eba\u914b\u957f"},override:!0},desc:{get:function(){return"\u5408\u5e76\u65f6\u81ea\u5df1\u548c\u5468\u56f4\u654c\u4eba\u5347\u7ea7\u3002\n\u653b\u51fb\u529b\u4e00\u822c\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){return(2*(this.level+this.star)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level*2-1},override:!0}},ctor:function(){this.type="orcChief"},afterBeMerged:function(e){this._super(e),this.level++;var t=this.positions[0];i.INCREMENTS.forEach(function(e){var n=r.currentRoom.getMovableByPosition(t.x+e.x,t.y+e.y);n&&n.getComponent("enemy")&&n.level++},this)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],orge:[function(e,t,n){"use strict";cc._RF.push(t,"c9238oDpdlBR7IoVwQLagEE","orge");var r=e("global"),i=e("enemy");cc.Class({extends:i,properties:{title:{get:function(){return"\u98df\u4eba\u9b54"},override:!0},desc:{get:function(){return"\u653b\u51fb\u529b\u8f83\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u8f83\u9ad8\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return(Math.round(Math.log(e+1)*e)+1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*Math.round(Math.log(this.level+1)*this.level)+1},override:!0}},ctor:function(){this.type="orge"}}),cc._RF.pop()},{enemy:"enemy",global:"global"}],perkEntry:[function(e,t,n){"use strict";cc._RF.push(t,"5e4bbRgBUpMkpu6ZA5m/hY5","perkEntry");var r=e("global"),i=(e("common"),e("storage"));t.exports={perks:[{name:"forwardAfterKill",title:"\u9c81\u83bd\u51b2\u649e",desc:"\u6740\u6b7b\u666e\u901a\u654c\u4eba\u540e\u524d\u8fdb\n\u800c\u4e0d\u662f\u9000\u56de\u539f\u5730",price:[10],apply:function(){r.FORWARD_AFTER_KILL=!0}},{name:"moreInitHp",title:"\u5929\u751f\u5f3a\u58ee",desc:function(e){return"\u521d\u59cb\u751f\u547d\u591a"+5*e},price:[10,40,200,1200,9e3,7e4],apply:function(){var e=i.progress.perk.moreInitHp||0;r.BASE_HP+=5*e}},{name:"moreHp",title:"\u8eab\u5f3a\u4f53\u58ee",desc:function(e){return"\u6bcf\u6b21\u5347\u7ea7\u6216\u589e\u52a0\u4f53\u8d28\u83b7\u5f97\u7684\u751f\u547d\u591a"+10*e+"%"},price:[10,40,200,1200,9e3,7e4],apply:function(){var e=i.progress.perk.moreHp||0,t=r.HP_PER_LEVEL/r.ORIGIN_HP_PER_LEVEL+.1*e;r.HP_PER_LEVEL=r.ORIGIN_HP_PER_LEVEL*t,r.CONSTITUTION_EFFECT=r.ORIGIN_CONSTITUTION_EFFECT*t}},{name:"moreExp",title:"\u7ecf\u9a8c\u8001\u5230",desc:function(e){return"\u6bcf\u6b21\u6740\u6b7b1\u4e2a\u654c\u4eba\u591a\u5f97\u5230"+e+"\u7ecf\u9a8c\u503c"},price:[10,40,200,1200,9e3,7e4],apply:function(){r.ENEMY_EXP_ADJUST=i.progress.perk.moreExp}},{name:"moreChoice",title:"\u7075\u6d3b\u591a\u53d8",desc:"\u5347\u7ea7\u65f6\u591a\uff11\u9009\u62e9\u9879",price:[200],apply:function(){r.CHOICE_NUMBER++}},{name:"moreMaxLevel",title:"\u5de8\u5927\u6f5c\u529b",desc:function(e){return"\u6240\u6709\u6280\u80fd\u6700\u5927\u7b49\u7ea7\u52a0"+e},price:[500],apply:function(){r.MAX_LEVEL_ADJUST+=i.progress.moreMaxLevel}},{name:"moreItemLevel",title:"\u62db\u8d22\u8fdb\u5b9d",desc:function(e){return"\u9053\u5177\u6389\u843d\u7684\u7b49\u7ea7+"+e},price:[100,500],apply:function(){r.ITEM_LEVEL_ADJUST+=i.progress.perk.moreItemLevel}},{name:"morePotionEffect",title:"",desc:function(e){return"\u56de\u590d\u836f\u6cbb\u7597\u6548\u679c\u52a0"+10*e+"%"},price:[100,200,600,2400,1e4],apply:function(){r.POTION_EFFECT+=i.progress.perk.morePotionEffect}},{name:"lessNegativeTime",title:"\u8d85\u5f3a\u514d\u75ab",desc:"\u5f02\u5e38\u72b6\u6001\u5f71\u54cd-1\u56de\u5408\u6216-1\u6548\u679c",price:[500],apply:function(){r.NEGATIVE_EFFECT_TIME_ADJUST--}},{name:"lessWait",title:"\u5929\u751f\u806a\u660e",desc:"\u6240\u6709\u6280\u80fd\u51b7\u5374\u65f6\u95f4-1\u56de\u5408",price:[1e3],apply:function(){r.SKILL_WAIT_ADJUST--}},{name:"moreExpAbove12",title:"\u7cbe\u82f1\u730e\u624b",desc:function(e){return"\u6740\u6b7b12\u7ea7\u6216\u4ee5\u4e0a\u7684\u602a\u7269\u5f97\u5230\u7684\u7ecf\u9a8c\u503c\u52a0"+10*e+"%"},price:[200,400,1200,4800,2e4],apply:function(){r.MORE_EXP_ABOVE_12=i.progress.perk.moreExpAbove12}},{name:"manySkill",title:"\u535a\u91c7\u4f17\u957f",desc:"\u53ef\u4ee5\u5b66\u4e60\u5230\u5176\u4ed6\u82f1\u96c4\u7684\u5df2\u89e3\u9501\u6280\u80fd",price:[500],apply:function(){r.MANY_SKILL=!0}},{name:"manaPotion",title:"\u9b54\u6cd5\u836f\u5242",desc:"\u602a\u7269\u53ef\u80fd\u4f1a\u6389\u843d\u9b54\u6cd5\u836f",price:[300],apply:function(){r.ITEM_POOL.push("manaPotion")}}]},cc._RF.pop()},{common:"common",global:"global",storage:"storage"}],perkItem:[function(e,t,n){"use strict";cc._RF.push(t,"904d7r1cTdI9a2ACghiXKPl","perkItem");var r=e("global"),i=(e("common"),e("storage")),o=e("effect");cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,descLabel:cc.Label,priceLabel:cc.Label,upgradeButton:cc.Button,lockedIcon:cc.Sprite,unlockIcon:cc.Sprite,upgradeIcon:cc.Sprite,iconSprite:cc.Sprite,toggle:cc.Toggle,itemID:0},onLoad:function(){this.node.on("touchend",function(){this.click()},this)},click:function(){i.progress.perk[this.perkEntry.name]&&this.perkEntry.active&&(this.perkEntry.isSelected?(this.perkEntry.isSelected=!1,r.PerkScene.unselectPerk(this.perkEntry.name)):(this.perkEntry.isSelected=!0,r.PerkScene.selectPerk(this.perkEntry.name)))},upgradePerk:function(){var e=i.progress.perk[this.perkEntry.name]||0,t=this.perkEntry.price[e];r.PerkScene.star>=t&&(i.progress.perk[this.perkEntry.name]=e+1,i.saveProgress(),o.gainStarInMenu({fromPosition:r.PerkScene.moneyLabel.node.position,fromParentNode:r.PerkScene.node,toPosition:this.upgradeButton.node.position,toParentNode:this.upgradeButton.node.parent,effectParentNode:r.PerkScene.node,amount:t,beforeStepCallback:function(e){r.PerkScene.star-=e,r.PerkScene.moneyLabel.node.stopAllActions(),r.PerkScene.moneyLabel.node.runAction(cc.sequence(cc.scaleTo(r.GET_STAR_TIME/2,.8),cc.scaleTo(r.GET_STAR_TIME/2,1)))},callback:function(){r.PerkScene.refresh()},context:this,starPrefab:r.PerkScene.starPrefab}))},updateItem:function(e,t){var n=this;this.itemID=t,this.perkEntry=e;var o=i.progress.perk[this.perkEntry.name]||0,s=this.perkEntry.title;if(o&&1!==this.perkEntry.price.length&&(s+="Lv"+o),this.titleLabel.string=s,"function"==typeof this.perkEntry.desc?this.descLabel.string=this.perkEntry.desc(Math.max(1,o)):this.descLabel.string=this.perkEntry.desc,this.perkEntry.isSelected?(this.toggle.node.active=!0,this.toggle.isChecked=!0):this.perkEntry.active&&i.progress.perk[this.perkEntry.name]?(this.toggle.node.active=!0,this.toggle.isChecked=!1):this.toggle.node.active=!1,cc.loader.loadRes("Texture/Perk/"+this.perkEntry.name,cc.SpriteFrame,function(e,t){n.iconSprite.spriteFrame=t}),o)if(this.lockedIcon.node.active=!1,o===this.perkEntry.price.length)this.upgradeButton.node.active=!1;else{var c=this.perkEntry.price[o];this.upgradeButton.node.active=!0,this.priceLabel.string="-"+c,this.unlockIcon.node.active=!1,this.upgradeIcon.node.active=!0,this.upgradeButton.interactable=r.PerkScene.star>=c}else{this.lockedIcon.node.active=!0;c=this.perkEntry.price[o];this.upgradeButton.node.active=!0,this.priceLabel.string="-"+c,this.unlockIcon.node.active=!0,this.upgradeIcon.node.active=!1,this.upgradeButton.interactable=r.PerkScene.star>=c}}}),cc._RF.pop()},{common:"common",effect:"effect",global:"global",storage:"storage"}],perkScene:[function(e,t,n){"use strict";cc._RF.push(t,"37494jIylpHGYhGSv4e353Q","perkScene");var r=e("global"),i=e("storage"),o=e("common"),s=e("perkEntry");cc.Class({extends:cc.Component,properties:{selectedPerkList:cc.Layout,perkScroll:cc.ScrollView,loading:cc.Prefab,moneyLabel:cc.Label,starPrefab:cc.Prefab,star:{default:0,notify:function(e){this.star!=e&&(i.saveMoney(this.star),this.moneyLabel.string=this.star)},visible:!1}},start:function(){this.star=i.star,this.moneyLabel.string=i.star,r.PerkScene=this,this.initPerkList(),this.initPerkSlot()},initPerkSlot:function(){for(var e=i.progress.maxPerk[r.currentHeroType]||1,t=0;t<e;t++){(n=this.selectedPerkList.node.children[t].getComponent("perkSlot")).unlock(),this.selectedPerk[t]&&n.fill(this.selectedPerk[t])}for(t=e;t<r.MAX_PERK;t++){var n;(n=this.selectedPerkList.node.children[t].getComponent("perkSlot")).lock(),n.empty()}},refresh:function(){var e=i.progress.maxPerk[r.currentHeroType]||1,t=this.selectedPerk.length<e;s.perks.forEach(function(e){e.isSelected?e.active=!0:e.active=t&&i.progress.perk[e.name]},this),this.perkScroll.getComponent("listCtrl").refresh()},initPerkList:function(){this.perkMap={};for(var e=0;e<s.perks.length;e++)this.perkMap[s.perks[e].name]=s.perks[e],s.perks[e].itemID=e,s.perks[e].active=!0,s.perks[e].isSelected=!1;this.perkScroll.getComponent("listCtrl").setDataset(s.perks),this.perkScroll.getComponent("listCtrl").initialize(),this.selectedPerk=[],r.selectedPerk.forEach(function(e){var t=this.perkMap[e];s.perks[t.itemID].isSelected=!0,this.selectPerk(e)},this)},selectPerk:function(e){for(var t=i.progress.maxPerk[r.currentHeroType]||1,n=0;n<t;n++){var o=this.selectedPerkList.node.children[n].getComponent("perkSlot");if(o.isEmpty){o.fill(e);break}}this.selectedPerk.push(e),this.refresh()},unselectPerk:function(e){for(var t=i.progress.maxPerk[r.currentHeroType]||1,n=0;n<t;n++){var o=this.selectedPerkList.node.children[n].getComponent("perkSlot");if(o.perkName===e){o.empty(e);break}}for(n=0;n<this.selectedPerk.length;n++)if(this.selectedPerk[n]===e){this.selectedPerk.splice(n,1);break}for(n=0;n<s.perks.length;n++)s.perks[n].name==e&&(s.perks[n].isSelected=!1);this.refresh()},perkSlotClicked:function(e){var t=this.selectedPerkList.node.children[e].getComponent("perkSlot");t.perkName?this.unselectPerk(t.perkName):t.lockSprite.node.active},confirm:function(){r.PerkScene=null,r.selectedPerk=this.selectedPerk,o.loadScene("MenuScene",this.node,this.loading)},back:function(){r.PerkScene=null,o.loadScene("MenuScene",this.node,this.loading)}}),cc._RF.pop()},{common:"common",global:"global",perkEntry:"perkEntry",storage:"storage"}],perkSlot:[function(e,t,n){"use strict";cc._RF.push(t,"9e42fwHoQFBvJhvUPzHpLJs","perkSlot");e("global"),e("common"),e("storage"),e("MenuScene");cc.Class({extends:cc.Component,properties:{lockSprite:cc.Sprite,perkSprite:cc.Sprite,background:cc.SpriteFrame,isEmpty:{get:function(){return null==this.perkName}}},start:function(){},unlock:function(){this.lockSprite.node.active=!1},lock:function(){this.lockSprite.node.active=!0},fill:function(e){var t=this;this.perkName=e,cc.loader.loadRes("Texture/Perk/"+e,cc.SpriteFrame,function(e,n){t.perkSprite.spriteFrame=n})},empty:function(){this.perkSprite.spriteFrame=this.background,this.perkName=null}}),cc._RF.pop()},{MenuScene:"MenuScene",common:"common",global:"global",storage:"storage"}],pitfall:[function(e,t,n){"use strict";cc._RF.push(t,"068baoSckpJuqN8mOhOHDjy","pitfall");var r=e("status");e("global"),e("common");cc.Class({extends:r,properties:{effect:{get:function(){return 10},visible:!1}},ctor:function(){this.statusName="pitfall"},onGain:function(e){var t=this;e._isCapture=!0,cc.loader.loadRes("Prefab/pitfall",cc.Prefab,function(n,r){t.trapSprite=cc.instantiate(r),t.trapSprite.x=t.trapSprite.y=0,e.effectLayer&&e.effectLayer.addChild(t.trapSprite)})},onLost:function(e){this.trapSprite.destroy(),e._isCapture=!1}}),cc._RF.pop()},{common:"common",global:"global",status:"status"}],poisonPotion:[function(e,t,n){"use strict";cc._RF.push(t,"4efc0TUyd9EBKN06OxTMYSG","poisonPotion");var r=e("item"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u6bd2\u836f"},override:!0},desc:{get:function(){return"\u5bf9\u82f1\u96c4\u9020\u6210\u4f24\u5bb3\u4e14\u4e2d\u6bd2\n\u7b49\u7ea7\u8d8a\u9ad8\u4f24\u5bb3\u8d8a\u591a\n\u636e\u8bf4\u5206\u6570\u5f88\u9ad8\uff1f"},override:!0},score:{get:function(){return this.level*(this.level+1)/2*50*i.SCORE_INFLATION_RATE},override:!0},effect:{get:function(){return this.level}}},ctor:function(){this.type="poisonPotion",this.breakable=!0},onTaken:function(){var e=i.currentRoom.hero.getComponent("hero");e.loseHp(this.effect,{type:"poison",amount:this.effect}),e.gainStatus("poison",-1)}}),cc._RF.pop()},{global:"global",item:"item"}],poison:[function(e,t,n){"use strict";cc._RF.push(t,"db9c30EZPdIdZP5C7uVwpYn","poison");var r=e("status"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u4e2d\u6bd2"}},desc:{get:function(){return"\u6bcf\u56de\u5408\u5f00\u59cb-1\u751f\u547d"}}},ctor:function(){this.statusName="poison"},onTurnStart:function(){i.currentRoom.hero.getComponent("hero").loseHp(1,{type:"poison",amount:1})}}),cc._RF.pop()},{global:"global",status:"status"}],polyglot:[function(e,t,n){(function(e){"use strict";cc._RF.push(t,"69decSgpRlE1rzEKp0RzG3V","polyglot");var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e,i){"function"==typeof define&&define.amd?define([],function(){return i(e)}):"object"===(void 0===n?"undefined":r(n))?t.exports=i(e):e.Polyglot=i(e)})(void 0!==e?e:void 0,function(e){var t=String.prototype.replace;function n(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||g}n.VERSION="1.0.0",n.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},n.prototype.extend=function(e,t){var n;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],t&&(i=t+"."+i),"object"===(void 0===n?"undefined":r(n))?this.extend(n,i):this.phrases[i]=n)},n.prototype.unset=function(e,t){var n;if("string"==typeof e)delete this.phrases[e];else for(var i in e)e.hasOwnProperty(i)&&(n=e[i],t&&(i=t+"."+i),"object"===(void 0===n?"undefined":r(n))?this.unset(n,i):delete this.phrases[i])},n.prototype.clear=function(){this.phrases={}},n.prototype.replace=function(e){this.clear(),this.extend(e)},n.prototype.t=function(e,t){var n,r;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof t._?n=t._:this.allowMissing?n=e:(this.warn('Missing translation for key: "'+e+'"'),r=e),"string"==typeof n&&(t=v(t),r=m(r=l(n,this.currentLocale,t.smart_count),t)),r},n.prototype.has=function(e){return e in this.phrases};var i="||||",o={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},s={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};function c(e){var t,n,r,i={};for(t in e)if(e.hasOwnProperty(t))for(r in n=e[t])i[n[r]]=t;return i}var a=/^\s+|\s+$/g;function u(e){return t.call(e,a,"")}function l(e,t,n){var r;return null!=n&&e?u((r=e.split(i))[f(t,n)]||r[0]):e}function h(e){var t=c(s);return t[e]||t.en}function f(e,t){return o[h(e)](t)}var p=/\$/g,d="$$$$";function m(e,n){for(var r in n)if("_"!==r&&n.hasOwnProperty(r)){var i=n[r];"string"==typeof i&&(i=t.call(n[r],p,d)),e=t.call(e,new RegExp("%\\{"+r+"\\}","g"),i)}return e}function g(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function v(e){var t={};for(var n in e)t[n]=e[n];return t}return n}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],poolHandler:[function(e,t,n){"use strict";cc._RF.push(t,"a8528UKIodMTr+2gpGtv9pW","poolHandler"),cc.Class({extends:cc.Component,properties:{_pool:null},onLoad:function(){this.reuse()},unuse:function(){},reuse:function(){}}),cc._RF.pop()},{}],portal:[function(e,t,n){"use strict";cc._RF.push(t,"2ccb0+LG+5B4IYvFD5ffjru","portal");var r=e("status"),i=e("global");e("common");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="portal"},onGain:function(e){var t=this;cc.loader.loadRes("Prefab/portal"+this.extra.type,cc.Prefab,function(n,r){t.sprite=cc.instantiate(r),t.sprite.x=t.sprite.y=0,e.effectLayer&&e.effectLayer.addChild(t.sprite)})},onLost:function(e){this.sprite.destroy()},onTurnEnd:function(e){var t=i.currentRoom.getMovableByTile(e);t&&(t.teleport(this.extra.peer,!1),i.currentRoom.setDelayPhaseTime(i.TELEPORT_TIME+.02)),this._super(e)}}),cc._RF.pop()},{common:"common",global:"global",status:"status"}],potion:[function(e,t,n){"use strict";cc._RF.push(t,"14ecc3ITFlAmrnqwaLg6zUJ","potion");var r=e("item"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u56de\u590d\u836f"},override:!0},desc:{get:function(){return"\u6062\u590d\u751f\u547d\u3002\n\u7b49\u7ea7\u8d8a\u9ad8\u6548\u679c\u8d8a\u597d\u3002"},override:!0},score:{get:function(){return this.level*i.SCORE_INFLATION_RATE},override:!0},effect:{get:function(){return this.level*i.POTION_EFFECT}}},ctor:function(){this.type="potion",this.breakable=!0},onTaken:function(){i.currentRoom.hero.getComponent("hero").gainHp(this.effect)}}),cc._RF.pop()},{global:"global",item:"item"}],prevent:[function(e,t,n){"use strict";cc._RF.push(t,"3a62bXnJjRCIra8huHAC2zt","prevent");var r=e("status"),i=e("global");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="prevent"},onGain:function(){var e=this;cc.loader.loadRes("Prefab/dispelShield",cc.Prefab,function(t,n){e.dispelSprite=cc.instantiate(n),e.dispelSprite.x=0,e.dispelSprite.y=0,i.currentRoom.hero.addChild(e.dispelSprite)})},onLost:function(){this.dispelSprite&&this.dispelSprite.runAction(cc.sequence(cc.fadeOut(.2),cc.removeSelf()))}}),cc._RF.pop()},{global:"global",status:"status"}],ratman:[function(e,t,n){"use strict";cc._RF.push(t,"36272XGjU9HVpx6Ct7TAcDL","ratman");var r=e("global"),i=(e("common"),e("enemy"));cc.Class({extends:i,properties:{title:{get:function(){return"\u9f20\u4eba"},override:!0},desc:{get:function(){return"\u573a\u4e0a\u9053\u5177\u9053\u5177\u8d8a\u591a\uff0c\u653b\u51fb\u529b\u5c31\u8d8a\u9ad8\u3002\n\u653b\u51fb\u529b\u4e00\u822c\u81f3\u5f88\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){return(2*(this.level+this.star)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level*2-1},override:!0}},ctor:function(){this.type="ratman"},hit:function(e){var t=0;return r.currentRoom.foreachMovable(function(e){e.getComponent("item")&&t++},this),this.attack*(t+1)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],resurrectionSkill:[function(e,t,n){"use strict";cc._RF.push(t,"12719pcW6dJbKci6ZSsirON","resurrectionSkill");var r=e("skill"),i=e("global");e("common");cc.Class({extends:r,properties:{effect:{get:function(){return this.effectOfLevel(this.level)}},desc:{get:function(){return"\u5982\u679c\u672c\u8f6e\u6b7b\u4ea1\uff0c\u4ee5"+Math.round(100*this.effect)+"%\u751f\u547d\u590d\u6d3b"}}},ctor:function(){this.skillName="resurrectionSkill",this.icon="Skill/resurrectionSkill",this.maxLevel=4,this.displayName="\u590d\u6d3b",this.coolDown=60+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u590d\u6d3b\u65f6\u591a\u6062\u590d20%\u751f\u547d\uff0c\u540c\u65f6\u51b7\u5374\u65f6\u95f4\u4e5f\u51cf\u5c112\u56de\u5408"},effectOfLevel:function(e){return.2*e},onLevelUp:function(e){this.coolDown-=2,this.reduceWait(2)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.gainStatus("resurrection",2),e.getStatus("resurrection").getComponent("resurrection").effect=this.effect,e.afterUseSkill()}}),cc._RF.pop()},{common:"common",global:"global",skill:"skill"}],resurrection:[function(e,t,n){"use strict";cc._RF.push(t,"83298f/589LFpAx270CZXua","resurrection");var r=e("status"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u590d\u6d3b"}},desc:{get:function(){return"\u672c\u56de\u5408\u5982\u679c\u6b7b\u4ea1\u5c06\u4f1a\u590d\u6d3b"}}},ctor:function(){this.statusName="resurrection"},onTurnStart:function(){i.currentRoom.hero.getComponent("hero").lostStatus("resurrection")}}),cc._RF.pop()},{global:"global",status:"status"}],roomEntry:[function(e,t,n){"use strict";cc._RF.push(t,"3ff80up+pNHpLZRvV4DxDaN","roomEntry");var r=e("TileSet");t.exports={tutorial1:{name:"tutorial1",tileSet:r.tutorial1,hideHead:!0,hideSkill:!0,isTutorial:!0,initHero:{position:{x:1,y:1}},nextRoom:"tutorial2"},tutorial2:{name:"tutorial2",tileSet:r.tutorial2,hideHead:!0,hideSkill:!0,isTutorial:!0,initHero:{position:{x:1,y:1}},initMovable:[{isEnemy:!0,type:"slime",subtype:"R",position:{x:1,y:3},level:1}],nextRoom:"tutorial3"},tutorial3:{name:"tutorial3",tileSet:r.tutorial1,hideHead:!0,hideSkill:!0,isTutorial:!0,initHero:{position:{x:1,y:1}},initMovable:[{isEnemy:!0,type:"slime",subtype:"R",position:{x:2,y:1},level:1},{isEnemy:!0,type:"slime",subtype:"R",position:{x:3,y:1},level:1},{isEnemy:!0,type:"slime",subtype:"R",position:{x:4,y:1},level:1},{isEnemy:!0,type:"slime",subtype:"R",position:{x:5,y:1},level:1}],nextRoom:"tutorial4"},tutorial4:{name:"tutorial4",tileSet:r.tutorial4,hideHead:!0,hideSkill:!0,isTutorial:!0,initHero:{position:{x:2,y:5}},initMovable:[{isEnemy:!0,type:"slime",subtype:"R",position:{x:1,y:1},level:1},{isEnemy:!0,type:"slime",subtype:"R",position:{x:1,y:2},level:1},{isEnemy:!0,type:"slime",subtype:"Y",position:{x:1,y:3},level:1}],nextRoom:"normal"},normal:{name:"normal",tileSet:r.tiles5x5,initMovable:[],initHero:{position:{x:3,y:3},status:[],skill:[]}},"4x4":{name:"4x4",tileSet:r.tiles4x4,initMovable:[],initHero:{position:{x:3,y:3},status:[],skill:[]}},"5x5":{name:"5x5",tileSet:r.tiles5x5,initMovable:[],initHero:{position:{x:3,y:3},status:[],skill:[]}},"6x6":{name:"6x6",tileSet:r.tiles6x6,initMovable:[],initHero:{position:{x:3,y:3},status:[],skill:[]}}},cc._RF.pop()},{TileSet:"TileSet"}],score:[function(e,t,n){"use strict";cc._RF.push(t,"fd88fwNS6ZEx5fFZjs2y1ho","score");var r=e("global"),i=e("common");e("storage"),e("MenuScene");cc.Class({extends:cc.Component,properties:{nicknameLabel:cc.Label,avatar:cc.Sprite,scoreLabel:cc.Label,turnLabel:cc.Label,detailLayout:cc.Layout,heroLevelLabel:cc.Label,killByLabel:cc.Label,killByIcon:cc.Sprite,timeLabel:cc.Label},formatDate:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12==0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},start:function(){},updateItem:function(e,t){var n=this;this.itemID=t,this.entry=e,this.nicknameLabel.string=e.nickname,this.scoreLabel.string=e.score,this.turnLabel.string=e.turn,this.timeLabel.string=this.formatDate(new Date(e.createdAt),"yyyy-MM-dd HH:mm"),this.heroLevelLabel.string="Lv"+e.detail.level,e.avatarUrl&&cc.loader.load({url:e.avatarUrl,type:"png"},function(e,t){if(e)cc.log(e);else{var r=new cc.SpriteFrame(t);n.avatar.spriteFrame=r}}),this.layoutDetail()},loadIcon:function(e,t){cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.spriteFrame=n,e.node.width=45,e.node.height=45})},layoutDetail:function(){var e=this;if(this.detailLayout.node.removeAllChildren(),this.entry.detail){var t=new cc.Node;if(t.addComponent(cc.Sprite),this.loadIcon(t.getComponent(cc.Sprite),"Texture/Unlock/unlock-"+this.entry.detail.type),t.y=0,this.detailLayout.node.addChild(t),this.entry.detail.skills.forEach(function(e){var t=new cc.Node;t.addComponent(cc.Sprite),this.loadIcon(t.getComponent(cc.Sprite),"Texture/Skill/"+e),t.y=0,this.detailLayout.node.addChild(t)},this),this.entry.detail.perks.forEach(function(e){var t=new cc.Node;t.addComponent(cc.Sprite),this.loadIcon(t.getComponent(cc.Sprite),"Texture/Perk/"+e),t.y=0,this.detailLayout.node.addChild(t)},this),"enemy"==this.entry.detail.killedBy.type){var n=this.entry.detail.killedBy.enemy;i.contains(r.bossPool,n)?this.killByLabel.string="":this.killByLabel.string="Lv"+this.entry.detail.killedBy.level,"slime"==n&&(n="slime-red"),cc.loader.loadRes("Texture/Enemy/"+n,cc.SpriteFrame,function(t,n){t?cc.log(t):e.killByIcon.spriteFrame=n})}else"poison"==this.entry.detail.killedBy.type?(this.killByLabel.string="",cc.loader.loadRes("Texture/Status/status-poison",cc.SpriteFrame,function(t,n){e.killByIcon.spriteFrame=n})):"nail"==this.entry.detail.killedBy.type&&(this.killByLabel.string="",cc.loader.loadRes("Texture/Tile/nail-attacking",cc.SpriteFrame,function(t,n){e.killByIcon.spriteFrame=n}))}}}),cc._RF.pop()},{MenuScene:"MenuScene",common:"common",global:"global",storage:"storage"}],scorpion:[function(e,t,n){"use strict";cc._RF.push(t,"731c2Z0b+lE+pG6qI8SD4iB","scorpion");var r=e("global"),i=e("common"),o=e("enemy");cc.Class({extends:o,properties:{title:{get:function(){return"\u874e\u5b50"},override:!0},desc:{get:function(){return"\u5408\u5e76\u6216\u653b\u51fb\u65f6\u6709\u53ef\u80fd\u4f7f\u5468\u56f4\u89d2\u8272\u4e0d\u80fd\u8fdb\u884c\u666e\u901a\u653b\u51fb1\u56de\u5408\uff08\u7b49\u7ea7\u8d8a\u9ad8\u6982\u7387\u8d8a\u9ad8\uff09\u3002\n\u653b\u51fb\u529b\u5f88\u4f4e\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return(Math.round(2.5*e)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){var e=this.level+this.star;return 2*Math.round(e/2)},override:!0}},ctor:function(){this.type="scorpion"},afterBeMerged:function(e){this._super(e);var t=this.positions[0];i.INCREMENTS.forEach(function(e){var n=r.currentRoom.getMovableByPosition(t.x+e.x,t.y+e.y);n&&this.checkEffect(n,1)},this)},afterHitHero:function(e){this.checkEffect(e,2),this._super(e)},getEffectRate:function(e){return Math.min(.25,(this.level+this.star+1)/100)},checkEffect:function(e,t){e.getComponent("item")||this.getEffectRate(e)>Math.random()&&(t+=Math.min(2,Math.floor(this.level/18)),e.gainStatus("stun",t))}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],shaman:[function(e,t,n){"use strict";cc._RF.push(t,"be0acMqL9FBuYn8jO/y/60S","shaman");var r=e("global"),i=e("common"),o=e("enemy");cc.Class({extends:o,properties:{title:{get:function(){return"\u8428\u6ee1"},override:!0},desc:{get:function(){return"\u51fa\u73b0\u6216\u5408\u5e76\u65f6\u5468\u56f4\u654c\u4eba\u72c2\u66b4\uff08\u653b\u51fb\u529b\u52a0\u500d\uff09\u3002\n\u653b\u51fb\u529b\u4e00\u822c\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){return(2*(this.level+this.star)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level*2-1},override:!0}},ctor:function(){this.type="shaman"},generate:function(){var e=this;this._super(),setTimeout(function(){var t=e.positions[0];i.INCREMENTS.forEach(function(e){var n=r.currentRoom.getMovableByPosition(t.x+e.x,t.y+e.y);n&&n.getComponent("enemy")&&n.gainStatus("angry",-1)},e)},r.GENERATE_TIME)},afterBeMerged:function(e){this._super(e);var t=this.positions[0];i.INCREMENTS.forEach(function(e){var n=r.currentRoom.getMovableByPosition(t.x+e.x,t.y+e.y);n&&n.getComponent("enemy")&&n.gainStatus("angry",-1)},this)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],shieldSkill:[function(e,t,n){"use strict";cc._RF.push(t,"da03eBHgLJEaokSNsqafz9E","shieldSkill");var r=e("skill"),i=e("global");e("common");cc.Class({extends:r,properties:{effect:{get:function(){return this.level}},desc:{get:function(){return"\u63a5\u4e0b\u67653\u56de\u5408\u9632\u5fa1\u52a0"+this.effect}}},ctor:function(){this.skillName="shieldSkill",this.icon="Skill/shieldSkill",this.displayName="\u5723\u76fe",this.coolDown=8+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u9632\u5fa1\u529b\u591a\u52a01\uff0c\u4f46\u51b7\u5374\u65f6\u95f4\u589e\u52a03\u56de\u5408"},onLevelUp:function(e){this.coolDown+=3},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.gainStatus("shield",3,{effect:this.effect}),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",global:"global",skill:"skill"}],shield:[function(e,t,n){"use strict";cc._RF.push(t,"3f18dyGnMRIaZmv9FGwYD05","shield");var r=e("status"),i=e("global");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="shield"},onGain:function(){var e=this;cc.loader.loadRes("Prefab/shield",cc.Prefab,function(t,n){e.shieldSprite=cc.instantiate(n),e.shieldSprite.x=0,e.shieldSprite.y=0,i.currentRoom.hero.addChild(e.shieldSprite)}),i.currentRoom.hero.getComponent("hero").defend=this.extra.effect},onLost:function(){this.shieldSprite&&this.shieldSprite.runAction(cc.sequence(cc.fadeOut(.2),cc.removeSelf())),i.currentRoom.hero.getComponent("hero").defend=0}}),cc._RF.pop()},{global:"global",status:"status"}],skeleton:[function(e,t,n){"use strict";cc._RF.push(t,"43c33gLOPpNY4+izCqlF9hp","skeleton");var r=e("global"),i=e("enemy");cc.Class({extends:i,properties:{title:{get:function(){return"\u9ab7\u9ac5\u536b\u5175"},override:!0},desc:{get:function(){return"\u653b\u51fb\u529b\u4e00\u822c\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002"},override:!0},exp:{get:function(){return(2*(this.level+this.star)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*(2*this.level-1)},override:!0},isUndead:!0},ctor:function(){this.type="skeleton"}}),cc._RF.pop()},{enemy:"enemy",global:"global"}],skillDescDialog:[function(e,t,n){"use strict";cc._RF.push(t,"fb8bbE9U0dI3aaGV2sTOk48","skillDescDialog");var r=e("global");cc.Class({extends:cc.Component,properties:{icon:cc.Sprite,titleLabel:cc.Label,descLabel:cc.Label},start:function(){r.currentRoom.setAcceptInput(!1)},setSkill:function(e,t){var n=this,r=new cc.Node;r.addComponent(e),(r=r.getComponent(e)).initProperties(t),cc.loader.loadRes("Texture/Skill/"+e,cc.SpriteFrame,function(e,t){cc.log(t),n.icon.spriteFrame=t}),this.titleLabel.string="Lv"+t+" "+r.displayName,this.descLabel.string=r.desc+"\n\n\u51b7\u5374\u65f6\u95f4:"+r.coolDown+"\u56de\u5408"},closeDialog:function(){this.node.runAction(cc.sequence(cc.fadeOut(r.DIALOG_EXIT_TIME),cc.removeSelf())),r.currentRoom.setAcceptInput(!0)}}),cc._RF.pop()},{global:"global"}],skill:[function(e,t,n){"use strict";cc._RF.push(t,"beae4ROFjFA2Lh0ogiCMSAA","skill");e("movable");var r=e("global");e("common"),e("enemy");cc.Class({extends:cc.Component,properties:{level:1,maxLevel:5,skillName:null,displayName:"",coolDown:{default:5,notify:function(e){e!=this.coolDown&&null!=this.countDownIcon&&this.countDownIcon&&(this.countDownIcon.fillRange=(this.coolDown-this.countDown)/this.coolDown)}},icon:"",countDown:{default:0,notify:function(e){e!=this.countDown&&null!=this.countDownLabel&&(this.countDownLabel.string=0==this.countDown?"":this.countDown,this.countDownIcon.fillRange=(this.coolDown-this.countDown)/this.coolDown)}},forbid:{default:!1,notify:function(e){e!=this.forbid&&(this.forbidIcon.node.active=this.forbid)}}},onLoad:function(){var e=cc.find("iconLayout",this.node);this.iconBg=cc.find("iconBg",e).getComponent(cc.Sprite),this.countDownIcon=cc.find("countDownIcon",e).getComponent(cc.Sprite),this.countDownLabel=cc.find("countDown",e).getComponent(cc.Label),this.forbidIcon=cc.find("forbidIcon",e).getComponent(cc.Sprite)},start:function(){var e=this;this.forbidIcon.node.active=this.forbid,cc.find("skillName",this.node).getComponent(cc.Label).string=this.displayName,this.countDownLabel.string="",cc.loader.loadRes("Texture/"+this.icon,cc.SpriteFrame,function(t,n){e.iconBg.spriteFrame=e.countDownIcon.spriteFrame=n}),this.iconBg.node.on("touchcancel",this.cancelSkillDesc,this),this.iconBg.node.on("touchstart",this.startSkillDesc,this),this.iconBg.node.on("touchend",this.useSkill,this),this.countDownIcon.fillRange=(this.coolDown-this.countDown)/this.coolDown},onDestroy:function(){},startSkillDesc:function(){this.scheduleOnce(this.showSkillDesc,1),cc.log("start count")},cancelSkillDesc:function(){cc.log("cancel count"),this.unschedule(this.showSkillDesc)},showSkillDesc:function(){var e=cc.instantiate(r.currentRoomScene.skillDescDialog);e.getComponent("skillDescDialog").setSkill(this.skillName,this.level),e.x=e.y=0,r.currentRoomScene.node.addChild(e)},initProperties:function(e,t,n){for(var r=this.level;r<e;r++)this.levelUp();this.forbid=n||!1,this.countDown=t||0},levelUp:function(){this.level++,this.onLevelUp()},useSkill:function(){this.cancelSkillDesc(),this.canUse()&&(r.currentRoom.setAcceptInput(!1),this.getComponent(this.skillName).onUsed(),this.countDown=this.coolDown)},canUse:function(){return!this.forbid&&r.currentRoom.isAcceptInput()&&this.countDown<=0},reduceWait:function(e){e=e||1,this.countDown=Math.max(0,this.countDown-e)},disturb:function(e){0!==this.countDown&&(this.countDown=Math.min(this.coolDown,e+this.countDown))},onGain:function(){},onLevelUp:function(){},levelUpDesc:function(){return""},onTurnStart:function(){this.reduceWait()}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",movable:"movable"}],slime:[function(e,t,n){"use strict";cc._RF.push(t,"ce089ZHEDBMgZ3Flha/kifc","slime");var r=e("global"),i=e("enemy");cc.Class({extends:i,properties:{title:{get:function(){return"\u53f2\u83b1\u59c6"},override:!0},desc:{get:function(){return"\u653b\u51fb\u529b\u8d85\u4f4e\u3002\n\u7ecf\u9a8c\u503c\u8d85\u4f4e\u3002"},override:!0},exp:{get:function(){return this.level*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return Math.round(Math.log(this.level+1))},override:!0}},ctor:function(){this.type="slime"},onLoad:function(){this._super()},start:function(){this._super()}}),cc._RF.pop()},{enemy:"enemy",global:"global"}],slowed:[function(e,t,n){"use strict";cc._RF.push(t,"047eawBDw1A5Y0dVrzjpbH3","slowed");var r=e("status");e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u51cf\u901f"}},desc:{get:function(){return"\u53ea\u80fd\u79fb\u52a81\u683c"}}},ctor:function(){this.statusName="slowed"}}),cc._RF.pop()},{global:"global",status:"status"}],smoke:[function(e,t,n){"use strict";cc._RF.push(t,"a1c5b68kONFWaZxBcgnjG7R","smoke");var r=e("status"),i=e("global");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="smoke"},onGain:function(){i.currentRoom.foreachMovable(function(e){e.getComponent("boss")||e.getComponent("enemy")&&(e.attackType===i.ATTACK_TYPE_RANGE?e.gainStatus("stun",this.duration):e.gainStatus("stun",1))},this)}}),cc._RF.pop()},{global:"global",status:"status"}],smokingBombSkill:[function(e,t,n){"use strict";cc._RF.push(t,"3c9d7fy3fRDUIX9ZZRi3xBN","smokingBombSkill");var r=e("skill"),i=e("global");e("common");cc.Class({extends:r,properties:{effect:{get:function(){return this.level+1}},desc:{get:function(){return"\u6240\u6709\u8fdc\u7a0b\u653b\u51fb\u7684\u654c\u4eba"+this.effect+"\u56de\u5408\u4e0d\u80fd\u653b\u51fb, \u6240\u6709\u8fd1\u7a0b\u653b\u51fb\u7684\u654c\u4eba1\u56de\u5408\u4e0d\u80fd\u653b\u51fb\u3002\u5bf9boss\u65e0\u6548"}}},ctor:function(){this.skillName="smokingBombSkill",this.icon="Skill/smokingBombSkill",this.displayName="\u70df\u96fe\u5f39",this.coolDown=10+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u5bf9\u8fdc\u7a0b\u654c\u4eba\u7684\u6548\u679c\u6301\u7eed\u65f6\u95f4\u591a1\u56de\u5408\uff0c\u4f46\u51b7\u5374\u65f6\u95f4\u4e5f\u591a1\u56de\u5408"},effectOfLevel:function(e){return e},onLevelUp:function(e){this.coolDown++},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.gainStatus("smoke",this.effect),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",global:"global",skill:"skill"}],snake:[function(e,t,n){"use strict";cc._RF.push(t,"f3634XYN7dDyLPBgw/KLC/L","snake");var r=e("global"),i=(e("common"),e("enemy"));cc.Class({extends:i,properties:{title:{get:function(){return"\u6bd2\u86c7"},override:!0},desc:{get:function(){return"\u51fb\u4e2d\u65f6\u6709\u4e00\u5b9a\u6982\u7387\u4f7f\u4f60\u4e2d\u6bd2\uff08\u6bcf\u56de\u5408\u5f00\u59cb-1\u751f\u547d\uff09\n\uff08\u7b49\u7ea7\u8d8a\u9ad8\u6982\u7387\u8d8a\u9ad8\uff09\n\u653b\u51fb\u529b\u8f83\u4f4e\u3002\n\u7ecf\u9a8c\u503c\u4e00\u822c\u3002\n\u6062\u590d\u751f\u547d\u65f6\u53ef\u4ee5\u6d88\u9664\u4e2d\u6bd2\u72b6\u6001"},override:!0},exp:{get:function(){var e=this.level+this.star;return(Math.round(2.5*e)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level},override:!0}},ctor:function(){this.type="snake"},afterHitHero:function(e){this.checkSpecialEffect(e),this._super(e)},checkSpecialEffect:function(e){this.getSpecialEffectRate(e)>Math.random()&&e.gainStatus("poison",-1)},getSpecialEffectRate:function(e){return this.level/10}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],spiderWebSkill:[function(e,t,n){"use strict";cc._RF.push(t,"3875081kI9Eobfzgbwpr0Lo","spiderWebSkill");var r=e("skill"),i=e("global");e("common"),e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="spiderWebSkill",this.icon="Skill/spiderWebSkill",this.displayName="\u86db\u7f51\u672f",this.desc="\u6240\u6709\u654c\u4eba\u4e0d\u80fd\u79fb\u52a81\u56de\u5408",this.coolDown=18+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c112\u56de\u5408"},onLevelUp:function(e){this.coolDown-=2,this.reduceWait(2)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");i.currentRoom.foreachMovable(function(e){e.getComponent("enemy")&&e.gainStatus("frozen",1)},this),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],status:[function(e,t,n){"use strict";cc._RF.push(t,"a368c+tlPRFZ76kYcaD/UJk","status"),cc.Class({extends:cc.Component,properties:{duration:{default:1,visible:!1}},start:function(){},setExtra:function(e){this.extra=e},onTurnEnd:function(e){-1!==this.duration&&(this.duration=Math.max(0,this.duration-1),0==this.duration&&e.lostStatus(this.statusName))},setDuration:function(e){this.duration=Math.max(this.duration,e)}}),cc._RF.pop()},{}],storage:[function(e,t,n){"use strict";cc._RF.push(t,"068bfbxHQ1Cmrrnq8ItN1IS","storage"),t.exports={star:0,game:{},meta:{},statistics:{},unlocked:{},rewardTaken:{},achievement:{},progress:{maxSkill:{},maxPerk:{},seen:{slime:1},seenItem:{iceWall:1}},tutorial:{},userInfo:null,loadMoney:function(){this.star=parseInt(cc.sys.localStorage.getItem("star")||0)},saveMoney:function(e){this.star=e,cc.sys.localStorage.setItem("star",e)},loadGame:function(){var e=cc.sys.localStorage.getItem("game");this.game=e?JSON.parse(e):{}},saveGame:function(){cc.sys.localStorage.setItem("game",JSON.stringify(this.game))},loadTutorial:function(){var e=cc.sys.localStorage.getItem("tutorial");this.tutorial=e?JSON.parse(e):{}},loadProgress:function(){var e=cc.sys.localStorage.getItem("progress");this.progress=e?JSON.parse(e):{maxSkill:{},maxPerk:{},seen:{slime:1},seenItem:{iceWall:1}},this.progress.maxSkill=this.progress.maxSkill||{},this.progress.maxPerk=this.progress.maxPerk||{},this.progress.seen=this.progress.seen||{slime:1},this.progress.seenItem=this.progress.seenItem||{iceWall:1},this.progress.perk=this.progress.perk||{}},loadRewardTaken:function(){var e=cc.sys.localStorage.getItem("rewardTaken");this.rewardTaken=e?JSON.parse(e):{}},loadAchievement:function(){var e=cc.sys.localStorage.getItem("achievement");this.achievement=e?JSON.parse(e):{}},loadUnlock:function(){var e=cc.sys.localStorage.getItem("unlocked");this.unlocked=e?JSON.parse(e):{normal:1}},loadStatistics:function(){var e=cc.sys.localStorage.getItem("statistics");try{this.statistics=e?JSON.parse(e):{gameTime:0}}catch(e){this.statistics={gameTime:0}}this.statistics.kill=this.statistics.kill||{},this.statistics.gameOver=this.statistics.gameOver||{},this.statistics.lastGame=this.statistics.lastGame||{},this.statistics.info=this.statistics.info||{}},recordKill:function(e,t,n){this.currentTurn!==n?(this.currentTurn=n,this.killInOneTurn=1,this.statistics.kill.oneTurn||(this.statistics.kill.oneTurn=1)):(this.killInOneTurn++,this.killInOneTurn>this.statistics.kill.oneTurn&&(this.statistics.kill.oneTurn=this.killInOneTurn)),this.statistics.kill[e+"Count"]=this.statistics.kill[e+"Count"]||0,this.statistics.kill[e+"Count"]++,this.statistics.kill[e+"Level"]=this.statistics.kill[e+"Level"]||t,t>this.statistics.kill[e+"Level"]&&(this.statistics.kill[e+"Level"]=t)},recordInfo:function(e){this.statistics.info[e]=this.statistics.info[e]||0,this.statistics.info[e]++},recordGameOver:function(e,t,n){this.statistics.gameTime++,this.statistics.gameOver.turn=this.statistics.gameOver.turn||0,this.statistics.gameOver.turn=Math.max(t.turn,this.statistics.gameOver.turn),this.statistics.gameOver[n.subtype+"Turn"]=this.statistics.gameOver[n.subtype+"Turn"]||0,this.statistics.gameOver[n.subtype+"Turn"]=Math.max(t.turn,this.statistics.gameOver[n.subtype+"Turn"]),this.statistics.gameOver[e.type]=this.statistics.gameOver[e.type]||0,this.statistics.gameOver[e.type]++,this.statistics.gameOver.damage=this.statistics.gameOver.damage||0,this.statistics.gameOver.damage=Math.max(e.damage,this.statistics.gameOver.damage),this.saveStatistics()},recordLastGame:function(e,t,n){this.statistics.lastGame.turn=e.turn,this.statistics.lastGame.level=t.level,this.statistics.lastGame.type=t.subtype,this.statistics.lastGame.perks=n,this.saveStatistics()},recordDamage:function(e){},saveStatistics:function(){cc.sys.localStorage.setItem("statistics",JSON.stringify(this.statistics))},saveProgress:function(){cc.sys.localStorage.setItem("progress",JSON.stringify(this.progress))},saveTutorial:function(){cc.sys.localStorage.setItem("tutorial",JSON.stringify(this.tutorial))},unlock:function(e){this.unlocked[e]=1,cc.sys.localStorage.setItem("unlocked",JSON.stringify(this.unlocked))},takeReward:function(e){this.rewardTaken[e]=1,cc.sys.localStorage.setItem("rewardTaken",JSON.stringify(this.rewardTaken))},clearData:function(e){cc.sys.localStorage.removeItem(e)},loadUserInfo:function(){var e=cc.sys.localStorage.getItem("userInfo");this.userInfo=e?JSON.parse(e):null},saveUserInfo:function(e){e&&(this.userInfo=e),cc.sys.localStorage.setItem("userInfo",JSON.stringify(this.userInfo))}},cc._RF.pop()},{}],stun:[function(e,t,n){"use strict";cc._RF.push(t,"13759g9zeZBz7MpuwaWaVsc","stun");var r=e("status");e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u9ebb\u75f9"}},desc:{get:function(){return"\u4e0d\u80fd\u8fdb\u884c\u666e\u901a\u653b\u51fb"}}},ctor:function(){this.statusName="stun"}}),cc._RF.pop()},{global:"global",status:"status"}],summoner:[function(e,t,n){"use strict";cc._RF.push(t,"54357PhSZVAp5tVSALan4f3","summoner");var r=e("global"),i=e("common"),o=e("enemy");cc.Class({extends:o,properties:{title:{get:function(){return"\u5524\u4e91\u5e08"},override:!0},desc:{get:function(){return"\u5408\u5e76\u65f6\u5728\u573a\u4e0a\u751f\u6210\u4e00\u6735\u4e4c\u4e91\u963b\u6321\u4f60\u7684\u89c6\u7ebf\u3002\uff08\u7b49\u7ea7\u8d8a\u9ad8\u4e91\u6735\u8d8a\u591a\uff09\u3002\n\u653b\u51fb\u529b\u8f83\u4f4e\u3002\n\u7ecf\u9a8c\u503c\u8f83\u4f4e\u3002"},override:!0},exp:{get:function(){var e=this.level+this.star;return(Math.round(3*e/2)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 2*this.level},override:!0}},ctor:function(){this.type="summoner"},getCloudNumber:function(){return Math.min(3,Math.ceil(this.level/10))},getCloudTime:function(){return Math.min(4,Math.ceil(this.level/6))+1+r.NEGATIVE_EFFECT_TIME_ADJUST},afterBeMerged:function(e){if(this._super(e),e.getComponent("summoner")){var t=r.currentRoom.filterTile(function(e){return e.getComponent("tile").isPassable(this)&&!e.getComponent("tile").getStatus("cloud")},this);i.sample(t,this.getCloudNumber()).forEach(function(e){e.getComponent("tile").gainStatus("cloud",this.getCloudTime())},this)}}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global"}],teleportSkill:[function(e,t,n){"use strict";cc._RF.push(t,"1b439Uq8wJExJSRnmyGUqQC","teleportSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="teleportSkill",this.icon="Skill/teleportSkill",this.displayName="\u4f20\u9001",this.desc="\u5c06\u81ea\u5df1\u4f20\u9001\u5230\u968f\u673a\u7684\u683c\u5b50",this.coolDown=13+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n=i.currentRoom.getTile(t),r=i.currentRoom.filterTile(function(t){return n!==t&&t.isPassable(e)&&!i.currentRoom.getMovableByTile(t)},this);if(r.length){var s=o.sample(r),c={x:s.x,y:s.y};e.teleport(c,!1)}this.scheduleOnce(function(){e.afterUseSkill()},i.TELEPORT_TIME+.01)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],tile:[function(e,t,n){"use strict";cc._RF.push(t,"1c856U1MVVP/a3ulQziyTrQ","tile");e("global"),e("common");cc.Class({extends:cc.Component,properties:{type:{visible:!1,default:""},subtype:{visible:!1,default:""},atlas:cc.SpriteAtlas,x:{default:0,visible:!1},y:{default:0,visible:!1},position:{get:function(){return{x:this.x,y:this.y}},visible:!1},effectLayer:cc.Node},ctor:function(){this.type="",this.subtype=null,this._isPassable=!0,this._isCapture=!1,this._canGenEnemy=!1,this.status={}},isPassable:function(e){return this._isPassable},isCapture:function(e){return this._isCapture},canGenEnemy:function(){return this._canGenEnemy},start:function(){this.setFrame()},setFrame:function(){this.node.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame(this.type+"-"+this.subtype)},getStatus:function(e){return this.status?this.status[e]:null},gainStatus:function(e,t,n){if(t=t||1,this.getStatus(e))return this.getStatus(e).setDuration(t),void(n&&this.getStatus(e).setExtra(n));var r=new cc.Node;r.addComponent(e),(r=r.getComponent(e)).duration=t,n&&r.setExtra(n),r.name=e,r.onGain&&r.onGain(this),this.status[e]=r},lostStatus:function(e){var t=this.status[e];t&&(t.onLost&&t.onLost(this),delete this.status[e])},onTurnStart:function(){for(var e in this.status){var t=this.status[e];t.onTurnStart&&t.onTurnStart(this)}},onTurnEnd:function(){for(var e in this.status){var t=this.status[e];t.onTurnEnd&&t.onTurnEnd(this)}}}),cc._RF.pop()},{common:"common",global:"global"}],tomb:[function(e,t,n){"use strict";cc._RF.push(t,"c5592uZBIxH7LiHhIcrtsQd","tomb");var r=e("item"),i=e("global");cc.Class({extends:r,properties:{title:{get:function(){return"\u82f1\u96c4\u4e4b\u5893"},override:!0},desc:{get:function(){return"\u4f60\u53d1\u73b0\u4e86\u524d\u4ee3\u82f1\u96c4\u7684\u575f\u5893\uff0c\u62dc\u8bbf\u90a3\u91cc\u53ef\u4ee5\u8ba9\u4f60\u83b7\u5f97\u4e00\u4e9b\u7ecf\u9a8c\u6559\u8bad"},override:!0},score:{get:function(){return this.level*i.SCORE_INFLATION_RATE},override:!0}},ctor:function(){this.type="tomb",this._isMovable=!1,this.exchangeable=!1},start:function(){this._super(),this.node.y=this.node.y-80,this.node.runAction(cc.spawn(cc.moveBy(i.HERO_ATTACK_TIME/2,0,80).easing(cc.easeIn(1)),cc.fadeIn(i.HERO_ATTACK_TIME/2)))},hideLevel:function(e){},onTaken:function(){i.currentRoom.hero.getComponent("hero").gainExp(this.level*this.level*i.EXP_INFLATION_RATE)}}),cc._RF.pop()},{global:"global",item:"item"}],tornadoSkill:[function(e,t,n){"use strict";cc._RF.push(t,"73070rRrKFIIr9xjLeOya3s","tornadoSkill");var r=e("skill"),i=e("global"),o=e("common"),s=e("enemyFactory");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="tornadoSkill",this.icon="Skill/tornadoSkill",this.displayName="\u72c2\u98ce",this.desc="\u5c06\u6240\u6709\u654c\u4eba\u548c\u9053\u5177\u7684\u4f4d\u7f6e\u6253\u4e71",this.coolDown=15+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=(e.positions[0],i.currentRoom.filterMovable(function(e){return e.getComponent("boss")},this));t=t&&t[0]?t[0]:null;var n,r=i.currentRoom.filterMovable(function(e){return!e.getComponent("boss")&&!e.getComponent("hero")&&(e.__removeOldMapping(),!0)},this);if(t){n=i.currentRoom.filterTile(function(e){return s.checkTileForBoss(e,!1)},this);var c=o.sample(n);c&&t.teleport(c.position,!1);var a=i.currentRoom.getDrawPosition(t.positions[0]);t.__removeOldMapping(),t.setNewPosition(c);var u=i.currentRoom.getDrawPosition(c);t.node.runAction(cc.sequence(cc.spawn(cc.moveTo(i.TELEPORT_TIME/2,a.x,a.y+40),cc.scaleTo(i.TELEPORT_TIME/2,.4,2),cc.fadeOut(i.TELEPORT_TIME/2)),cc.moveTo(.1,u.x,u.y+40),cc.spawn(cc.moveTo(i.TELEPORT_TIME/2,u.x,u.y),cc.scaleTo(i.TELEPORT_TIME/2,1,1),cc.fadeIn(i.TELEPORT_TIME/2))))}n=i.currentRoom.filterTile(function(t){return!i.currentRoom.getMovableByTile(t)&&t.canGenEnemy(e)},this);for(var l=o.sample(n,r.length),h=0;h<r.length;h++){r[h].setNewPosition(l[h].position);u=i.currentRoom.getDrawPosition(l[h].position);r[h].node.runAction(cc.sequence(cc.spawn(cc.moveBy(i.TELEPORT_TIME/2,0,40),cc.scaleTo(i.TELEPORT_TIME/2,.4,2),cc.fadeOut(i.TELEPORT_TIME/2)),cc.moveTo(.001,u.x,u.y+40),cc.spawn(cc.moveBy(i.TELEPORT_TIME/2,0,-40),cc.scaleTo(i.TELEPORT_TIME/2,1,1),cc.fadeIn(i.TELEPORT_TIME/2))))}this.scheduleOnce(function(){e.afterUseSkill()},i.TELEPORT_TIME+.01)}}),cc._RF.pop()},{common:"common",enemyFactory:"enemyFactory",global:"global",skill:"skill"}],treant:[function(e,t,n){"use strict";cc._RF.push(t,"838ff49gUNDp6yAv/3nlx1I","treant");var r=e("global"),i=e("enemy");cc.Class({extends:i,properties:{title:{get:function(){return"\u6811\u4eba"},override:!0},desc:{get:function(){return"\u6bcf\u6b21\u53ea\u79fb\u52a8\u4e00\u6b65\n\u653b\u51fb\u529b\u8f83\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u8f83\u9ad8\u3002"},override:!0},exp:{get:function(){return(3*(this.level+this.star)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 4*this.level-1},override:!0},moveStep:{get:function(){return 1},override:!0}},ctor:function(){this.type="treant"}}),cc._RF.pop()},{enemy:"enemy",global:"global"}],treasureSkill:[function(e,t,n){"use strict";cc._RF.push(t,"df24b1Q0LVH7oWoc+AIdIH5","treasureSkill");var r=e("skill"),i=e("global");e("common");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="treasureSkill",this.icon="Skill/treasureSkill",this.displayName="\u5bfb\u5b9d",this.desc="\u672c\u56de\u5408\u6740\u6b7b\u7684\u602a\u7269\u5fc5\u7136\u6389\u843d\u9053\u5177",this.coolDown=14+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait(1)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.gainStatus("treasure",1),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",global:"global",skill:"skill"}],treasure:[function(e,t,n){"use strict";cc._RF.push(t,"55528DHHTVGVLnuiS/YhX+O","treasure");var r=e("status");e("global");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="treasure"}}),cc._RF.pop()},{global:"global",status:"status"}],troll:[function(e,t,n){"use strict";cc._RF.push(t,"194e7m7YfpAVYeyK2OLzRRB","troll");var r=e("global"),i=e("enemy"),o=e("effect");cc.Class({extends:i,properties:{title:{get:function(){return"\u5de8\u9b54"},override:!0},desc:{get:function(){return"\u8fdc\u7a0b\u653b\u51fb\u3002\u653b\u51fb\u65f6\u6709\u4e00\u5b9a\u6982\u7387\u9020\u6210\u7729\u6655\uff08\u884c\u52a8\u4e0e\u64cd\u4f5c\u76f8\u53cd\uff09\n\u7b49\u7ea7\u8d8a\u9ad8\u6982\u7387\u8d8a\u9ad8\uff0c\u6301\u7eed\u65f6\u95f4\u8d8a\u957f\n\u653b\u51fb\u529b\u4e00\u822c\u3002\n\u7ecf\u9a8c\u503c\u8f83\u9ad8\u3002"},override:!0},attackRage:{get:function(){return 100},visible:!1,override:!0},exp:{get:function(){return(3*(this.level+this.star)-1)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return Math.round(3*this.level/2)-1},override:!0},attackType:{override:!0,default:r.ATTACK_TYPE_RANGE,visible:!1}},ctor:function(){this.type="troll"},beforeAttack:function(e){o.projectStone(this.node.position,e.node.position),this._super(e)},afterHitHero:function(e){this.checkSpecialEffect(e),this._super(e)},checkSpecialEffect:function(e){this.getSpecialEffectRate(e)>Math.random()&&e.gainStatus("dizzy",2+Math.round(this.level/6))},getSpecialEffectRate:function(e){return Math.min(.7,5*this.level/200+.1)}}),cc._RF.pop()},{effect:"effect",enemy:"enemy",global:"global"}],turnUndeadSkill:[function(e,t,n){"use strict";cc._RF.push(t,"51bddhVn3hONq3lXgmMz6tU","turnUndeadSkill");var r=e("skill"),i=e("global"),o=e("common"),s=e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="turnUndeadSkill",this.icon="Skill/turnUndeadSkill",this.displayName="\u9a71\u9010\u6b7b\u7075",this.desc="\u6d88\u706d\u6240\u6709\u7684\u6b7b\u7075",this.coolDown=24+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c112\u56de\u5408"},onLevelUp:function(e){this.coolDown-=2,this.reduceWait(2)},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");i.currentRoom.filterMovable(function(e){return e instanceof s&&e.isUndead},this).forEach(function(t){var n={fromPosition:{x:t.positions[0].x,y:t.positions[0].y+1},type:o.ATTACK_TYPE_SKILL};t.checkHit(e,n)?t.beHit(e,n):t.dodgeAttack(e,n)},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],tutorialEnemyFactory:[function(e,t,n){"use strict";cc._RF.push(t,"73d92n0WzJOfY5fHURwjsjr","tutorialEnemyFactory");var r=e("global"),i=(e("storage"),e("enemyFactory"));cc.Class({extends:i,properties:{},generateEnemy:function(){r.roomEntry.isTutorial?setTimeout(function(){r.currentRoom.afterGenEnemy()},1.2*r.GENERATE_TIME*1e3):this._super()}});cc._RF.pop()},{enemyFactory:"enemyFactory",global:"global",storage:"storage"}],tutorial:[function(e,t,n){"use strict";cc._RF.push(t,"d7ebdRTH8FMMaspVM9FOF30","tutorial");e("global");var r=e("storage"),i=e("common");cc.Class({extends:cc.Component,properties:{label:cc.Label,sprite:cc.Sprite,finger:cc.Sprite},start:function(){},setContent:function(e){if(this.tutorialId=e.tutorialId,this.label.string=e.text,e.image||(this.sprite.node.active=!1),e.finger){var t=i.INCREMENTS[e.fingerDirection];this.finger.node.x=-200*t.x,this.finger.node.y=-200*t.y,this.finger.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1.5,200*t.x,200*t.y),cc.delayTime(.5),cc.moveTo(0,-200*t.x,-200*t.y))))}else this.finger.node.active=!1;e.pause&&cc.director.pause()},exit:function(){cc.log("onExit"+this.tutorialId),cc.director.resume(),r.tutorial[this.tutorialId]=1,r.saveTutorial(),this.node.destroy()}}),cc._RF.pop()},{common:"common",global:"global",storage:"storage"}],unlockEntry:[function(e,t,n){"use strict";cc._RF.push(t,"95c4cFOJ5VIxbv0UTgpIyx6","unlockEntry");e("global"),e("common");var r=e("storage"),i=e("i18n");t.exports={unlocks:[{name:"warriorSkillSlot3",displayName:i.t("warriorSkillSlot3"),prerequests:null,price:5,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.normal=3,r.saveProgress()}},{name:"warriorSkillSlot4",displayName:i.t("warriorSkillSlot4"),prerequests:["warriorSkillSlot3"],price:20,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.normal=4,r.saveProgress()}},{name:"warriorSkillSlot5",displayName:i.t("warriorSkillSlot5"),prerequests:["warriorSkillSlot4"],price:100,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.normal=5,r.saveProgress()}},{name:"backwardSlashSkill",displayName:"\u6218\u58eb\u7684\u62d6\u5200\u6280",prerequests:null,price:5,type:"skill",icon:"Texture/Skill/backwardSlashSkill"},{name:"whirlSkill",displayName:"\u6218\u58eb\u7684\u56de\u65cb\u65a9",prerequests:null,price:5,type:"skill",icon:"Texture/Skill/whirlSkill"},{name:"bigWhirlSkill",displayName:"\u6218\u58eb\u7684\u5927\u56de\u65cb\u65a9",prerequests:["whirlSkill"],price:50,type:"skill",icon:"Texture/Skill/bigWhirlSkill"},{name:"crossSlashSkill",displayName:"\u6218\u58eb\u7684\u5341\u5b57\u65a9",prerequests:["backwardSlashSkill"],price:50,type:"skill",icon:"Texture/Skill/crossSlashSkill"},{name:"warriorPerkSlot2",displayName:"\u6218\u58eb\u7684\u7b2c2\u4e2a\u5929\u8d4b\u69fd",prerequests:null,price:20,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.normal=2,r.saveProgress()}},{name:"warriorPerkSlot3",displayName:"\u6218\u58eb\u7684\u7b2c3\u4e2a\u5929\u8d4b\u69fd",prerequests:["warriorPerkSlot2"],price:50,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.normal=3,r.saveProgress()}},{name:"warriorPerkSlot4",displayName:"\u6218\u58eb\u7684\u7b2c4\u4e2a\u5929\u8d4b\u69fd",prerequests:["warriorPerkSlot3"],price:200,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.normal=4,r.saveProgress()}},{name:"cleric",displayName:"\u7267\u5e08",prerequests:null,price:100,type:"hero",icon:"Texture/Unlock/unlock-cleric"},{name:"clericSkillSlot3",displayName:"\u7267\u5e08\u7684\u7b2c3\u4e2a\u6280\u80fd\u69fd",prerequests:["cleric"],price:50,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.cleric=3,r.saveProgress()}},{name:"clericSkillSlot4",displayName:"\u7267\u5e08\u7684\u7b2c4\u4e2a\u6280\u80fd\u69fd",prerequests:["clericSkillSlot3"],price:100,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.cleric=4,r.saveProgress()}},{name:"clericSkillSlot5",displayName:"\u7267\u5e08\u7684\u7b2c5\u4e2a\u6280\u80fd\u69fd",prerequests:["clericSkillSlot4"],price:400,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.cleric=5,r.saveProgress()}},{name:"turnUndeadSkill",displayName:"\u7267\u5e08\u7684\u9a71\u9010\u6b7b\u7075\u6280\u80fd",prerequests:["cleric"],price:50,type:"skill",icon:"Texture/Skill/turnUndeadSkill"},{name:"resurrectionSkill",displayName:"\u7267\u5e08\u7684\u590d\u6d3b\u6280\u80fd",prerequests:["cleric"],price:150,type:"skill",icon:"Texture/Skill/resurrectionSkill"},{name:"wisdomSkill",displayName:"\u7267\u5e08\u7684\u777f\u667a\u6280\u80fd",prerequests:["cleric"],price:300,type:"skill",icon:"Texture/Skill/wisdomSkill"},{name:"angelSkill",displayName:"\u7267\u5e08\u7684\u53ec\u5524\u5929\u4f7f\u6280\u80fd",prerequests:["wisdomSkill","resurrectionSkill"],price:1e3,type:"skill",icon:"Texture/Skill/angelSkill"},{name:"clericPerkSlot2",displayName:"\u7267\u5e08\u7684\u7b2c2\u4e2a\u5929\u8d4b\u69fd",prerequests:["cleric"],price:50,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.cleric=2,r.saveProgress()}},{name:"clericPerkSlot3",displayName:"\u7267\u5e08\u7684\u7b2c3\u4e2a\u5929\u8d4b\u69fd",prerequests:["clericPerkSlot2"],price:200,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.cleric=3,r.saveProgress()}},{name:"clericPerkSlot4",displayName:"\u7267\u5e08\u7684\u7b2c4\u4e2a\u5929\u8d4b\u69fd",prerequests:["clericPerkSlot3"],price:1e3,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.cleric=4,r.saveProgress()}},{name:"wizard",displayName:"\u6cd5\u5e08",prerequests:null,price:200,type:"hero",icon:"Texture/Unlock/unlock-wizard"},{name:"wizardSkillSlot3",displayName:"\u6cd5\u5e08\u7684\u7b2c3\u4e2a\u6280\u80fd\u69fd",prerequests:["wizard"],price:100,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.wizard=3,r.saveProgress()}},{name:"wizardSkillSlot4",displayName:"\u6cd5\u5e08\u7684\u7b2c4\u4e2a\u6280\u80fd\u69fd",prerequests:["wizardSkillSlot3"],price:300,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.wizard=4,r.saveProgress()}},{name:"wizardSkillSlot5",displayName:"\u6cd5\u5e08\u7684\u7b2c5\u4e2a\u6280\u80fd\u69fd",prerequests:["wizardSkillSlot4"],price:1e3,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.wizard=5,r.saveProgress()}},{name:"teleportSkill",displayName:"\u6cd5\u5e08\u7684\u4f20\u9001\u6280\u80fd",prerequests:["wizard"],price:50,type:"skill",icon:"Texture/Skill/teleportSkill"},{name:"tornadoSkill",displayName:"\u6cd5\u5e08\u7684\u72c2\u98ce\u6280\u80fd",prerequests:["wizard"],price:250,type:"skill",icon:"Texture/Skill/tornadoSkill"},{name:"meteorShowerSkill",displayName:"\u6cd5\u5e08\u7684\u9668\u77f3\u96e8\u6280\u80fd",prerequests:["wizard"],price:500,type:"skill",icon:"Texture/Skill/meteorShowerSkill"},{name:"fireballSkill",displayName:"\u6cd5\u5e08\u7684\u706b\u7403\u672f\u6280\u80fd",prerequests:["wizard"],price:1e3,type:"skill",icon:"Texture/Skill/fireballSkill"},{name:"lighteningSkill",displayName:"\u6cd5\u5e08\u7684\u95ea\u7535\u94fe\u6280\u80fd",prerequests:["wizard"],price:1500,type:"skill",icon:"Texture/Skill/lighteningSkill"},{name:"wizardPerkSlot2",displayName:"\u6cd5\u5e08\u7684\u7b2c2\u4e2a\u5929\u8d4b\u69fd",prerequests:["wizard"],price:50,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.wizard=2,r.saveProgress()}},{name:"wizardPerkSlot3",displayName:"\u6cd5\u5e08\u7684\u7b2c3\u4e2a\u5929\u8d4b\u69fd",prerequests:["wizardPerkSlot2"],price:200,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.wizard=3,r.saveProgress()}},{name:"wizardPerkSlot4",displayName:"\u6cd5\u5e08\u7684\u7b2c4\u4e2a\u5929\u8d4b\u69fd",prerequests:["wizardPerkSlot3"],price:1e3,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.wizard=4,r.saveProgress()}},{name:"thief",displayName:"\u76d7\u8d3c",prerequests:["cleric","wizard"],price:300,type:"hero",icon:"Texture/Unlock/unlock-thief"},{name:"thiefSkillSlot3",displayName:"\u76d7\u8d3c\u7684\u7b2c3\u4e2a\u6280\u80fd\u69fd",prerequests:["thief"],price:100,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.thief=3,r.saveProgress()}},{name:"thiefSkillSlot4",displayName:"\u76d7\u8d3c\u7684\u7b2c4\u4e2a\u6280\u80fd\u69fd",prerequests:["thiefSkillSlot3"],price:300,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.thief=4,r.saveProgress()}},{name:"thiefSkillSlot5",displayName:"\u76d7\u8d3c\u7684\u7b2c5\u4e2a\u6280\u80fd\u69fd",prerequests:["thiefSkillSlot4"],price:1e3,type:"skillSlot",icon:"Texture/Unlock/skillSlot",onUnlock:function(){r.progress.maxSkill.thief=5,r.saveProgress()}},{name:"blinkSkill",displayName:"\u76d7\u8d3c\u7684\u95ea\u73b0\u6280\u80fd",prerequests:["thief"],price:100,type:"skill",icon:"Texture/Skill/blinkSkill"},{name:"smokingBombSkill",displayName:"\u76d7\u8d3c\u7684\u70df\u96fe\u5f39\u6280\u80fd",prerequests:["thief"],price:200,type:"skill",icon:"Texture/Skill/smokingBombSkill"},{name:"treasureSkill",displayName:"\u76d7\u8d3c\u7684\u5bfb\u5b9d\u6280\u80fd",prerequests:["thief"],price:200,type:"skill",icon:"Texture/Skill/treasureSkill"},{name:"exchangeSkill",displayName:"\u76d7\u8d3c\u7684\u5b89\u88c5\u70b8\u5f39\u6280\u80fd",prerequests:["treasureSkill"],price:500,type:"skill",icon:"Texture/Skill/exchangeSkill"},{name:"eightArrowSkill",displayName:"\u76d7\u8d3c\u7684\u516b\u65b9\u7bad\u6280\u80fd",prerequests:["thief"],price:1500,type:"skill",icon:"Texture/Skill/eightArrowSkill"},{name:"thiefPerkSlot2",displayName:"\u76d7\u8d3c\u7684\u7b2c2\u4e2a\u5929\u8d4b\u69fd",prerequests:["thief"],price:50,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.thief=2,r.saveProgress()}},{name:"thiefPerkSlot3",displayName:"\u76d7\u8d3c\u7684\u7b2c3\u4e2a\u5929\u8d4b\u69fd",prerequests:["thiefPerkSlot2"],price:200,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.thief=3,r.saveProgress()}},{name:"thiefPerkSlot4",displayName:"\u76d7\u8d3c\u7684\u7b2c4\u4e2a\u5929\u8d4b\u69fd",prerequests:["thiefPerkSlot3"],price:1e3,type:"perkSlot",icon:"Texture/Unlock/perkSlot",onUnlock:function(){r.progress.maxPerk.thief=4,r.saveProgress()}}]},cc._RF.pop()},{common:"common",global:"global",i18n:"i18n",storage:"storage"}],unlock:[function(e,t,n){"use strict";cc._RF.push(t,"79669+Ly59K2aB/BX0LelG9","unlock");var r=e("global"),i=(e("common"),e("storage"));e("MenuScene");cc.Class({extends:cc.Component,properties:{unlockNameLabel:cc.Label,unlockIcon:cc.Sprite,unlockButton:cc.Button,starIcon:cc.Sprite,priceLabel:cc.Label},start:function(){this.node.on("touchend",function(){if("skill"==this.entry.type)if(this.toggle)this.unlockNameLabel.string=this.entry.displayName,this.toggle=!1;else{var e=new cc.Node;e.addComponent(this.entry.name),e=e.getComponent(this.entry.name),this.unlockNameLabel.string=e.desc,this.toggle=!0}},this)},updateItem:function(e,t){var n=this;this.itemID=t,this.entry=e,this.priceLabel.string=this.entry.price,this.unlockNameLabel.string=this.entry.displayName,cc.loader.loadRes(this.entry.icon,cc.SpriteFrame,function(e,t){n.unlockIcon.spriteFrame=t}),this.entry.avaiable?this.unlockButton.interactable=!0:this.unlockButton.interactable=!1,this.toggle=!1},click:function(){r.UnlockScene.star>=this.entry.price&&!i.unlocked[this.entry.name]&&(this.unlockButton.interactable=!1,r.UnlockScene.unlock(this.entry,this.unlockButton))}}),cc._RF.pop()},{MenuScene:"MenuScene",common:"common",global:"global",storage:"storage"}],vampire:[function(e,t,n){"use strict";cc._RF.push(t,"0ad6dI/YYdAa5XC0ehDZGfm","vampire");var r=e("global"),i=e("enemy");cc.Class({extends:i,properties:{title:{get:function(){return"\u5438\u8840\u9b3c"},override:!0},desc:{get:function(){return"\u51fb\u4e2d\u4f60\u65f6\u81ea\u5df1\u53471\u7ea7\u3002\u653b\u51fb\u529b\u8d85\u8d85\u9ad8\u3002\n\u7ecf\u9a8c\u503c\u8d85\u9ad8\u3002"},override:!0},exp:{get:function(){return(this.level*this.level+this.star)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return this.level*this.level*2},override:!0},isUndead:!0},ctor:function(){this.type="vampire"},afterHitHero:function(e){this.beforeLevelUp(this.level),this.level+=1,this.onLevelUp(this.level),this._super(e)}}),cc._RF.pop()},{enemy:"enemy",global:"global"}],verticalSlashSkill:[function(e,t,n){"use strict";cc._RF.push(t,"70056Qi2kNLC6PcHVQe9SE2","verticalSlashSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="verticalSlashSkill",this.icon="Skill/verticalSlashSkill",this.displayName="\u7eb5\u65a9",this.desc="\u653b\u51fb\u6240\u5728\u5217\u6240\u6709\u7684\u654c\u4eba",this.coolDown=12+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown-=1,this.reduceWait(1)},onUsed:function(){for(var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n={fromPosition:t,type:o.ATTACK_TYPE_SKILL},r={},s=0;s<i.currentRoom.height;s++){var c=i.currentRoom.getMovableByPosition(t.x,s);if(c&&c.getComponent("enemy")){if(r[c._id])continue;r[c._id]=1,c.checkHit(e,n)?c.beHit(e,n):c.dodgeAttack(e,n)}}this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME/2)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],vines:[function(e,t,n){"use strict";cc._RF.push(t,"0154fBCePdDAZdxnaB5byCo","vines");var r=e("global"),i=e("enemy");cc.Class({extends:i,properties:{title:{get:function(){return"\u607c\u4eba\u7684\u85e4\u8513"},override:!0},desc:{get:function(){return"\u4e0d\u4f1a\u79fb\u52a8\n\u653b\u51fb\u529b\u59cb\u7ec8\u4e3a1\n\u7ecf\u9a8c\u503c\u6781\u4f4e"},override:!0},exp:{get:function(){return(this.level+this.star)*r.EXP_INFLATION_RATE},override:!0},attack:{get:function(){return 1},override:!0}},ctor:function(){this.type="vines",this._isMovable=!1}}),cc._RF.pop()},{enemy:"enemy",global:"global"}],vlog2:[function(e,t,n){"use strict";cc._RF.push(t,"7ef2bHx0BdPk7WrAJIV4Dqm","vlog2");var r=e("item"),i=(e("global"),e("common"));cc.Class({extends:r,properties:{title:{get:function(){return"\u6eda\u6728"},override:!0},desc:{get:function(){return"\u53ea\u80fd\u5de6\u53f3\u6eda\u52a8"},override:!0}},ctor:function(){this.type="vlog2",this.relativePositions=[{x:0,y:0},{x:0,y:1}],this.breakable=!1,this.exchangeable=!1},isMovable:function(e){return this._super(e)&&(e==i.DIRECTION_LEFT||e==i.DIRECTION_RIGHT)}}),cc._RF.pop()},{common:"common",global:"global",item:"item"}],vlog3:[function(e,t,n){"use strict";cc._RF.push(t,"ae9f8GSZwZPS5TNlFuOq+Lu","vlog3");var r=e("vlog2");cc.Class({extends:r,properties:{},ctor:function(){this.type="vlog3",this.relativePositions=[{x:0,y:0},{x:0,y:1},{x:0,y:2}],this.breakable=!1,this.exchangeable=!1}}),cc._RF.pop()},{vlog2:"vlog2"}],vlog4:[function(e,t,n){"use strict";cc._RF.push(t,"27747tMz95LKryYyAlZ5HLV","vlog4");var r=e("vlog2");cc.Class({extends:r,properties:{},ctor:function(){this.type="vlog4",this.relativePositions=[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3}],this.breakable=!1,this.exchangeable=!1}}),cc._RF.pop()},{vlog2:"vlog2"}],vlog5:[function(e,t,n){"use strict";cc._RF.push(t,"f452cU6RsxF4LxcYcEgkuzn","vlog5");var r=e("vlog2");cc.Class({extends:r,properties:{},ctor:function(){this.type="vlog5",this.relativePositions=[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:0,y:4}],this.breakable=!1,this.exchangeable=!1}}),cc._RF.pop()},{vlog2:"vlog2"}],wall:[function(e,t,n){"use strict";cc._RF.push(t,"212a9QEzhpGKbdJo08Xb2l+","wall");var r=e("tile");cc.Class({extends:r,properties:{},ctor:function(){this.type="wall",this._isPassable=!1,this._isCapture=!1,this._canGenEnemy=!1}}),cc._RF.pop()},{tile:"tile"}],whirlSkill:[function(e,t,n){"use strict";cc._RF.push(t,"8aaca7/1QBCgau3S2svfjac","whirlSkill");var r=e("skill"),i=e("global"),o=e("common");e("enemy");cc.Class({extends:r,properties:{},ctor:function(){this.skillName="whirlSkill",this.icon="Skill/whirlSkill",this.displayName="\u56de\u65cb\u65a9",this.desc="\u653b\u51fb\u4e0a\u4e0b\u5de6\u53f34\u4e2a\u683c\u5b50\u7684\u6240\u6709\u7684\u654c\u4eba",this.coolDown=12+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408"},onLevelUp:function(e){this.coolDown--,this.reduceWait()},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero"),t=e.positions[0],n={fromPosition:t,type:o.ATTACK_TYPE_SKILL},r={};[{x:t.x-1,y:t.y},{x:t.x+1,y:t.y},{x:t.x,y:t.y-1},{x:t.x,y:t.y+1}].forEach(function(t){var o=i.currentRoom.getMovableByPosition(t.x,t.y);if(o&&o.getComponent("enemy")){if(r[o._id])return;r[o._id]=1,o.checkHit(e,n)?o.beHit(e,n):o.dodgeAttack(e,n)}},this),this.scheduleOnce(function(){e.afterUseSkill()},i.HERO_ATTACK_TIME/2)}}),cc._RF.pop()},{common:"common",enemy:"enemy",global:"global",skill:"skill"}],wisdomSkill:[function(e,t,n){"use strict";cc._RF.push(t,"29b727RnwVLBYgxeBS8WjOq","wisdomSkill");var r=e("skill"),i=e("global"),o=(e("common"),e("i18n"));cc.Class({extends:r,properties:{effect:{get:function(){return 4*this.level}},desc:{get:function(){return o.t("wisdomSkill/desc",{effect:Math.round(this.effect*i.WISDOM_EFFECT*100)})}}},ctor:function(){this.skillName="wisdomSkill",this.icon="Skill/wisdomSkill",this.displayName=o.t("wisdomSkill/name"),this.coolDown=12+i.SKILL_WAIT_ADJUST},levelUpDesc:function(e){return o.t("wisdomSkill/levelUp",{effect:Math.round(4*(this.level+1)*i.WISDOM_EFFECT*100)})},onLevelUp:function(e){this.coolDown+=1},onUsed:function(){var e=i.currentRoom.hero.getComponent("hero");e.gainStatus("wisdom",1,{effect:this.effect}),e.afterUseSkill()}}),cc._RF.pop()},{common:"common",global:"global",i18n:"i18n",skill:"skill"}],wisdom:[function(e,t,n){"use strict";cc._RF.push(t,"8aadeox8zpMuK1N5uqQW8On","wisdom");var r=e("status"),i=e("global");cc.Class({extends:r,properties:{},ctor:function(){this.statusName="wisdom"},onGain:function(){i.currentRoom.hero.getComponent("hero").wisdom+=this.extra.effect},onLost:function(){i.currentRoom.hero.getComponent("hero").wisdom-=this.extra.effect}}),cc._RF.pop()},{global:"global",status:"status"}],wxAdProvider:[function(e,t,n){"use strict";cc._RF.push(t,"ccf44DoniVBp4V/pmP2anqc","wxAdProvider");var r=e("adProvider");cc.Class({extends:r,properties:{},initBanner:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&(this.bannerAd=wx.createBannerAd({adUnitId:"xxxx",style:{left:10,top:76,width:320}}))},refreshBanner:function(){cc.sys.platform,cc.sys.WECHAT_GAME},showBanner:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&this.bannerAd.show()},hideBanner:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&this.bannerAd.hide()},showVideo:function(){cc.sys.platform,cc.sys.WECHAT_GAME},initVideo:function(){cc.sys.platform,cc.sys.WECHAT_GAME}}),cc._RF.pop()},{adProvider:"adProvider"}],zh_tw:[function(e,t,n){"use strict";cc._RF.push(t,"bd8e3HHq9NDJYwy10thVrve","zh_tw"),t.exports={"ModeSelectScene/choose_hero":"\u9009\u62e9\u82f1\u96c4","ModeSelectScene/choose_perks":"\u9009\u62e9\u7279\u8d28","ModeSelectScene/score_adjust":"\u5206\u6570\u4fee\u6b63","ModeSelectScene/start_game":"\u5f00\u59cb\u6e38\u620f",warriorSkillSlot3:"\u6218\u58eb\u7684\u7b2c3\u4e2a\u6280\u80fd\u69fd",warriorSkillSlot4:"\u6218\u58eb\u7684\u7b2c4\u4e2a\u6280\u80fd\u69fd",warriorSkillSlot5:"\u6218\u58eb\u7684\u7b2c5\u4e2a\u6280\u80fd\u69fd","backwardSlashSkill/name":"\u62d6\u5200\u8ba1","backwardSlashSkill/desc":"\u672c\u8f6e\u4f1a\u5bf9\u81ea\u5df1\u8eab\u540e\u7684\u654c\u4eba\u8fdb\u884c\u666e\u901a\u653b\u51fb","backwardSlashSkill/levelUp":"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408","wisdomSkill/name":"\u777f\u667a","wisdomSkill/desc":"\u672c\u56de\u5408\u7ecf\u9a8c\u503c\u6536\u5165\u589e\u52a0%{effect}%","wisdomSkill/levelUp":"\u6539\u4e3a\u672c\u56de\u5408\u7ecf\u9a8c\u503c\u6536\u5165\u589e\u52a0%{effect}%\uff0c\u4f46\u51b7\u5374\u65f6\u95f4\u4e5f\u589e\u52a01\u56de\u5408","enemy/mummy":"\u50f5\u5c38","enemy/minotaur":"\u98de\u9f99"},cc._RF.pop()},{}],zh:[function(e,t,n){"use strict";cc._RF.push(t,"87f1fs0gohHDIfNg4aePXbt","zh"),t.exports={"ModeSelectScene/choose_hero":"\u9009\u62e9\u82f1\u96c4","ModeSelectScene/choose_perks":"\u9009\u62e9\u7279\u8d28","ModeSelectScene/score_adjust":"\u5206\u6570\u4fee\u6b63","ModeSelectScene/start_game":"\u5f00\u59cb\u6e38\u620f",warriorSkillSlot3:"\u6218\u58eb\u7684\u7b2c3\u4e2a\u6280\u80fd\u69fd",warriorSkillSlot4:"\u6218\u58eb\u7684\u7b2c4\u4e2a\u6280\u80fd\u69fd",warriorSkillSlot5:"\u6218\u58eb\u7684\u7b2c5\u4e2a\u6280\u80fd\u69fd","backwardSlashSkill/name":"\u62d6\u5200\u8ba1","backwardSlashSkill/desc":"\u672c\u8f6e\u4f1a\u5bf9\u81ea\u5df1\u8eab\u540e\u7684\u654c\u4eba\u8fdb\u884c\u666e\u901a\u653b\u51fb","backwardSlashSkill/levelUp":"\u51b7\u5374\u65f6\u95f4\u51cf\u5c111\u56de\u5408","wisdomSkill/name":"\u777f\u667a","wisdomSkill/desc":"\u672c\u56de\u5408\u7ecf\u9a8c\u503c\u6536\u5165\u589e\u52a0%{effect}%","wisdomSkill/levelUp":"\u6539\u4e3a\u672c\u56de\u5408\u7ecf\u9a8c\u503c\u6536\u5165\u589e\u52a0%{effect}%\uff0c\u4f46\u51b7\u5374\u65f6\u95f4\u4e5f\u589e\u52a01\u56de\u5408","enemy/mummy":"\u50f5\u5c38","enemy/minotaur":"\u98de\u9f99"},cc._RF.pop()},{}]},{},["IntroScene","MenuScene","achievement","achievementEntry","achievementScene","adProvider","wxAdProvider","common","effect","poolHandler","archer","ballista","boss","bossBeholder","bossDeath","bossHydra","catapult","centaur","chomper","enemy","fireElement","gargoyle","ghost","golem","killerBee","kobold","medusa","mimic","minotaur","mummy","ooze","orcChief","orge","ratman","scorpion","shaman","skeleton","slime","snake","summoner","treant","troll","vampire","vines","global","hero","angel","bomb","gem","hlog2","hlog3","hlog4","hlog5","iceWall","item","itemFactory","manaPotion","poisonPotion","potion","tomb","vlog2","vlog3","vlog4","vlog5","loading","heroOption","modeSelectScene","perkEntry","perkItem","perkScene","perkSlot","Room","RoomScene","TileSet","choice","choiceFactory","descDialog","enemyFactory","exitDialog","gameOverDialog","heroDescDialog","inputNameDialog","levelUpDialog","movable","roomEntry","skillDescDialog","tutorialEnemyFactory","DataSource","LeanCloudDataSource","ScoreBoardScene","WXDataSource","score","SettingScene","angelSkill","backwardSlashSkill","bigWhirlSkill","blinkSkill","bombSkill","calmSkill","chargeSkill","constitutionSkill","coolingSkill","crossSlashSkill","dexteritySkill","dispelSkill","eightArrowSkill","exchangeSkill","fireballSkill","forwardSlashSkill","fourArrowSkill","fourDiagnalArrowSkill","healSkill","horizontalSlashSkill","iceWallSkill","lighteningSkill","luckSkill","meteorShowerSkill","missileSkill","resurrectionSkill","shieldSkill","skill","smokingBombSkill","spiderWebSkill","teleportSkill","tornadoSkill","treasureSkill","turnUndeadSkill","verticalSlashSkill","whirlSkill","wisdomSkill","angry","backwardSlashStatus","blind","calm","cloud","cursed","dizzy","forbid","forwardSlashStatus","frozen","nail","pitfall","poison","portal","prevent","resurrection","shield","slowed","smoke","status","stun","treasure","wisdom","storage","door","floor","tile","wall","tutorial","listCtrl","UnlockScene","unlock","unlockEntry","LabelLocalized","en","zh","zh_tw","i18n","polyglot"]);